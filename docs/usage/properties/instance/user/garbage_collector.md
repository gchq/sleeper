## Instance Properties - Garbage Collector - User Defined

The following instance properties relate to garbage collection.

| Property Name                          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Default Value | Run CDK Deploy When Changed |
|----------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|-----------------------------|
| sleeper.gc.period.minutes              | The frequency in minutes with which the garbage collector lambda is run.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 15            | true                        |
| sleeper.gc.lambda.timeout.seconds      | The timeout in seconds for the garbage collector lambda.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | 840           | true                        |
| sleeper.gc.memory.mb                   | The amount of memory in MB for the lambda function used to perform garbage collection.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |               | true                        |
| sleeper.gc.concurrency.reserved        | The reserved concurrency for the garbage collection lambda.<br>See reserved concurrency overview at: https://docs.aws.amazon.com/lambda/latest/dg/configuration-concurrency.html                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |               | true                        |
| sleeper.gc.concurrency.max             | The maximum given concurrency allowed for the garbage collection lambda.<br>See maximum concurrency overview at: https://aws.amazon.com/blogs/compute/introducing-maximum-concurrency-of-aws-lambda-functions-when-using-amazon-sqs-as-an-event-source/                                                                                                                                                                                                                                                                                                                                                                                                            |               | true                        |
| sleeper.gc.table.batch.size            | The number of tables to perform garbage collection for in a single invocation. This will be the batch size for a lambda as an SQS FIFO event source. This can be a maximum of 10.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | 1             | true                        |
| sleeper.run.gc.offline                 | Whether to perform garbage collection for offline tables.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | false         | false                       |
| sleeper.gc.batch.size                  | The number of deleted files recorded to the state store in a single commit.<br>The garbage collector keeps deleting files as long as there are files to delete in the state store, and updates the state store whenever it has deleted this many files.                                                                                                                                                                                                                                                                                                                                                                                                            | 10000         | false                       |
| sleeper.gc.files.maximum               | The maximum number of files that can be deleted per invocation of the garbage collector.<br>If a batch of files exceeds this limit, the whole batch will be deleted before terminating.<br>This limit is applied separately for each Sleeper table.<br>This restriction is placed to avoid reaching the lambda timeout for the garbage collector. If this timeout is met, it is most likely to happen whilst deleting a batch of files. This would result in files being deleted, but the state store not being updated. Any files caught in such a state will be found on the next garbage collector run and deleted again, updating the state store as expected. | 750000        | false                       |
| sleeper.default.table.gc.delay.minutes | A file will not be deleted until this number of minutes have passed after it has been marked as ready for garbage collection. The reason for not deleting files immediately after they have been marked as ready for garbage collection is that they may still be in use by queries. This property can be overridden on a per-table basis.                                                                                                                                                                                                                                                                                                                         | 15            | false                       |
