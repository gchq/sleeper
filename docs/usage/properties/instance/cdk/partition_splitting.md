## PARTITION SPLITTING

Below is a table containing all the details for the property group: Partition Splitting

| Property Name                                           | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Default Value | Run CdkDeploy When Changed |
|---------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|----------------------------|
| sleeper.partition.splitting.period.minutes              | The frequency in minutes with which the lambda runs to find partitions that need splitting and send jobs to the splitting lambda.                                                                                                                                                                                                                                                                                                                                | 30            | true                       |
| sleeper.partition.splitting.files.maximum               | When a partition needs splitting, a partition splitting job is created. This reads in the sketch files associated to the files in the partition in order to identify the median. This parameter controls the maximum number of files that are read in.                                                                                                                                                                                                           | 50            | false                      |
| sleeper.partition.splitting.finder.batch.size           | The number of tables to find partitions to split for in a single invocation. This will be the batch size for a lambda as an SQS FIFO event source. This can be a maximum of 10.                                                                                                                                                                                                                                                                                  | 1             | true                       |
| sleeper.partition.splitting.finder.memory.mb            | The amount of memory in MB for the lambda function used to identify partitions that need to be split.                                                                                                                                                                                                                                                                                                                                                            |               | true                       |
| sleeper.partition.splitting.finder.timeout.seconds      | The timeout in seconds for the lambda function used to identify partitions that need to be split.                                                                                                                                                                                                                                                                                                                                                                | 900           | true                       |
| sleeper.partition.splitting.finder.concurrency.reserved | The reserved concurrency for the find partitions to split lambda.<br>See reserved concurrency overview at: https://docs.aws.amazon.com/lambda/latest/dg/configuration-concurrency.html                                                                                                                                                                                                                                                                           |               | false                      |
| sleeper.partition.splitting.finder.concurrency.max      | The maximum given concurrency allowed for the find partitions to split lambda.<br>See maximum concurrency overview at: https://aws.amazon.com/blogs/compute/introducing-maximum-concurrency-of-aws-lambda-functions-when-using-amazon-sqs-as-an-event-source/                                                                                                                                                                                                    |               | false                      |
| sleeper.partition.splitting.memory.mb                   | The amount of memory in MB for the lambda function used to split partitions.                                                                                                                                                                                                                                                                                                                                                                                     |               | true                       |
| sleeper.partition.splitting.timeout.seconds             | The timeout in seconds for the lambda function used to split partitions.                                                                                                                                                                                                                                                                                                                                                                                         | 900           | true                       |
| sleeper.partition.splitting.reserved.concurrency        | The number of lambda instances to reserve from your AWS account's quota for splitting partitions. Note that this will not provision instances until they are needed. Each time partition splitting runs, a separate lambda invocation will be made for each partition that needs to be split. If the reserved concurrency is less than the number of partitions that need to be split across all Sleeper tables in the instance, these invocations may queue up. | 10            | true                       |
| sleeper.default.partition.splitting.threshold           | This is the default value of the partition splitting threshold. Partitions with more than the following number of records in will be split. This value can be overridden on a per-table basis.                                                                                                                                                                                                                                                                   | 1000000000    | false                      |
| sleeper.partition.splitting.finder.queue.url            | The URL of the queue for requests to find partitions to split.                                                                                                                                                                                                                                                                                                                                                                                                   |               | true                       |
| sleeper.partition.splitting.finder.queue.arn            | The ARN of the queue for requests to find partitions to split.                                                                                                                                                                                                                                                                                                                                                                                                   |               | true                       |
| sleeper.partition.splitting.finder.dlq.url              | The URL of the dead letter queue for requests to find partitions to split.                                                                                                                                                                                                                                                                                                                                                                                       |               | true                       |
| sleeper.partition.splitting.finder.dlq.arn              | The ARN of the dead letter queue for requests to find partitions to split.                                                                                                                                                                                                                                                                                                                                                                                       |               | true                       |
| sleeper.partition.splitting.job.queue.url               | The URL of the queue for partition splitting jobs.                                                                                                                                                                                                                                                                                                                                                                                                               |               | true                       |
| sleeper.partition.splitting.job.queue.arn               | The ARN of the queue for partition splitting jobs.                                                                                                                                                                                                                                                                                                                                                                                                               |               | true                       |
| sleeper.partition.splitting.job.dlq.url                 | The URL of the dead letter queue for partition splitting jobs.                                                                                                                                                                                                                                                                                                                                                                                                   |               | true                       |
| sleeper.partition.splitting.job.dlq.arn                 | The ARN of the dead letter queue for partition splitting jobs.                                                                                                                                                                                                                                                                                                                                                                                                   |               | true                       |
| sleeper.partition.splitting.trigger.lambda.function     | The function name of the lambda that finds partitions to split and sends jobs to the split partition lambda.                                                                                                                                                                                                                                                                                                                                                     |               | true                       |
| sleeper.partition.splitting.rule                        | The name of the CloudWatch rule that periodically triggers the partition splitting lambda.                                                                                                                                                                                                                                                                                                                                                                       |               | true                       |
