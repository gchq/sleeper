{
  "StackIdToTemplate": {
    "TestInstance": {
      "Parameters": {
        "BootstrapVersion": {
          "Type": "AWS::SSM::Parameter::Value\u003cString\u003e",
          "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
          "Default": "/cdk-bootstrap/hnb659fds/version"
        }
      },
      "Resources": {
        "VpcNestedStackVpcNestedStackResourceC40EA5DD": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingvpccheck75B1AA4CRef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingvpccheck75B1AA4CRef"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingvpccheckprovider575D60E1Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingvpccheckprovider575D60E1Ref"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Vpc"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "BulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceB972B25C": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn": {
                "Fn::GetAtt": [
                  "BulkImportBucketNestedStackBulkImportBucketNestedStackResource59EDB97D",
                  "Outputs.TestInstanceBulkImportBucket58F540BAArn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Ref"
                ]
              },
              "referencetoTestInstanceAutoStopEmrServerlessApplicationNestedStackAutoStopEmrServerlessApplicationNestedStackResourceEC7ABF75OutputsTestInstanceAutoStopEmrServerlessApplicationProviderframeworkonEvent3BEA6713Arn": {
                "Fn::GetAtt": [
                  "AutoStopEmrServerlessApplicationNestedStackAutoStopEmrServerlessApplicationNestedStackResource26009A0C",
                  "Outputs.TestInstanceAutoStopEmrServerlessApplicationProviderframeworkonEvent3BEA6713Arn"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
                "Fn::GetAtt": [
                  "TopicNestedStackTopicNestedStackResource178581F0",
                  "Outputs.TestInstanceTopicErrorsTopic4F3F7EF3Ref"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingbulkimportEMRServerlessstart5F08C53BRef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingbulkimportEMRServerlessstart5F08C53BRef"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "BulkImportEMRServerless"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Ref"
                ]
              },
              "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
                "Fn::GetAtt": [
                  "TopicNestedStackTopicNestedStackResource178581F0",
                  "Outputs.TestInstanceTopicErrorsTopic4F3F7EF3Ref"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpartitionsplittingtrigger4A1B8250Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingpartitionsplittingtrigger4A1B8250Ref"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpartitionsplittinghandlerD89FB7CDRef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingpartitionsplittinghandlerD89FB7CDRef"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpartitionsplittingfindtosplit469D578DRef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingpartitionsplittingfindtosplit469D578DRef"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceAutoDeleteS3ObjectsNestedStackAutoDeleteS3ObjectsNestedStackResourceA27C7E41OutputsTestInstanceAutoDeleteS3ObjectsProviderframeworkonEventA39C1CF4Arn": {
                "Fn::GetAtt": [
                  "AutoDeleteS3ObjectsNestedStackAutoDeleteS3ObjectsNestedStackResource5B005B7B",
                  "Outputs.TestInstanceAutoDeleteS3ObjectsProviderframeworkonEventA39C1CF4Arn"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Configuration"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactiontaskscreatorB668B31ARef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingcompactiontaskscreatorB668B31ARef"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingFargateCompactionTasksCCB274EAArn": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingFargateCompactionTasksCCB274EAArn"
                ]
              },
              "referencetoTestInstanceAutoStopEcsClusterTasksNestedStackAutoStopEcsClusterTasksNestedStackResource139EB607OutputsTestInstanceAutoStopEcsClusterTasksProviderframeworkonEvent8CDD6C7CArn": {
                "Fn::GetAtt": [
                  "AutoStopEcsClusterTasksNestedStackAutoStopEcsClusterTasksNestedStackResource98C0EF32",
                  "Outputs.TestInstanceAutoStopEcsClusterTasksProviderframeworkonEvent8CDD6C7CArn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Ref"
                ]
              },
              "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
                "Fn::GetAtt": [
                  "TopicNestedStackTopicNestedStackResource178581F0",
                  "Outputs.TestInstanceTopicErrorsTopic4F3F7EF3Ref"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactioncommitbatcherC6D633F8Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingcompactioncommitbatcherC6D633F8Ref"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactionjobdispatcher0ECCFF5ERef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingcompactionjobdispatcher0ECCFF5ERef"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn": {
                "Fn::GetAtt": [
                  "CompactionTrackerNestedStackCompactionTrackerNestedStackResource452C5BE7",
                  "Outputs.TestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn"
                ]
              },
              "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn": {
                "Fn::GetAtt": [
                  "CompactionTrackerNestedStackCompactionTrackerNestedStackResource452C5BE7",
                  "Outputs.TestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactionjobcreationhandlerDB342042Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingcompactionjobcreationhandlerDB342042Ref"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactionjobcreationtrigger5B1465ADRef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingcompactionjobcreationtrigger5B1465ADRef"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionTaskStatusTable9E1002EFArn": {
                "Fn::GetAtt": [
                  "CompactionTrackerNestedStackCompactionTrackerNestedStackResource452C5BE7",
                  "Outputs.TestInstanceCompactionTrackerDynamoDBCompactionTaskStatusTable9E1002EFArn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingFargateCompactionTasksCCB274EARef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingFargateCompactionTasksCCB274EARef"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "BulkImportBucketNestedStackBulkImportBucketNestedStackResource59EDB97D": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceAutoDeleteS3ObjectsNestedStackAutoDeleteS3ObjectsNestedStackResourceA27C7E41OutputsTestInstanceAutoDeleteS3ObjectsProviderframeworkonEventA39C1CF4Arn": {
                "Fn::GetAtt": [
                  "AutoDeleteS3ObjectsNestedStackAutoDeleteS3ObjectsNestedStackResource5B005B7B",
                  "Outputs.TestInstanceAutoDeleteS3ObjectsProviderframeworkonEventA39C1CF4Arn"
                ]
              }
            }
          }
        },
        "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Ref"
                ]
              },
              "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
                "Fn::GetAtt": [
                  "TopicNestedStackTopicNestedStackResource178581F0",
                  "Outputs.TestInstanceTopicErrorsTopic4F3F7EF3Ref"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatestorecommitterCB6F35F0Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingstatestorecommitterCB6F35F0Ref"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn": {
                "Fn::GetAtt": [
                  "CompactionTrackerNestedStackCompactionTrackerNestedStackResource452C5BE7",
                  "Outputs.TestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn"
                ]
              },
              "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn": {
                "Fn::GetAtt": [
                  "CompactionTrackerNestedStackCompactionTrackerNestedStackResource452C5BE7",
                  "Outputs.TestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "StateStoreCommitter"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableData"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestNestedStackIngestNestedStackResourceD6AFAC89": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceAutoStopEcsClusterTasksNestedStackAutoStopEcsClusterTasksNestedStackResource139EB607OutputsTestInstanceAutoStopEcsClusterTasksProviderframeworkonEvent8CDD6C7CArn": {
                "Fn::GetAtt": [
                  "AutoStopEcsClusterTasksNestedStackAutoStopEcsClusterTasksNestedStackResource98C0EF32",
                  "Outputs.TestInstanceAutoStopEcsClusterTasksProviderframeworkonEvent8CDD6C7CArn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Ref"
                ]
              },
              "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
                "Fn::GetAtt": [
                  "TopicNestedStackTopicNestedStackResource178581F0",
                  "Outputs.TestInstanceTopicErrorsTopic4F3F7EF3Ref"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingIngestTasks98782505Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingIngestTasks98782505Ref"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingIngestTasks98782505Arn": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingIngestTasks98782505Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingingestcreatetasksC7172C2BRef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingingestcreatetasksC7172C2BRef"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Ingest"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionTrackerNestedStackCompactionTrackerNestedStackResource452C5BE7": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test"
          }
        },
        "GarbageCollectorNestedStackGarbageCollectorNestedStackResource6471D6BF": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Ref"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLogginggarbagecollector6DFCBB5ERef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLogginggarbagecollector6DFCBB5ERef"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                ]
              },
              "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
                "Fn::GetAtt": [
                  "TopicNestedStackTopicNestedStackResource178581F0",
                  "Outputs.TestInstanceTopicErrorsTopic4F3F7EF3Ref"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLogginggarbagecollectortrigger27E59B36Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLogginggarbagecollectortrigger27E59B36Ref"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "GarbageCollector"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "EmrStudioNestedStackEmrStudioNestedStackResource1514A684": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BARef": {
                "Fn::GetAtt": [
                  "BulkImportBucketNestedStackBulkImportBucketNestedStackResource59EDB97D",
                  "Outputs.TestInstanceBulkImportBucket58F540BARef"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "EmrStudio"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingingestbatchercreatejobs490152C0Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingingestbatchercreatejobs490152C0Ref"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Ref"
                ]
              },
              "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
                "Fn::GetAtt": [
                  "TopicNestedStackTopicNestedStackResource178581F0",
                  "Outputs.TestInstanceTopicErrorsTopic4F3F7EF3Ref"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn": {
                "Fn::GetAtt": [
                  "BulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceB972B25C",
                  "Outputs.TestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingingestbatchersubmitfiles70C40CB8Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingingestbatchersubmitfiles70C40CB8Ref"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCArn": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestJobQueue349E97BCArn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestBatcher"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "DashboardNestedStackDashboardNestedStackResource8EE10CBD": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922QueueName": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922QueueName"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationDLQB8A078BDQueueName": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobCreationDLQB8A078BDQueueName"
                ]
              },
              "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1QueueName": {
                "Fn::GetAtt": [
                  "TableMetricsNestedStackTableMetricsNestedStackResource07C9A22F",
                  "Outputs.TestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1QueueName"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956QueueName": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956QueueName"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitDLQ5632FB33QueueName": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionCommitDLQ5632FB33QueueName"
                ]
              },
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449QueueName": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449QueueName"
                ]
              },
              "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313QueueName": {
                "Fn::GetAtt": [
                  "GarbageCollectorNestedStackGarbageCollectorNestedStackResource6471D6BF",
                  "Outputs.TestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313QueueName"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFQueueName": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFQueueName"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157QueueName": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157QueueName"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6QueueName": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6QueueName"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528QueueName": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528QueueName"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93QueueName": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93QueueName"
                ]
              },
              "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3QueueName": {
                "Fn::GetAtt": [
                  "TransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource81F69088",
                  "Outputs.TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3QueueName"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DQueueName": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DQueueName"
                ]
              },
              "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueueQueryDeadLetterQueue496F8592QueueName": {
                "Fn::GetAtt": [
                  "QueryQueueNestedStackQueryQueueNestedStackResource093FA017",
                  "Outputs.TestInstanceQueryQueueQueryDeadLetterQueue496F8592QueueName"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCQueueName": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestJobQueue349E97BCQueueName"
                ]
              },
              "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobDeadLetterQueueA9E923E6QueueName": {
                "Fn::GetAtt": [
                  "BulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceB972B25C",
                  "Outputs.TestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobDeadLetterQueueA9E923E6QueueName"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465QueueName": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465QueueName"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobDeadLetterQueueE7DE67BFQueueName": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestJobDeadLetterQueueE7DE67BFQueueName"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECQueueName": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECQueueName"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Dashboard"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "QueryNestedStackQueryNestedStackResource4085691D": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Arn": {
                "Fn::GetAtt": [
                  "QueryQueueNestedStackQueryQueueNestedStackResource093FA017",
                  "Outputs.TestInstanceQueryQueue61C01E76Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingqueryexecutorE6E0DC1DRef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingqueryexecutorE6E0DC1DRef"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Ref"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
                "Fn::GetAtt": [
                  "TopicNestedStackTopicNestedStackResource178581F0",
                  "Outputs.TestInstanceTopicErrorsTopic4F3F7EF3Ref"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingqueryleafpartition81D7EEE1Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingqueryleafpartition81D7EEE1Ref"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TableIndexNestedStackTableIndexNestedStackResource55615825": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableIndex"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatesnapshotcreation859603B7Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingstatesnapshotcreation859603B7Ref"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Ref"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
                "Fn::GetAtt": [
                  "TopicNestedStackTopicNestedStackResource178581F0",
                  "Outputs.TestInstanceTopicErrorsTopic4F3F7EF3Ref"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatesnapshotdeletionD39358EFRef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingstatesnapshotdeletionD39358EFRef"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatesnapshotdeletiontrigger212475A9Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingstatesnapshotdeletiontrigger212475A9Ref"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatesnapshotcreationtriggerC988CCD4Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingstatesnapshotcreationtriggerC988CCD4Ref"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestTracker"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "LoggingNestedStackLoggingNestedStackResourceBF8F7D28": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TopicNestedStackTopicNestedStackResource178581F0": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Topic"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "QueryQueueNestedStackQueryQueueNestedStackResource093FA017": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
                "Fn::GetAtt": [
                  "TopicNestedStackTopicNestedStackResource178581F0",
                  "Outputs.TestInstanceTopicErrorsTopic4F3F7EF3Ref"
                ]
              }
            }
          }
        },
        "TransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource81F69088": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Ref"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
                "Fn::GetAtt": [
                  "TopicNestedStackTopicNestedStackResource178581F0",
                  "Outputs.TestInstanceTopicErrorsTopic4F3F7EF3Ref"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatetransactionfollower654BC5E7Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingstatetransactionfollower654BC5E7Ref"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatetransactiondeletiontriggerF4654DC9Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingstatetransactiondeletiontriggerF4654DC9Ref"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn": {
                "Fn::GetAtt": [
                  "CompactionTrackerNestedStackCompactionTrackerNestedStackResource452C5BE7",
                  "Outputs.TestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn"
                ]
              },
              "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn": {
                "Fn::GetAtt": [
                  "CompactionTrackerNestedStackCompactionTrackerNestedStackResource452C5BE7",
                  "Outputs.TestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatetransactiondeletion6C3C26FERef": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingstatetransactiondeletion6C3C26FERef"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701StreamArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701StreamArn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "AutoDeleteS3ObjectsNestedStackAutoDeleteS3ObjectsNestedStackResource5B005B7B": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautodeletes3objectsBB7CB874Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingautodeletes3objectsBB7CB874Ref"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautodeletes3objectsprovider5CD6DC03Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingautodeletes3objectsprovider5CD6DC03Ref"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoDeleteS3Objects"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TableMetricsNestedStackTableMetricsNestedStackResource07C9A22F": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingmetricspublisher9BCF87A3Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingmetricspublisher9BCF87A3Ref"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Ref"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                ]
              },
              "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
                "Fn::GetAtt": [
                  "TopicNestedStackTopicNestedStackResource178581F0",
                  "Outputs.TestInstanceTopicErrorsTopic4F3F7EF3Ref"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingmetricstrigger73B1BF98Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingmetricstrigger73B1BF98Ref"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableMetrics"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "BulkImportEMRCommonNestedStackBulkImportEMRCommonNestedStackResourceBE3FC23B": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn": {
                "Fn::GetAtt": [
                  "BulkImportBucketNestedStackBulkImportBucketNestedStackResource59EDB97D",
                  "Outputs.TestInstanceBulkImportBucket58F540BAArn"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                ]
              }
            }
          }
        },
        "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogStateStore"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "PropertiesNestedStackPropertiesNestedStackResourceE8D202E1": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueueQueryDeadLetterQueue496F8592Arn": {
                "Fn::GetAtt": [
                  "QueryQueueNestedStackQueryQueueNestedStackResource093FA017",
                  "Outputs.TestInstanceQueryQueueQueryDeadLetterQueue496F8592Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3Arn": {
                "Fn::GetAtt": [
                  "TransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource81F69088",
                  "Outputs.TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3Arn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Ref"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECRef": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECRef"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528Ref": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528Ref"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DRef": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DRef"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchQCAC69541Ref": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionPendingCompactionJobBatchQCAC69541Ref"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpropertieswriterprovider89DFF902Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingpropertieswriterprovider89DFF902Ref"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Arn": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Ref": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Ref"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationDLQB8A078BDRef": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobCreationDLQB8A078BDRef"
                ]
              },
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherSubmitToIngestBatcherLambdaFBA369BBRef": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherSubmitToIngestBatcherLambdaFBA369BBRef"
                ]
              },
              "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Arn": {
                "Fn::GetAtt": [
                  "QueryQueueNestedStackQueryQueueNestedStackResource093FA017",
                  "Outputs.TestInstanceQueryQueue61C01E76Arn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreatorCurrentVersion57E78EC7Version": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionTasksCreatorCurrentVersion57E78EC7Version"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Arn": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Arn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Ref": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Ref"
                ]
              },
              "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn": {
                "Fn::GetAtt": [
                  "BulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceB972B25C",
                  "Outputs.TestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCluster66A74FE8Ref": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionCluster66A74FE8Ref"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationDLQB8A078BDArn": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobCreationDLQB8A078BDArn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DArn": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DArn"
                ]
              },
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherJobCreationPeriodicTrigger9FD74049Ref": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherIngestBatcherJobCreationPeriodicTrigger9FD74049Ref"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Ref": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Ref"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitDLQ5632FB33Arn": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionCommitDLQ5632FB33Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotCreationScheduleD7BB96C6Ref": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotCreationScheduleD7BB96C6Ref"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Ref": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Ref"
                ]
              },
              "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313Ref": {
                "Fn::GetAtt": [
                  "GarbageCollectorNestedStackGarbageCollectorNestedStackResource6471D6BF",
                  "Outputs.TestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313Ref"
                ]
              },
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FRef": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FRef"
                ]
              },
              "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobQueue5B390950Arn": {
                "Fn::GetAtt": [
                  "TableMetricsNestedStackTableMetricsNestedStackResource07C9A22F",
                  "Outputs.TestInstanceTableMetricsMetricsJobQueue5B390950Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Ref": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Ref"
                ]
              },
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449Arn": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449Arn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationPeriodicTrigger8BCEF486Ref": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobCreationPeriodicTrigger8BCEF486Ref"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobDeadLetterQueueE7DE67BFRef": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestJobDeadLetterQueueE7DE67BFRef"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryTrackingTableD59EF8F3Ref": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryQueryTrackingTableD59EF8F3Ref"
                ]
              },
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FArn": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FArn"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryExecutorLambdaServiceRoleF73B7ACCRef": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryQueryExecutorLambdaServiceRoleF73B7ACCRef"
                ]
              },
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherSubmitToIngestBatcherLambdaCurrentVersion9D7068BDVersion": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherSubmitToIngestBatcherLambdaCurrentVersion9D7068BDVersion"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Ref": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Ref"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestTasksCreationPeriodicTriggerCA9BE66FRef": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestTasksCreationPeriodicTriggerCA9BE66FRef"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobDeadLetterQueueE7DE67BFArn": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestJobDeadLetterQueueE7DE67BFArn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterCurrentVersionSqsEventSourceTestInstanceStateStoreCommitterStateStoreCommitterQueue33B0078EDD58441ARef": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterCurrentVersionSqsEventSourceTestInstanceStateStoreCommitterStateStoreCommitterQueue33B0078EDD58441ARef"
                ]
              },
              "referencetoTestInstancePoliciesNestedStackPoliciesNestedStackResourceD8B71FB2OutputsTestInstancePoliciesAdminRole0994A69EArn": {
                "Fn::GetAtt": [
                  "PoliciesNestedStackPoliciesNestedStackResource62C569F8",
                  "Outputs.TestInstancePoliciesAdminRole0994A69EArn"
                ]
              },
              "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3Ref": {
                "Fn::GetAtt": [
                  "TransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource81F69088",
                  "Outputs.TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3Ref"
                ]
              },
              "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGarbageCollectorTrigger48F33D6BRef": {
                "Fn::GetAtt": [
                  "GarbageCollectorNestedStackGarbageCollectorNestedStackResource6471D6BF",
                  "Outputs.TestInstanceGarbageCollectorGarbageCollectorTrigger48F33D6BRef"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Ref": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Ref"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitTriggerLambdaCurrentVersionD6930CA9Version": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingFindPartitionsToSplitTriggerLambdaCurrentVersionD6930CA9Version"
                ]
              },
              "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobQueueD56E334DArn": {
                "Fn::GetAtt": [
                  "GarbageCollectorNestedStackGarbageCollectorNestedStackResource6471D6BF",
                  "Outputs.TestInstanceGarbageCollectorGCJobQueueD56E334DArn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECArn": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECArn"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCArn": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestJobQueue349E97BCArn"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                ]
              },
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449Ref": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449Ref"
                ]
              },
              "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobQueue5B390950Ref": {
                "Fn::GetAtt": [
                  "TableMetricsNestedStackTableMetricsNestedStackResource07C9A22F",
                  "Outputs.TestInstanceTableMetricsMetricsJobQueue5B390950Ref"
                ]
              },
              "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313Arn": {
                "Fn::GetAtt": [
                  "GarbageCollectorNestedStackGarbageCollectorNestedStackResource6471D6BF",
                  "Outputs.TestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313Arn"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CERef": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CERef"
                ]
              },
              "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerless6FCED42BApplicationId": {
                "Fn::GetAtt": [
                  "BulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceB972B25C",
                  "Outputs.TestInstanceBulkImportEMRServerless6FCED42BApplicationId"
                ]
              },
              "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FRef": {
                "Fn::GetAtt": [
                  "BulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceB972B25C",
                  "Outputs.TestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FRef"
                ]
              },
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherJobCreationLambdaCurrentVersion9A27FA14Version": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherIngestBatcherJobCreationLambdaCurrentVersion9A27FA14Version"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCRef": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestJobQueue349E97BCRef"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFArn": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFArn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitQueue4935D065Arn": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionCommitQueue4935D065Arn"
                ]
              },
              "referencetoTestInstancePoliciesNestedStackPoliciesNestedStackResourceD8B71FB2OutputsTestInstancePoliciesECSC2F932F2GroupId": {
                "Fn::GetAtt": [
                  "PoliciesNestedStackPoliciesNestedStackResource62C569F8",
                  "Outputs.TestInstancePoliciesECSC2F932F2GroupId"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsQueue40C89520Ref": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryQueryResultsQueue40C89520Ref"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitDLQ5632FB33Ref": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionCommitDLQ5632FB33Ref"
                ]
              },
              "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueueQueryDeadLetterQueue496F8592Ref": {
                "Fn::GetAtt": [
                  "QueryQueueNestedStackQueryQueueNestedStackResource093FA017",
                  "Outputs.TestInstanceQueryQueueQueryDeadLetterQueue496F8592Ref"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreatorFE525A06Ref": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionTasksCreatorFE525A06Ref"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956Arn": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Ref": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Ref"
                ]
              },
              "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionScheduleBC70F1ECRef": {
                "Fn::GetAtt": [
                  "TransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource81F69088",
                  "Outputs.TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionScheduleBC70F1ECRef"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationQueue04DB707FArn": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobCreationQueue04DB707FArn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreationPeriodicTrigger39ADC4A9Ref": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionTasksCreationPeriodicTrigger39ADC4A9Ref"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryQueue64615BA9Arn": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryLeafPartitionQueryQueue64615BA9Arn"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956Ref": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956Ref"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsBucket6975CD73Ref": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryQueryResultsBucket6975CD73Ref"
                ]
              },
              "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGarbageCollectorPeriodicTrigger26CF0C4ERef": {
                "Fn::GetAtt": [
                  "GarbageCollectorNestedStackGarbageCollectorNestedStackResource6471D6BF",
                  "Outputs.TestInstanceGarbageCollectorGarbageCollectorPeriodicTrigger26CF0C4ERef"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatestorecommitterCB6F35F0Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingstatestorecommitterCB6F35F0Ref"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestClusterA4B79DA6Ref": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestClusterA4B79DA6Ref"
                ]
              },
              "referencetoTestInstancePoliciesNestedStackPoliciesNestedStackResourceD8B71FB2OutputsTestInstancePoliciesIngestByQueueRoleC3D723FBArn": {
                "Fn::GetAtt": [
                  "PoliciesNestedStackPoliciesNestedStackResource62C569F8",
                  "Outputs.TestInstancePoliciesIngestByQueueRoleC3D723FBArn"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFRef": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFRef"
                ]
              },
              "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1Arn": {
                "Fn::GetAtt": [
                  "TableMetricsNestedStackTableMetricsNestedStackResource07C9A22F",
                  "Outputs.TestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionSchedule579388F9Ref": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionSchedule579388F9Ref"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationQueue04DB707FRef": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobCreationQueue04DB707FRef"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465Arn": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465Arn"
                ]
              },
              "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessEmrServerlessRole192390D8Arn": {
                "Fn::GetAtt": [
                  "BulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceB972B25C",
                  "Outputs.TestInstanceBulkImportEMRServerlessEmrServerlessRole192390D8Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DRef": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DRef"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157Arn": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Arn": {
                "Fn::GetAtt": [
                  "TransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource81F69088",
                  "Outputs.TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Ref": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Ref"
                ]
              },
              "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BARef": {
                "Fn::GetAtt": [
                  "BulkImportBucketNestedStackBulkImportBucketNestedStackResource59EDB97D",
                  "Outputs.TestInstanceBulkImportBucket58F540BARef"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FRef": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FRef"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitPeriodicTrigger6354C494Ref": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingFindPartitionsToSplitPeriodicTrigger6354C494Ref"
                ]
              },
              "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobQueueD56E334DRef": {
                "Fn::GetAtt": [
                  "GarbageCollectorNestedStackGarbageCollectorNestedStackResource6471D6BF",
                  "Outputs.TestInstanceGarbageCollectorGCJobQueueD56E334DRef"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922Ref": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922Ref"
                ]
              },
              "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsTriggerCurrentVersion65A885FBVersion": {
                "Fn::GetAtt": [
                  "TableMetricsNestedStackTableMetricsNestedStackResource07C9A22F",
                  "Outputs.TestInstanceTableMetricsMetricsTriggerCurrentVersion65A885FBVersion"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpropertieswriterC0FF2AE3Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingpropertieswriterC0FF2AE3Ref"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobsCreationTriggerC181F572Ref": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobsCreationTriggerC181F572Ref"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobsCreationTriggerCurrentVersion5E26F8A5Version": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobsCreationTriggerCurrentVersion5E26F8A5Version"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsQueue40C89520Arn": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryQueryResultsQueue40C89520Arn"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestTasksCreatorCurrentVersion7CB52F7CVersion": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestTasksCreatorCurrentVersion7CB52F7CVersion"
                ]
              },
              "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGarbageCollectorTriggerCurrentVersionAA3B84DDVersion": {
                "Fn::GetAtt": [
                  "GarbageCollectorNestedStackGarbageCollectorNestedStackResource6471D6BF",
                  "Outputs.TestInstanceGarbageCollectorGarbageCollectorTriggerCurrentVersionAA3B84DDVersion"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitQueue4935D065Ref": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionCommitQueue4935D065Ref"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchQCAC69541Arn": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionPendingCompactionJobBatchQCAC69541Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Arn": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Arn"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryQueue64615BA9Ref": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryLeafPartitionQueryQueue64615BA9Ref"
                ]
              },
              "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsPublishSchedule30F78292Ref": {
                "Fn::GetAtt": [
                  "TableMetricsNestedStackTableMetricsNestedStackResource07C9A22F",
                  "Outputs.TestInstanceTableMetricsMetricsPublishSchedule30F78292Ref"
                ]
              },
              "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsTrigger1B6EB004Ref": {
                "Fn::GetAtt": [
                  "TableMetricsNestedStackTableMetricsNestedStackResource07C9A22F",
                  "Outputs.TestInstanceTableMetricsMetricsTrigger1B6EB004Ref"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitTriggerLambda41F9A274Ref": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingFindPartitionsToSplitTriggerLambda41F9A274Ref"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528Arn": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528Arn"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestTasksCreator3E24B967Ref": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestTasksCreator3E24B967Ref"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922Arn": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922Arn"
                ]
              },
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherJobCreationLambda218123AERef": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherIngestBatcherJobCreationLambda218123AERef"
                ]
              },
              "referencetoTestInstancePoliciesNestedStackPoliciesNestedStackResourceD8B71FB2OutputsTestInstancePoliciesDirectIngestRole53BF6564Arn": {
                "Fn::GetAtt": [
                  "PoliciesNestedStackPoliciesNestedStackResource62C569F8",
                  "Outputs.TestInstancePoliciesDirectIngestRole53BF6564Arn"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Ref": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Ref"
                ]
              },
              "referencetoTestInstanceBulkImportEMRCommonNestedStackBulkImportEMRCommonNestedStackResource26CE6AACOutputsTestInstanceBulkImportEMRCommonEmrRoleCE2BA540Ref": {
                "Fn::GetAtt": [
                  "BulkImportEMRCommonNestedStackBulkImportEMRCommonNestedStackResourceBE3FC23B",
                  "Outputs.TestInstanceBulkImportEMRCommonEmrRoleCE2BA540Ref"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157Ref": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157Ref"
                ]
              },
              "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Ref": {
                "Fn::GetAtt": [
                  "TransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource81F69088",
                  "Outputs.TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Ref"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Arn": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Arn"
                ]
              },
              "referencetoTestInstanceBulkImportEMRCommonNestedStackBulkImportEMRCommonNestedStackResource26CE6AACOutputsTestInstanceBulkImportEMRCommonEc2Role5E4FFAE3Ref": {
                "Fn::GetAtt": [
                  "BulkImportEMRCommonNestedStackBulkImportEMRCommonNestedStackResourceBE3FC23B",
                  "Outputs.TestInstanceBulkImportEMRCommonEc2Role5E4FFAE3Ref"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DRef": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DRef"
                ]
              },
              "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1Ref": {
                "Fn::GetAtt": [
                  "TableMetricsNestedStackTableMetricsNestedStackResource07C9A22F",
                  "Outputs.TestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1Ref"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465Ref": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465Ref"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Arn": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Arn"
                ]
              },
              "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Ref": {
                "Fn::GetAtt": [
                  "QueryQueueNestedStackQueryQueueNestedStackResource093FA017",
                  "Outputs.TestInstanceQueryQueue61C01E76Ref"
                ]
              },
              "referencetoTestInstanceEmrStudioNestedStackEmrStudioNestedStackResource42F85517OutputsTestInstanceEmrStudioTestInstanceEmrStudio7355CF8DC8B80669Url": {
                "Fn::GetAtt": [
                  "EmrStudioNestedStackEmrStudioNestedStackResource1514A684",
                  "Outputs.TestInstanceEmrStudioTestInstanceEmrStudio7355CF8DC8B80669Url"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Properties"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "AutoStopEcsClusterTasksNestedStackAutoStopEcsClusterTasksNestedStackResource98C0EF32": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautostopecsclustertasksB7BE8EC2Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingautostopecsclustertasksB7BE8EC2Ref"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautostopecsclustertasksprovider6DABFE34Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingautostopecsclustertasksprovider6DABFE34Ref"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoStopEcsClusterTasks"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "PoliciesNestedStackPoliciesNestedStackResource62C569F8": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FArn": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FArn"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryTrackingTableD59EF8F3Arn": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryQueryTrackingTableD59EF8F3Arn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchQCAC69541Arn": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionPendingCompactionJobBatchQCAC69541Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotCreationTriggerCurrentVersion72902924Ref": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotCreationTriggerCurrentVersion72902924Ref"
                ]
              },
              "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGarbageCollectorTriggerCurrentVersionAA3B84DDRef": {
                "Fn::GetAtt": [
                  "GarbageCollectorNestedStackGarbageCollectorNestedStackResource6471D6BF",
                  "Outputs.TestInstanceGarbageCollectorGarbageCollectorTriggerCurrentVersionAA3B84DDRef"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Arn": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Arn"
                ]
              },
              "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
                "Fn::GetAtt": [
                  "TableDataNestedStackTableDataNestedStackResourceBB9D1CD9",
                  "Outputs.TestInstanceTableDataTableDataBucket68FE959DArn"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestTasksCreatorCurrentVersion7CB52F7CRef": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestTasksCreatorCurrentVersion7CB52F7CRef"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                ]
              },
              "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
                "Fn::GetAtt": [
                  "ConfigurationNestedStackConfigurationNestedStackResource573DEBA7",
                  "Outputs.TestInstanceConfigurationConfigBucket257D90F2Arn"
                ]
              },
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherDynamoDBIngestBatcherRequestsTableABCDB5F3Arn": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherDynamoDBIngestBatcherRequestsTableABCDB5F3Arn"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterCurrentVersionSqsEventSourceTestInstanceStateStoreCommitterStateStoreCommitterQueue33B0078EDD58441ARef": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterCurrentVersionSqsEventSourceTestInstanceStateStoreCommitterStateStoreCommitterQueue33B0078EDD58441ARef"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                ]
              },
              "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobQueueD56E334DArn": {
                "Fn::GetAtt": [
                  "GarbageCollectorNestedStackGarbageCollectorNestedStackResource6471D6BF",
                  "Outputs.TestInstanceGarbageCollectorGCJobQueueD56E334DArn"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                ]
              },
              "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionTaskStatusTable9E1002EFArn": {
                "Fn::GetAtt": [
                  "CompactionTrackerNestedStackCompactionTrackerNestedStackResource452C5BE7",
                  "Outputs.TestInstanceCompactionTrackerDynamoDBCompactionTaskStatusTable9E1002EFArn"
                ]
              },
              "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCArn": {
                "Fn::GetAtt": [
                  "IngestNestedStackIngestNestedStackResourceD6AFAC89",
                  "Outputs.TestInstanceIngestIngestJobQueue349E97BCArn"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Arn": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionTriggerCurrentVersionEB512F8DRef": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionTriggerCurrentVersionEB512F8DRef"
                ]
              },
              "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
                "Fn::GetAtt": [
                  "StateStoreCommitterNestedStackStateStoreCommitterNestedStackResource0A97A9D2",
                  "Outputs.TestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsBucket6975CD73Arn": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryQueryResultsBucket6975CD73Arn"
                ]
              },
              "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn": {
                "Fn::GetAtt": [
                  "BulkImportBucketNestedStackBulkImportBucketNestedStackResource59EDB97D",
                  "Outputs.TestInstanceBulkImportBucket58F540BAArn"
                ]
              },
              "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Arn": {
                "Fn::GetAtt": [
                  "QueryQueueNestedStackQueryQueueNestedStackResource093FA017",
                  "Outputs.TestInstanceQueryQueue61C01E76Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Arn": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceD16A5FCE",
                  "Outputs.TestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Arn"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Arn": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Arn"
                ]
              },
              "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsTriggerCurrentVersion65A885FBRef": {
                "Fn::GetAtt": [
                  "TableMetricsNestedStackTableMetricsNestedStackResource07C9A22F",
                  "Outputs.TestInstanceTableMetricsMetricsTriggerCurrentVersion65A885FBRef"
                ]
              },
              "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitTriggerLambdaCurrentVersionD6930CA9Ref": {
                "Fn::GetAtt": [
                  "PartitionSplittingNestedStackPartitionSplittingNestedStackResource67512590",
                  "Outputs.TestInstancePartitionSplittingFindPartitionsToSplitTriggerLambdaCurrentVersionD6930CA9Ref"
                ]
              },
              "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherJobCreationLambdaCurrentVersion9A27FA14Ref": {
                "Fn::GetAtt": [
                  "IngestBatcherNestedStackIngestBatcherNestedStackResource7DE08FC6",
                  "Outputs.TestInstanceIngestBatcherIngestBatcherJobCreationLambdaCurrentVersion9A27FA14Ref"
                ]
              },
              "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn": {
                "Fn::GetAtt": [
                  "BulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceB972B25C",
                  "Outputs.TestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn"
                ]
              },
              "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionTriggerCurrentVersion5F5C5690Ref": {
                "Fn::GetAtt": [
                  "TransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource81F69088",
                  "Outputs.TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionTriggerCurrentVersion5F5C5690Ref"
                ]
              },
              "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Arn": {
                "Fn::GetAtt": [
                  "TransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource81F69088",
                  "Outputs.TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Arn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitQueue4935D065Arn": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionCommitQueue4935D065Arn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreatorCurrentVersion57E78EC7Ref": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionTasksCreatorCurrentVersion57E78EC7Ref"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Arn": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Arn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                ]
              },
              "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn": {
                "Fn::GetAtt": [
                  "CompactionTrackerNestedStackCompactionTrackerNestedStackResource452C5BE7",
                  "Outputs.TestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn"
                ]
              },
              "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn": {
                "Fn::GetAtt": [
                  "CompactionTrackerNestedStackCompactionTrackerNestedStackResource452C5BE7",
                  "Outputs.TestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                ]
              },
              "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn": {
                "Fn::GetAtt": [
                  "IngestTrackerNestedStackIngestTrackerNestedStackResource0E98AC78",
                  "Outputs.TestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn"
                ]
              },
              "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
                "Fn::GetAtt": [
                  "TableIndexNestedStackTableIndexNestedStackResource55615825",
                  "Outputs.TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                ]
              },
              "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobQueue5B390950Arn": {
                "Fn::GetAtt": [
                  "TableMetricsNestedStackTableMetricsNestedStackResource07C9A22F",
                  "Outputs.TestInstanceTableMetricsMetricsJobQueue5B390950Arn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationQueue04DB707FArn": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobCreationQueue04DB707FArn"
                ]
              },
              "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
                "Fn::GetAtt": [
                  "TransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource8969808F",
                  "Outputs.TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                ]
              },
              "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsQueue40C89520Arn": {
                "Fn::GetAtt": [
                  "QueryNestedStackQueryNestedStackResource4085691D",
                  "Outputs.TestInstanceQueryQueryResultsQueue40C89520Arn"
                ]
              },
              "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobsCreationTriggerCurrentVersion5E26F8A5Ref": {
                "Fn::GetAtt": [
                  "CompactionNestedStackCompactionNestedStackResourceB3AC5D6A",
                  "Outputs.TestInstanceCompactionCompactionJobsCreationTriggerCurrentVersion5E26F8A5Ref"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatestorecommitterCB6F35F0Arn": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingstatestorecommitterCB6F35F0Arn"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Policies"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "AutoStopEmrServerlessApplicationNestedStackAutoStopEmrServerlessApplicationNestedStackResource26009A0C": {
          "Type": "AWS::CloudFormation::Stack",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TemplateURL": "removed-for-test",
            "Parameters": {
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautostopemrserverlessproviderE1BCC092Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingautostopemrserverlessproviderE1BCC092Ref"
                ]
              },
              "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautostopemrserverless077CD512Ref": {
                "Fn::GetAtt": [
                  "LoggingNestedStackLoggingNestedStackResourceBF8F7D28",
                  "Outputs.TestInstanceLoggingautostopemrserverless077CD512Ref"
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoStopEmrServerlessApplication"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      },
      "Rules": {
        "CheckBootstrapVersion": {
          "Assertions": [
            {
              "Assert": {
                "Fn::Not": [
                  {
                    "Fn::Contains": [
                      [
                        "1",
                        "2",
                        "3",
                        "4",
                        "5"
                      ],
                      {
                        "Ref": "BootstrapVersion"
                      }
                    ]
                  }
                ]
              },
              "AssertDescription": "CDK bootstrap stack version 6 required. Please run \u0027cdk bootstrap\u0027 with a recent version of the CDK CLI."
            }
          ]
        }
      }
    },
    "Logging": {
      "Outputs": {
        "TestInstanceLoggingcompactionjobdispatcher0ECCFF5ERef": {
          "Value": {
            "Ref": "compactionjobdispatcher69528F2F"
          }
        },
        "TestInstanceLoggingIngestTasks98782505Ref": {
          "Value": {
            "Ref": "IngestTasks534A92CA"
          }
        },
        "TestInstanceLoggingstatesnapshotdeletionD39358EFRef": {
          "Value": {
            "Ref": "statesnapshotdeletion1B65D1E1"
          }
        },
        "TestInstanceLoggingstatetransactiondeletion6C3C26FERef": {
          "Value": {
            "Ref": "statetransactiondeletion103BE2C5"
          }
        },
        "TestInstanceLogginggarbagecollector6DFCBB5ERef": {
          "Value": {
            "Ref": "garbagecollector6811DA7A"
          }
        },
        "TestInstanceLoggingstatestorecommitterCB6F35F0Ref": {
          "Value": {
            "Ref": "statestorecommitter30FE6C5B"
          }
        },
        "TestInstanceLoggingautostopecsclustertasksprovider6DABFE34Ref": {
          "Value": {
            "Ref": "autostopecsclustertasksproviderE6EF3690"
          }
        },
        "TestInstanceLoggingautostopemrserverless077CD512Ref": {
          "Value": {
            "Ref": "autostopemrserverless5D91AD47"
          }
        },
        "TestInstanceLogginggarbagecollectortrigger27E59B36Ref": {
          "Value": {
            "Ref": "garbagecollectortriggerE916FCCF"
          }
        },
        "TestInstanceLoggingmetricspublisher9BCF87A3Ref": {
          "Value": {
            "Ref": "metricspublisher3BBA1804"
          }
        },
        "TestInstanceLoggingautostopecsclustertasksB7BE8EC2Ref": {
          "Value": {
            "Ref": "autostopecsclustertasks0E1ACADF"
          }
        },
        "TestInstanceLoggingpartitionsplittingfindtosplit469D578DRef": {
          "Value": {
            "Ref": "partitionsplittingfindtosplit360D4258"
          }
        },
        "TestInstanceLoggingqueryleafpartition81D7EEE1Ref": {
          "Value": {
            "Ref": "queryleafpartition1578E157"
          }
        },
        "TestInstanceLoggingpartitionsplittingtrigger4A1B8250Ref": {
          "Value": {
            "Ref": "partitionsplittingtrigger643F1AC9"
          }
        },
        "TestInstanceLoggingingestbatchersubmitfiles70C40CB8Ref": {
          "Value": {
            "Ref": "ingestbatchersubmitfiles36085FD4"
          }
        },
        "TestInstanceLoggingstatetransactiondeletiontriggerF4654DC9Ref": {
          "Value": {
            "Ref": "statetransactiondeletiontrigger2C17884E"
          }
        },
        "TestInstanceLoggingcompactioncommitbatcherC6D633F8Ref": {
          "Value": {
            "Ref": "compactioncommitbatcherA0C3F222"
          }
        },
        "TestInstanceLoggingpartitionsplittinghandlerD89FB7CDRef": {
          "Value": {
            "Ref": "partitionsplittinghandler1B821F8F"
          }
        },
        "TestInstanceLoggingbulkimportEMRServerlessstart5F08C53BRef": {
          "Value": {
            "Ref": "bulkimportEMRServerlessstartD8228E87"
          }
        },
        "TestInstanceLoggingpropertieswriterprovider89DFF902Ref": {
          "Value": {
            "Ref": "propertieswriterproviderEB9514F4"
          }
        },
        "TestInstanceLoggingingestbatchercreatejobs490152C0Ref": {
          "Value": {
            "Ref": "ingestbatchercreatejobs2FB73B9F"
          }
        },
        "TestInstanceLoggingcompactionjobcreationhandlerDB342042Ref": {
          "Value": {
            "Ref": "compactionjobcreationhandler9AF30E88"
          }
        },
        "TestInstanceLoggingautodeletes3objectsprovider5CD6DC03Ref": {
          "Value": {
            "Ref": "autodeletes3objectsproviderFBB60680"
          }
        },
        "TestInstanceLoggingingestcreatetasksC7172C2BRef": {
          "Value": {
            "Ref": "ingestcreatetasks1BDA4902"
          }
        },
        "TestInstanceLoggingFargateCompactionTasksCCB274EARef": {
          "Value": {
            "Ref": "FargateCompactionTasksBE3CEE8A"
          }
        },
        "TestInstanceLoggingcompactiontaskscreatorB668B31ARef": {
          "Value": {
            "Ref": "compactiontaskscreator49AB98C5"
          }
        },
        "TestInstanceLoggingstatesnapshotcreationtriggerC988CCD4Ref": {
          "Value": {
            "Ref": "statesnapshotcreationtriggerF1B2F725"
          }
        },
        "TestInstanceLoggingvpccheckprovider575D60E1Ref": {
          "Value": {
            "Ref": "vpccheckprovider90DDB7B7"
          }
        },
        "TestInstanceLoggingstatestorecommitterCB6F35F0Arn": {
          "Value": {
            "Fn::GetAtt": [
              "statestorecommitter30FE6C5B",
              "Arn"
            ]
          }
        },
        "TestInstanceLoggingstatesnapshotdeletiontrigger212475A9Ref": {
          "Value": {
            "Ref": "statesnapshotdeletiontrigger530F2E17"
          }
        },
        "TestInstanceLoggingautodeletes3objectsBB7CB874Ref": {
          "Value": {
            "Ref": "autodeletes3objects12690525"
          }
        },
        "TestInstanceLoggingqueryexecutorE6E0DC1DRef": {
          "Value": {
            "Ref": "queryexecutor2F9ADA64"
          }
        },
        "TestInstanceLoggingcompactionjobcreationtrigger5B1465ADRef": {
          "Value": {
            "Ref": "compactionjobcreationtrigger1D91D3DF"
          }
        },
        "TestInstanceLoggingmetricstrigger73B1BF98Ref": {
          "Value": {
            "Ref": "metricstrigger28CF8B4E"
          }
        },
        "TestInstanceLoggingFargateCompactionTasksCCB274EAArn": {
          "Value": {
            "Fn::GetAtt": [
              "FargateCompactionTasksBE3CEE8A",
              "Arn"
            ]
          }
        },
        "TestInstanceLoggingautostopemrserverlessproviderE1BCC092Ref": {
          "Value": {
            "Ref": "autostopemrserverlessproviderBD3B8437"
          }
        },
        "TestInstanceLoggingstatesnapshotcreation859603B7Ref": {
          "Value": {
            "Ref": "statesnapshotcreation91FC7C75"
          }
        },
        "TestInstanceLoggingpropertieswriterC0FF2AE3Ref": {
          "Value": {
            "Ref": "propertieswriterA45719C7"
          }
        },
        "TestInstanceLoggingstatetransactionfollower654BC5E7Ref": {
          "Value": {
            "Ref": "statetransactionfollower963FEA58"
          }
        },
        "TestInstanceLoggingIngestTasks98782505Arn": {
          "Value": {
            "Fn::GetAtt": [
              "IngestTasks534A92CA",
              "Arn"
            ]
          }
        },
        "TestInstanceLoggingvpccheck75B1AA4CRef": {
          "Value": {
            "Ref": "vpccheck00A59E42"
          }
        }
      },
      "Resources": {
        "compactionjobcreationtrigger1D91D3DF": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-compaction-job-creation-trigger",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "queryexecutor2F9ADA64": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-query-executor",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "bulkimporteksstarterE7F97994": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-bulk-import-eks-starter",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "statesnapshotcreation91FC7C75": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-state-snapshot-creation",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "bulkimportNonPersistentEMRstart4DABFB3A": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-bulk-import-NonPersistentEMR-start",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "autostopemrserverless5D91AD47": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-auto-stop-emr-serverless",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "FargateCompactionTasksBE3CEE8A": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-FargateCompactionTasks",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "statesnapshotdeletion1B65D1E1": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-state-snapshot-deletion",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "propertieswriterproviderEB9514F4": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-properties-writer-provider",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "partitionsplittinghandler1B821F8F": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-partition-splitting-handler",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "querywebsockethandlerF25883F9": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-query-websocket-handler",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "vpccheck00A59E42": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-vpc-check",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "compactioncommitbatcherA0C3F222": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-compaction-commit-batcher",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "tabledefiner1B009C7F": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-table-definer",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "querykeepwarm130FBF6F": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-query-keep-warm",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "ingestbatchersubmitfiles36085FD4": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-ingest-batcher-submit-files",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "garbagecollector6811DA7A": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-garbage-collector",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "vpccheckprovider90DDB7B7": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-vpc-check-provider",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "compactiontaskscreator49AB98C5": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-compaction-tasks-creator",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "partitionsplittingtrigger643F1AC9": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-partition-splitting-trigger",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IteratorApplyingathenahandler386594FD": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-IteratorApplying-athena-handler",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "autostopecsclustertasks0E1ACADF": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-auto-stop-ecs-cluster-tasks",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "garbagecollectortriggerE916FCCF": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-garbage-collector-trigger",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "autostopecsclustertasksproviderE6EF3690": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-auto-stop-ecs-cluster-tasks-provider",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "ingestcreatetasks1BDA4902": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-ingest-create-tasks",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "statetransactionfollower963FEA58": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-state-transaction-follower",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "compactionjobcreationhandler9AF30E88": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-compaction-job-creation-handler",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "metricspublisher3BBA1804": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-metrics-publisher",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "autodeletes3objects12690525": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-auto-delete-s3-objects",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "bulkimportPersistentEMRstart64C1297A": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-bulk-import-PersistentEMR-start",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "compactionjobdispatcher69528F2F": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-compaction-job-dispatcher",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "compactioncustomtermination0F0AC2BB": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-compaction-custom-termination",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "partitionsplittingfindtosplit360D4258": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-partition-splitting-find-to-split",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "metricstrigger28CF8B4E": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-metrics-trigger",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "queryleafpartition1578E157": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-query-leaf-partition",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestTasks534A92CA": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-IngestTasks",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "statetransactiondeletion103BE2C5": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-state-transaction-deletion",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "statesnapshotcreationtriggerF1B2F725": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-state-snapshot-creation-trigger",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "bulkexporttaskcreatorB880DEE3": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-bulk-export-task-creator",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "statestorecommitter30FE6C5B": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-statestore-committer",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "Simpleathenahandler8B8139D8": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-Simple-athena-handler",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "statetransactiondeletiontrigger2C17884E": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-state-transaction-deletion-trigger",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "bulkimportEMRServerlessstartD8228E87": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-bulk-import-EMRServerless-start",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "bulkexport1C9790F1": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-bulk-export",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "autostopemrserverlessproviderBD3B8437": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-auto-stop-emr-serverless-provider",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "EksBulkImportStateMachineE0D868D1": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "/aws/vendedlogs/states/sleeper-test-instance-EksBulkImportStateMachine",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "FargateBulkExportTasks4B026EF7": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-FargateBulkExportTasks",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "autodeletes3objectsproviderFBB60680": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-auto-delete-s3-objects-provider",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "tabledefinerprovider41F0A6E3": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-table-definer-provider",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "ingestbatchercreatejobs2FB73B9F": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-ingest-batcher-create-jobs",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "bulkimporteks4A330953": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-bulk-import-eks",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "propertieswriterA45719C7": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-properties-writer",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "statesnapshotdeletiontrigger530F2E17": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-state-snapshot-deletion-trigger",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "EC2CompactionTasks7088FA7C": {
          "Type": "AWS::Logs::LogGroup",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "RetentionInDays": 30,
            "LogGroupName": "sleeper-test-instance-EC2CompactionTasks",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Logging"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "AutoDeleteS3Objects": {
      "Parameters": {
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautodeletes3objectsBB7CB874Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautodeletes3objectsprovider5CD6DC03Ref": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceAutoDeleteS3ObjectsProviderframeworkonEventA39C1CF4Arn": {
          "Value": {
            "Fn::GetAtt": [
              "ProviderframeworkonEvent83C1D0A7",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "LambdaServiceRoleDefaultPolicyDAE46E21": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "LambdaServiceRoleDefaultPolicyDAE46E21",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:ListBucketVersions",
                    "s3:DeleteObject",
                    "s3:DeleteObjectVersion"
                  ],
                  "Effect": "Allow",
                  "Resource": "*"
                }
              ]
            },
            "Roles": [
              {
                "Ref": "LambdaServiceRoleA8ED4D3B"
              }
            ]
          }
        },
        "LambdaServiceRoleA8ED4D3B": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoDeleteS3Objects"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "ProviderframeworkonEventServiceRoleDefaultPolicy48CD2133": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "ProviderframeworkonEventServiceRoleDefaultPolicy48CD2133",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "LambdaCurrentVersionDF706F6Ad49351b5e88a11a7f10ac7e287eb1464"
                  }
                },
                {
                  "Action": "lambda:GetFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "LambdaCurrentVersionDF706F6Ad49351b5e88a11a7f10ac7e287eb1464"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "ProviderframeworkonEventServiceRole9FF04296"
              }
            ]
          }
        },
        "ProviderframeworkonEventServiceRole9FF04296": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoDeleteS3Objects"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "LambdaD247545B": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "LambdaServiceRoleDefaultPolicyDAE46E21",
            "LambdaServiceRoleA8ED4D3B"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "LambdaServiceRoleA8ED4D3B",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-auto-delete-s3-objects",
            "MemorySize": 2048,
            "Runtime": "java17",
            "Description": "Lambda for auto-deleting S3 objects",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautodeletes3objectsBB7CB874Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED"
              }
            },
            "Handler": "sleeper.cdk.custom.AutoDeleteS3ObjectsLambda::handleEvent",
            "Code": {
              "S3ObjectVersion": "cdk-custom-resources-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "cdk-custom-resources-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoDeleteS3Objects"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "LambdaCurrentVersionDF706F6Ad49351b5e88a11a7f10ac7e287eb1464": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "LambdaD247545B"
            }
          }
        },
        "ProviderframeworkonEvent83C1D0A7": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "ProviderframeworkonEventServiceRoleDefaultPolicy48CD2133",
            "ProviderframeworkonEventServiceRole9FF04296"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "ProviderframeworkonEventServiceRole9FF04296",
                "Arn"
              ]
            },
            "Runtime": "nodejs22.x",
            "Description": "AWS CDK resource provider framework - onEvent (TestInstance/AutoDeleteS3Objects/Provider)",
            "Timeout": 900,
            "LoggingConfig": {
              "LogFormat": "JSON",
              "ApplicationLogLevel": "FATAL",
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautodeletes3objectsprovider5CD6DC03Ref"
              }
            },
            "Environment": {
              "Variables": {
                "USER_ON_EVENT_FUNCTION_ARN": {
                  "Ref": "LambdaCurrentVersionDF706F6Ad49351b5e88a11a7f10ac7e287eb1464"
                }
              }
            },
            "Handler": "framework.onEvent",
            "Code": {
              "S3Bucket": "cdk-hnb659fds-assets-test-account-test-region",
              "S3Key": "07a90cc3efdfc34da22208dcd9d211f06f5b0e01b21e778edc7c3966b1f61d57.zip"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoDeleteS3Objects"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "Vpc": {
      "Parameters": {
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingvpccheck75B1AA4CRef": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingvpccheckprovider575D60E1Ref": {
          "Type": "String"
        }
      },
      "Resources": {
        "VpcCheck": {
          "Type": "Custom::VpcCheck",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "ServiceToken": {
              "Fn::GetAtt": [
                "VpcCustomResourceProviderframeworkonEventA10A7F3E",
                "Arn"
              ]
            },
            "vpcId": "vpc-12345",
            "region": "test-region"
          }
        },
        "VpcCheckLambdaCurrentVersion75EDC33F9f3d52b8edaffc3583d80bf807ffedcd": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "VpcCheckLambda1278DA75"
            }
          }
        },
        "VpcCheckLambdaServiceRoleAFA352A3": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Vpc"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "VpcCheckLambdaServiceRoleDefaultPolicy7CE76C86": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "VpcCheckLambdaServiceRoleDefaultPolicy7CE76C86",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "ec2:DescribeVpcEndpoints",
                  "Effect": "Allow",
                  "Resource": "*"
                }
              ]
            },
            "Roles": [
              {
                "Ref": "VpcCheckLambdaServiceRoleAFA352A3"
              }
            ]
          }
        },
        "VpcCustomResourceProviderframeworkonEventA10A7F3E": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "VpcCustomResourceProviderframeworkonEventServiceRoleDefaultPolicyB3561E00",
            "VpcCustomResourceProviderframeworkonEventServiceRoleD714E590"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "VpcCustomResourceProviderframeworkonEventServiceRoleD714E590",
                "Arn"
              ]
            },
            "Runtime": "nodejs22.x",
            "Description": "AWS CDK resource provider framework - onEvent (TestInstance/Vpc/VpcCustomResourceProvider)",
            "Timeout": 900,
            "LoggingConfig": {
              "LogFormat": "JSON",
              "ApplicationLogLevel": "FATAL",
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingvpccheckprovider575D60E1Ref"
              }
            },
            "Environment": {
              "Variables": {
                "USER_ON_EVENT_FUNCTION_ARN": {
                  "Ref": "VpcCheckLambdaCurrentVersion75EDC33F9f3d52b8edaffc3583d80bf807ffedcd"
                }
              }
            },
            "Handler": "framework.onEvent",
            "Code": {
              "S3Bucket": "cdk-hnb659fds-assets-test-account-test-region",
              "S3Key": "07a90cc3efdfc34da22208dcd9d211f06f5b0e01b21e778edc7c3966b1f61d57.zip"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Vpc"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "VpcCustomResourceProviderframeworkonEventServiceRoleD714E590": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Vpc"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "VpcCheckLambda1278DA75": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "VpcCheckLambdaServiceRoleDefaultPolicy7CE76C86",
            "VpcCheckLambdaServiceRoleAFA352A3"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "VpcCheckLambdaServiceRoleAFA352A3",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-vpc-check",
            "MemorySize": 2048,
            "Runtime": "java17",
            "Description": "Lambda for checking the VPC has an associated S3 endpoint",
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingvpccheck75B1AA4CRef"
              }
            },
            "Handler": "sleeper.cdk.custom.VpcCheckLambda::handleEvent",
            "Code": {
              "S3ObjectVersion": "cdk-custom-resources-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "cdk-custom-resources-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Vpc"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "VpcCustomResourceProviderframeworkonEventServiceRoleDefaultPolicyB3561E00": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "VpcCustomResourceProviderframeworkonEventServiceRoleDefaultPolicyB3561E00",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "VpcCheckLambdaCurrentVersion75EDC33F9f3d52b8edaffc3583d80bf807ffedcd"
                  }
                },
                {
                  "Action": "lambda:GetFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "VpcCheckLambdaCurrentVersion75EDC33F9f3d52b8edaffc3583d80bf807ffedcd"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "VpcCustomResourceProviderframeworkonEventServiceRoleD714E590"
              }
            ]
          }
        }
      }
    },
    "Topic": {
      "Outputs": {
        "TestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Value": {
            "Ref": "ErrorsTopic883A7A9F"
          }
        }
      },
      "Resources": {
        "ErrorsTopic883A7A9F": {
          "Type": "AWS::SNS::Topic",
          "Properties": {
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Topic"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "TopicName": "sleeper-test-instance-ErrorsTopic"
          }
        }
      }
    },
    "AutoStopEcsClusterTasks": {
      "Parameters": {
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautostopecsclustertasksB7BE8EC2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautostopecsclustertasksprovider6DABFE34Ref": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceAutoStopEcsClusterTasksProviderframeworkonEvent8CDD6C7CArn": {
          "Value": {
            "Fn::GetAtt": [
              "ProviderframeworkonEvent83C1D0A7",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "LambdaServiceRoleDefaultPolicyDAE46E21": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "LambdaServiceRoleDefaultPolicyDAE46E21",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "ecs:ListTasks",
                    "ecs:StopTask"
                  ],
                  "Effect": "Allow",
                  "Resource": "*"
                }
              ]
            },
            "Roles": [
              {
                "Ref": "LambdaServiceRoleA8ED4D3B"
              }
            ]
          }
        },
        "LambdaCurrentVersionDF706F6A217a5c10d8c2c7270f65bf3ffd4be9e4": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "LambdaD247545B"
            }
          }
        },
        "LambdaServiceRoleA8ED4D3B": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoStopEcsClusterTasks"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "ProviderframeworkonEventServiceRoleDefaultPolicy48CD2133": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "ProviderframeworkonEventServiceRoleDefaultPolicy48CD2133",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "LambdaCurrentVersionDF706F6A217a5c10d8c2c7270f65bf3ffd4be9e4"
                  }
                },
                {
                  "Action": "lambda:GetFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "LambdaCurrentVersionDF706F6A217a5c10d8c2c7270f65bf3ffd4be9e4"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "ProviderframeworkonEventServiceRole9FF04296"
              }
            ]
          }
        },
        "ProviderframeworkonEventServiceRole9FF04296": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoStopEcsClusterTasks"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "LambdaD247545B": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "LambdaServiceRoleDefaultPolicyDAE46E21",
            "LambdaServiceRoleA8ED4D3B"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "LambdaServiceRoleA8ED4D3B",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-auto-stop-ecs-cluster-tasks",
            "MemorySize": 2048,
            "Runtime": "java17",
            "Description": "Lambda for auto-stopping ECS tasks",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautostopecsclustertasksB7BE8EC2Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED"
              }
            },
            "Handler": "sleeper.cdk.custom.AutoStopEcsClusterTasksLambda::handleEvent",
            "Code": {
              "S3ObjectVersion": "cdk-custom-resources-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "cdk-custom-resources-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoStopEcsClusterTasks"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "ProviderframeworkonEvent83C1D0A7": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "ProviderframeworkonEventServiceRoleDefaultPolicy48CD2133",
            "ProviderframeworkonEventServiceRole9FF04296"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "ProviderframeworkonEventServiceRole9FF04296",
                "Arn"
              ]
            },
            "Runtime": "nodejs22.x",
            "Description": "AWS CDK resource provider framework - onEvent (TestInstance/AutoStopEcsClusterTasks/Provider)",
            "Timeout": 900,
            "LoggingConfig": {
              "LogFormat": "JSON",
              "ApplicationLogLevel": "FATAL",
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautostopecsclustertasksprovider6DABFE34Ref"
              }
            },
            "Environment": {
              "Variables": {
                "USER_ON_EVENT_FUNCTION_ARN": {
                  "Ref": "LambdaCurrentVersionDF706F6A217a5c10d8c2c7270f65bf3ffd4be9e4"
                }
              }
            },
            "Handler": "framework.onEvent",
            "Code": {
              "S3Bucket": "cdk-hnb659fds-assets-test-account-test-region",
              "S3Key": "07a90cc3efdfc34da22208dcd9d211f06f5b0e01b21e778edc7c3966b1f61d57.zip"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoStopEcsClusterTasks"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "Policies": {
      "Parameters": {
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryTrackingTableD59EF8F3Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchQCAC69541Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotCreationTriggerCurrentVersion72902924Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGarbageCollectorTriggerCurrentVersionAA3B84DDRef": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestTasksCreatorCurrentVersion7CB52F7CRef": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherDynamoDBIngestBatcherRequestsTableABCDB5F3Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterCurrentVersionSqsEventSourceTestInstanceStateStoreCommitterStateStoreCommitterQueue33B0078EDD58441ARef": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobQueueD56E334DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionTaskStatusTable9E1002EFArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCArn": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionTriggerCurrentVersionEB512F8DRef": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsBucket6975CD73Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Arn": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsTriggerCurrentVersion65A885FBRef": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitTriggerLambdaCurrentVersionD6930CA9Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherJobCreationLambdaCurrentVersion9A27FA14Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionTriggerCurrentVersion5F5C5690Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitQueue4935D065Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreatorCurrentVersion57E78EC7Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobQueue5B390950Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationQueue04DB707FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsQueue40C89520Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobsCreationTriggerCurrentVersion5E26F8A5Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatestorecommitterCB6F35F0Arn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstancePoliciesECSC2F932F2GroupId": {
          "Value": {
            "Fn::GetAtt": [
              "ECSD299DF54",
              "GroupId"
            ]
          }
        },
        "TestInstancePoliciesAdminRole0994A69EArn": {
          "Value": {
            "Fn::GetAtt": [
              "AdminRole38563C57",
              "Arn"
            ]
          }
        },
        "TestInstancePoliciesIngestByQueueRoleC3D723FBArn": {
          "Value": {
            "Fn::GetAtt": [
              "IngestByQueueRole165F6574",
              "Arn"
            ]
          }
        },
        "TestInstancePoliciesDirectIngestRole53BF6564Arn": {
          "Value": {
            "Fn::GetAtt": [
              "DirectIngestRoleF53DB849",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "DirectIngestFD813473": {
          "Type": "AWS::IAM::ManagedPolicy",
          "Properties": {
            "ManagedPolicyName": "sleeper-test-instance-DirectIngest",
            "Path": "/",
            "Description": "",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                          },
                          "/index/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "AdminRole38563C57"
              },
              {
                "Ref": "DirectIngestRoleF53DB849"
              }
            ]
          }
        },
        "AdminC75D2A91": {
          "Type": "AWS::IAM::ManagedPolicy",
          "Properties": {
            "ManagedPolicyName": "sleeper-test-instance-Admin",
            "Path": "/",
            "Description": "",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:PurgeQueue",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  }
                },
                {
                  "Action": "lambda:GetEventSourceMapping",
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        "arn:",
                        {
                          "Ref": "AWS::Partition"
                        },
                        ":lambda:test-region:test-account:event-source-mapping:",
                        {
                          "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterCurrentVersionSqsEventSourceTestInstanceStateStoreCommitterStateStoreCommitterQueue33B0078EDD58441ARef"
                        }
                      ]
                    ]
                  }
                },
                {
                  "Action": "lambda:UpdateEventSourceMapping",
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        "arn:",
                        {
                          "Ref": "AWS::Partition"
                        },
                        ":lambda:test-region:test-account:event-source-mapping:",
                        {
                          "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterCurrentVersionSqsEventSourceTestInstanceStateStoreCommitterStateStoreCommitterQueue33B0078EDD58441ARef"
                        }
                      ]
                    ]
                  }
                },
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotCreationTriggerCurrentVersion72902924Ref"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Arn"
                  }
                },
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionTriggerCurrentVersionEB512F8DRef"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Arn"
                  }
                },
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionTriggerCurrentVersion5F5C5690Ref"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Arn"
                  }
                },
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsTriggerCurrentVersion65A885FBRef"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobQueue5B390950Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:PurgeQueue",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn"
                  }
                },
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGarbageCollectorTriggerCurrentVersionAA3B84DDRef"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobQueueD56E334DArn"
                  }
                },
                {
                  "Action": [
                    "sqs:PurgeQueue",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchQCAC69541Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:PurgeQueue",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitQueue4935D065Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:PurgeQueue",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:PurgeQueue",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationQueue04DB707FArn"
                  }
                },
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobsCreationTriggerCurrentVersion5E26F8A5Ref"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationQueue04DB707FArn"
                  }
                },
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreatorCurrentVersion57E78EC7Ref"
                  }
                },
                {
                  "Action": [
                    "sqs:PurgeQueue",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Arn"
                  }
                },
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitTriggerLambdaCurrentVersionD6930CA9Ref"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:PurgeQueue",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:PurgeQueue",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCArn"
                  }
                },
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestTasksCreatorCurrentVersion7CB52F7CRef"
                  }
                },
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherJobCreationLambdaCurrentVersion9A27FA14Ref"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "AdminRole38563C57"
              }
            ]
          }
        },
        "IngestByQueueFDD772E5": {
          "Type": "AWS::IAM::ManagedPolicy",
          "Properties": {
            "ManagedPolicyName": "sleeper-test-instance-IngestByQueue",
            "Path": "/",
            "Description": "",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCArn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherDynamoDBIngestBatcherRequestsTableABCDB5F3Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherDynamoDBIngestBatcherRequestsTableABCDB5F3Arn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "AdminRole38563C57"
              },
              {
                "Ref": "IngestByQueueRole165F6574"
              }
            ]
          }
        },
        "EditTables31E0C458": {
          "Type": "AWS::IAM::ManagedPolicy",
          "Properties": {
            "ManagedPolicyName": "sleeper-test-instance-EditTables",
            "Path": "/",
            "Description": "",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "AdminRole38563C57"
              }
            ]
          }
        },
        "IngestByQueueRole165F6574": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "RoleName": "sleeper-ingest-by-queue-test-instance",
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "AWS": {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":iam::test-account:root"
                        ]
                      ]
                    }
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Policies"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "ClearInstanceE5727330": {
          "Type": "AWS::IAM::ManagedPolicy",
          "Properties": {
            "ManagedPolicyName": "sleeper-test-instance-ClearInstance",
            "Path": "/",
            "Description": "",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": "s3:DeleteObject*",
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        {
                          "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                        },
                        "/*"
                      ]
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": "s3:DeleteObject*",
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        {
                          "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                        },
                        "/*"
                      ]
                    ]
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "AdminRole38563C57"
              }
            ]
          }
        },
        "DirectIngestRoleF53DB849": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "RoleName": "sleeper-ingest-direct-test-instance",
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "AWS": {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":iam::test-account:root"
                        ]
                      ]
                    }
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Policies"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "Query435140A1": {
          "Type": "AWS::IAM::ManagedPolicy",
          "Properties": {
            "ManagedPolicyName": "sleeper-test-instance-Query",
            "Path": "/",
            "Description": "",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsQueue40C89520Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsBucket6975CD73Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsBucket6975CD73Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryTrackingTableD59EF8F3Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryTrackingTableD59EF8F3Arn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "AdminRole38563C57"
              }
            ]
          }
        },
        "AdminRole38563C57": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
                  ]
                ]
              }
            ],
            "RoleName": "sleeper-admin-test-instance",
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "AWS": {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":iam::test-account:root"
                        ]
                      ]
                    }
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Policies"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "Reporting8B9C339B": {
          "Type": "AWS::IAM::ManagedPolicy",
          "Properties": {
            "ManagedPolicyName": "sleeper-test-instance-Reporting",
            "Path": "/",
            "Description": "",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                          },
                          "/index/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                          },
                          "/index/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionTaskStatusTable9E1002EFArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionTaskStatusTable9E1002EFArn"
                  }
                },
                {
                  "Action": [
                    "logs:FilterLogEvents",
                    "logs:GetLogEvents",
                    "logs:GetLogGroupFields",
                    "logs:DescribeLogGroups",
                    "logs:DescribeLogStreams"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatestorecommitterCB6F35F0Arn"
                  }
                },
                {
                  "Action": [
                    "logs:StartQuery",
                    "logs:GetQueryResults"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatestorecommitterCB6F35F0Arn"
                  }
                },
                {
                  "Action": "cloudwatch:GetMetricData",
                  "Effect": "Allow",
                  "Resource": "*"
                }
              ]
            },
            "Roles": [
              {
                "Ref": "AdminRole38563C57"
              }
            ]
          }
        },
        "ECSD299DF54": {
          "Type": "AWS::EC2::SecurityGroup",
          "Properties": {
            "GroupDescription": "ECS security group",
            "VpcId": "vpc-12345",
            "SecurityGroupEgress": [
              {
                "CidrIp": "0.0.0.0/0",
                "Description": "Allow all outbound traffic by default",
                "IpProtocol": "-1"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Policies"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "InvokeCompaction02FB4DBC": {
          "Type": "AWS::IAM::ManagedPolicy",
          "Properties": {
            "ManagedPolicyName": "sleeper-test-instance-InvokeCompaction",
            "Path": "/",
            "Description": "",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars"
                        ]
                      ]
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchQCAC69541Arn"
                  }
                },
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreatorCurrentVersion57E78EC7Ref"
                  }
                },
                {
                  "Action": [
                    "ecs:DescribeClusters",
                    "ecs:RunTask",
                    "iam:PassRole",
                    "ecs:DescribeContainerInstances",
                    "ecs:DescribeTasks",
                    "ecs:ListContainerInstances",
                    "autoscaling:SetDesiredCapacity",
                    "autoscaling:DescribeAutoScalingGroups",
                    "ec2:DescribeInstanceTypes"
                  ],
                  "Effect": "Allow",
                  "Resource": "*"
                }
              ]
            },
            "Roles": [
              {
                "Ref": "AdminRole38563C57"
              }
            ]
          }
        }
      }
    },
    "TableData": {
      "Outputs": {
        "TestInstanceTableDataTableDataBucket68FE959DRef": {
          "Value": {
            "Ref": "TableDataBucketF477E898"
          }
        },
        "TestInstanceTableDataTableDataBucket68FE959DArn": {
          "Value": {
            "Fn::GetAtt": [
              "TableDataBucketF477E898",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "TableDataBucketF477E898": {
          "Type": "AWS::S3::Bucket",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "PublicAccessBlockConfiguration": {
              "RestrictPublicBuckets": true,
              "BlockPublicPolicy": true,
              "BlockPublicAcls": true,
              "IgnorePublicAcls": true
            },
            "BucketName": "sleeper-test-instance-table-data",
            "BucketEncryption": {
              "ServerSideEncryptionConfiguration": [
                {
                  "ServerSideEncryptionByDefault": {
                    "SSEAlgorithm": "AES256"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableData"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "TransactionLogStateStore": {
      "Outputs": {
        "TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Ref": {
          "Value": {
            "Ref": "FileTransactionLogTable7C31D05D"
          }
        },
        "TestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Ref": {
          "Value": {
            "Ref": "TransactionLogAllSnapshotsTableA5A3E455"
          }
        },
        "TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Ref": {
          "Value": {
            "Ref": "PartitionTransactionLogTable2FCE8848"
          }
        },
        "TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Value": {
            "Fn::GetAtt": [
              "FileTransactionLogTable7C31D05D",
              "Arn"
            ]
          }
        },
        "TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FRef": {
          "Value": {
            "Ref": "TransactionLogLatestSnapshotsTableC9F1B9F8"
          }
        },
        "TestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Value": {
            "Fn::GetAtt": [
              "TransactionLogLatestSnapshotsTableC9F1B9F8",
              "Arn"
            ]
          }
        },
        "TestInstanceTransactionLogStateStoreFileTransactionLogTable79925701StreamArn": {
          "Value": {
            "Fn::GetAtt": [
              "FileTransactionLogTable7C31D05D",
              "StreamArn"
            ]
          }
        },
        "TestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn": {
          "Value": {
            "Fn::GetAtt": [
              "TransactionLogAllSnapshotsTableA5A3E455",
              "Arn"
            ]
          }
        },
        "TestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
          "Value": {
            "Fn::GetAtt": [
              "PartitionTransactionLogTable2FCE8848",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "TransactionLogLatestSnapshotsTableC9F1B9F8": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-transaction-log-latest-snapshots",
            "AttributeDefinitions": [
              {
                "AttributeName": "TABLE_ID",
                "AttributeType": "S"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "KeySchema": [
              {
                "AttributeName": "TABLE_ID",
                "KeyType": "HASH"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogStateStore"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "PartitionTransactionLogTable2FCE8848": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-partition-transaction-log",
            "AttributeDefinitions": [
              {
                "AttributeName": "TABLE_ID",
                "AttributeType": "S"
              },
              {
                "AttributeName": "TRANSACTION_NUMBER",
                "AttributeType": "N"
              }
            ],
            "StreamSpecification": {
              "StreamViewType": "NEW_IMAGE"
            },
            "BillingMode": "PAY_PER_REQUEST",
            "KeySchema": [
              {
                "AttributeName": "TABLE_ID",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "TRANSACTION_NUMBER",
                "KeyType": "RANGE"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogStateStore"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogAllSnapshotsTableA5A3E455": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-transaction-log-all-snapshots",
            "AttributeDefinitions": [
              {
                "AttributeName": "TABLE_ID_AND_SNAPSHOT_TYPE",
                "AttributeType": "S"
              },
              {
                "AttributeName": "TRANSACTION_NUMBER",
                "AttributeType": "N"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "KeySchema": [
              {
                "AttributeName": "TABLE_ID_AND_SNAPSHOT_TYPE",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "TRANSACTION_NUMBER",
                "KeyType": "RANGE"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogStateStore"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "FileTransactionLogTable7C31D05D": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-file-transaction-log",
            "AttributeDefinitions": [
              {
                "AttributeName": "TABLE_ID",
                "AttributeType": "S"
              },
              {
                "AttributeName": "TRANSACTION_NUMBER",
                "AttributeType": "N"
              }
            ],
            "StreamSpecification": {
              "StreamViewType": "NEW_IMAGE"
            },
            "BillingMode": "PAY_PER_REQUEST",
            "KeySchema": [
              {
                "AttributeName": "TABLE_ID",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "TRANSACTION_NUMBER",
                "KeyType": "RANGE"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogStateStore"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "IngestTracker": {
      "Outputs": {
        "TestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
          "Value": {
            "Fn::GetAtt": [
              "DynamoDBIngestJobLookupTable0489FEB0",
              "Arn"
            ]
          }
        },
        "TestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
          "Value": {
            "Fn::GetAtt": [
              "DynamoDBIngestJobUpdatesTable3676F822",
              "Arn"
            ]
          }
        },
        "TestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn": {
          "Value": {
            "Fn::GetAtt": [
              "DynamoDBIngestTaskStatusTableA9029606",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "DynamoDBIngestJobLookupTable0489FEB0": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-ingest-job-lookup",
            "AttributeDefinitions": [
              {
                "AttributeName": "JobId",
                "AttributeType": "S"
              },
              {
                "AttributeName": "LastValidationResult",
                "AttributeType": "S"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "GlobalSecondaryIndexes": [
              {
                "IndexName": "by-validation",
                "KeySchema": [
                  {
                    "AttributeName": "LastValidationResult",
                    "KeyType": "HASH"
                  }
                ],
                "Projection": {
                  "NonKeyAttributes": [
                    "TableId"
                  ],
                  "ProjectionType": "INCLUDE"
                }
              }
            ],
            "PointInTimeRecoverySpecification": {
              "PointInTimeRecoveryEnabled": false
            },
            "KeySchema": [
              {
                "AttributeName": "JobId",
                "KeyType": "HASH"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestTracker"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "TimeToLiveSpecification": {
              "Enabled": true,
              "AttributeName": "ExpiryDate"
            }
          }
        },
        "DynamoDBIngestTaskStatusTableA9029606": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-ingest-task-status",
            "AttributeDefinitions": [
              {
                "AttributeName": "TaskId",
                "AttributeType": "S"
              },
              {
                "AttributeName": "UpdateTime",
                "AttributeType": "N"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "PointInTimeRecoverySpecification": {
              "PointInTimeRecoveryEnabled": false
            },
            "KeySchema": [
              {
                "AttributeName": "TaskId",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "UpdateTime",
                "KeyType": "RANGE"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestTracker"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "TimeToLiveSpecification": {
              "Enabled": true,
              "AttributeName": "ExpiryDate"
            }
          }
        },
        "DynamoDBIngestJobUpdatesTable3676F822": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-ingest-job-updates",
            "AttributeDefinitions": [
              {
                "AttributeName": "TableId",
                "AttributeType": "S"
              },
              {
                "AttributeName": "JobIdAndUpdate",
                "AttributeType": "S"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "PointInTimeRecoverySpecification": {
              "PointInTimeRecoveryEnabled": false
            },
            "KeySchema": [
              {
                "AttributeName": "TableId",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "JobIdAndUpdate",
                "KeyType": "RANGE"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestTracker"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "TimeToLiveSpecification": {
              "Enabled": true,
              "AttributeName": "ExpiryDate"
            }
          }
        }
      }
    },
    "CompactionTracker": {
      "Outputs": {
        "TestInstanceCompactionTrackerDynamoDBCompactionTaskStatusTable9E1002EFArn": {
          "Value": {
            "Fn::GetAtt": [
              "DynamoDBCompactionTaskStatusTable9878E693",
              "Arn"
            ]
          }
        },
        "TestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn": {
          "Value": {
            "Fn::GetAtt": [
              "DynamoDBCompactionJobLookupTable891EAA44",
              "Arn"
            ]
          }
        },
        "TestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn": {
          "Value": {
            "Fn::GetAtt": [
              "DynamoDBCompactionJobUpdatesTableA2CEF26B",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "DynamoDBCompactionTaskStatusTable9878E693": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-compaction-task-status",
            "AttributeDefinitions": [
              {
                "AttributeName": "TaskId",
                "AttributeType": "S"
              },
              {
                "AttributeName": "UpdateTime",
                "AttributeType": "N"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "PointInTimeRecoverySpecification": {
              "PointInTimeRecoveryEnabled": false
            },
            "KeySchema": [
              {
                "AttributeName": "TaskId",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "UpdateTime",
                "KeyType": "RANGE"
              }
            ],
            "TimeToLiveSpecification": {
              "Enabled": true,
              "AttributeName": "ExpiryDate"
            }
          }
        },
        "DynamoDBCompactionJobUpdatesTableA2CEF26B": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-compaction-job-updates",
            "AttributeDefinitions": [
              {
                "AttributeName": "TableId",
                "AttributeType": "S"
              },
              {
                "AttributeName": "JobIdAndUpdate",
                "AttributeType": "S"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "PointInTimeRecoverySpecification": {
              "PointInTimeRecoveryEnabled": false
            },
            "KeySchema": [
              {
                "AttributeName": "TableId",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "JobIdAndUpdate",
                "KeyType": "RANGE"
              }
            ],
            "TimeToLiveSpecification": {
              "Enabled": true,
              "AttributeName": "ExpiryDate"
            }
          }
        },
        "DynamoDBCompactionJobLookupTable891EAA44": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-compaction-job-lookup",
            "AttributeDefinitions": [
              {
                "AttributeName": "JobId",
                "AttributeType": "S"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "PointInTimeRecoverySpecification": {
              "PointInTimeRecoveryEnabled": false
            },
            "KeySchema": [
              {
                "AttributeName": "JobId",
                "KeyType": "HASH"
              }
            ],
            "TimeToLiveSpecification": {
              "Enabled": true,
              "AttributeName": "ExpiryDate"
            }
          }
        }
      }
    },
    "Configuration": {
      "Parameters": {
        "referencetoTestInstanceAutoDeleteS3ObjectsNestedStackAutoDeleteS3ObjectsNestedStackResourceA27C7E41OutputsTestInstanceAutoDeleteS3ObjectsProviderframeworkonEventA39C1CF4Arn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Value": {
            "Fn::GetAtt": [
              "ConfigBucket2112C5EC",
              "Arn"
            ]
          }
        },
        "TestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Value": {
            "Ref": "ConfigBucket2112C5EC"
          }
        }
      },
      "Resources": {
        "ConfigBucketAutoDelete": {
          "Type": "Custom::AutoDeleteS3Objects",
          "DependsOn": [
            "ConfigBucket2112C5EC"
          ],
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "ServiceToken": {
              "Ref": "referencetoTestInstanceAutoDeleteS3ObjectsNestedStackAutoDeleteS3ObjectsNestedStackResourceA27C7E41OutputsTestInstanceAutoDeleteS3ObjectsProviderframeworkonEventA39C1CF4Arn"
            },
            "bucket": {
              "Ref": "ConfigBucket2112C5EC"
            }
          }
        },
        "ConfigBucket2112C5EC": {
          "Type": "AWS::S3::Bucket",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "PublicAccessBlockConfiguration": {
              "RestrictPublicBuckets": true,
              "BlockPublicPolicy": true,
              "BlockPublicAcls": true,
              "IgnorePublicAcls": true
            },
            "BucketName": "sleeper-test-instance-config",
            "BucketEncryption": {
              "ServerSideEncryptionConfiguration": [
                {
                  "ServerSideEncryptionByDefault": {
                    "SSEAlgorithm": "AES256"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Configuration"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "TableIndex": {
      "Outputs": {
        "TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DRef": {
          "Value": {
            "Ref": "IndexByOnlineDynamoDBTableA990D26E"
          }
        },
        "TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Value": {
            "Fn::GetAtt": [
              "IndexByNameDynamoDBTableDD9A42CC",
              "Arn"
            ]
          }
        },
        "TestInstanceTableIndexIndexByNameDynamoDBTable8F569277Ref": {
          "Value": {
            "Ref": "IndexByNameDynamoDBTableDD9A42CC"
          }
        },
        "TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Ref": {
          "Value": {
            "Ref": "IndexByIdDynamoDBTable3CC530E7"
          }
        },
        "TestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Value": {
            "Fn::GetAtt": [
              "IndexByIdDynamoDBTable3CC530E7",
              "Arn"
            ]
          }
        },
        "TestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Value": {
            "Fn::GetAtt": [
              "IndexByOnlineDynamoDBTableA990D26E",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "IndexByOnlineDynamoDBTableA990D26E": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-table-index-by-online",
            "AttributeDefinitions": [
              {
                "AttributeName": "Online",
                "AttributeType": "S"
              },
              {
                "AttributeName": "TableName",
                "AttributeType": "S"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "PointInTimeRecoverySpecification": {
              "PointInTimeRecoveryEnabled": false
            },
            "KeySchema": [
              {
                "AttributeName": "Online",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "TableName",
                "KeyType": "RANGE"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableIndex"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IndexByNameDynamoDBTableDD9A42CC": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-table-index-by-name",
            "AttributeDefinitions": [
              {
                "AttributeName": "TableName",
                "AttributeType": "S"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "PointInTimeRecoverySpecification": {
              "PointInTimeRecoveryEnabled": false
            },
            "KeySchema": [
              {
                "AttributeName": "TableName",
                "KeyType": "HASH"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableIndex"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IndexByIdDynamoDBTable3CC530E7": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-table-index-by-id",
            "AttributeDefinitions": [
              {
                "AttributeName": "TableId",
                "AttributeType": "S"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "PointInTimeRecoverySpecification": {
              "PointInTimeRecoveryEnabled": false
            },
            "KeySchema": [
              {
                "AttributeName": "TableId",
                "KeyType": "HASH"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableIndex"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "StateStoreCommitter": {
      "Parameters": {
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatestorecommitterCB6F35F0Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465Ref": {
          "Value": {
            "Ref": "StateStoreCommitterDLQ97945443"
          }
        },
        "TestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CERef": {
          "Value": {
            "Ref": "StateStoreCommitterQueue8377FD80"
          }
        },
        "TestInstanceStateStoreCommitterCurrentVersionSqsEventSourceTestInstanceStateStoreCommitterStateStoreCommitterQueue33B0078EDD58441ARef": {
          "Value": {
            "Ref": "StateStoreCommitterCurrentVersionSqsEventSourceTestInstanceStateStoreCommitterStateStoreCommitterQueue33B0078E7227E9D6"
          }
        },
        "TestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465Arn": {
          "Value": {
            "Fn::GetAtt": [
              "StateStoreCommitterDLQ97945443",
              "Arn"
            ]
          }
        },
        "TestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
          "Value": {
            "Fn::GetAtt": [
              "StateStoreCommitterQueue8377FD80",
              "Arn"
            ]
          }
        },
        "TestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "StateStoreCommitterDLQ97945443",
              "QueueName"
            ]
          }
        }
      },
      "Resources": {
        "StateStoreCommitterCurrentVersionSqsEventSourceTestInstanceStateStoreCommitterStateStoreCommitterQueue33B0078E7227E9D6": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 10,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "StateStoreCommitterF1F6771C"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "StateStoreCommitterCurrentVersionF3ECCC04d8e48f47d388348a15bd59a0c703ec4b",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "ScalingConfig": {
              "MaximumConcurrency": 10
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "StateStoreCommitterQueue8377FD80",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "StateStoreCommitter"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "StateStoreCommitterDLQ97945443": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "FifoQueue": true,
            "QueueName": "sleeper-test-instance-StateStoreCommitterDLQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "StateStoreCommitter"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "StateStoreCommitterF1F6771C": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "StateStoreCommitterServiceRoleDefaultPolicy7FB011D7",
            "StateStoreCommitterServiceRole4DCF0ECC"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "StateStoreCommitterServiceRole4DCF0ECC",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-statestore-committer",
            "MemorySize": 4096,
            "Runtime": "java17",
            "Description": "Commits updates to the state store. Used to commit compaction and ingest jobs asynchronously.",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatestorecommitterCB6F35F0Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.statestore.lambda.committer.StateStoreCommitterLambda::handleRequest",
            "ReservedConcurrentExecutions": 10,
            "Code": {
              "S3ObjectVersion": "statestore-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "statestore-lambda-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "StateStoreCommitter"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "StateStoreCommitterServiceRole4DCF0ECC": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "StateStoreCommitter"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "StateStoreCommitterAlarm34162B3B": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "StateStoreCommitterDLQ97945443",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for the state store committer",
            "AlarmName": {
              "Fn::GetAtt": [
                "StateStoreCommitterDLQ97945443",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "StateStoreCommitter"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "StateStoreCommitterQueue8377FD80": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "FifoThroughputLimit": "perMessageGroupId",
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "StateStoreCommitterDLQ97945443",
                  "Arn"
                ]
              }
            },
            "FifoQueue": true,
            "DeduplicationScope": "messageGroup",
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-StateStoreCommitterQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "StateStoreCommitter"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "StateStoreCommitterCurrentVersionF3ECCC04d8e48f47d388348a15bd59a0c703ec4b": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "StateStoreCommitterF1F6771C"
            }
          }
        },
        "StateStoreCommitterServiceRoleDefaultPolicy7FB011D7": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "StateStoreCommitterServiceRoleDefaultPolicy7FB011D7",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "StateStoreCommitterQueue8377FD80",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                          },
                          "/index/*"
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "Roles": [
              {
                "Ref": "StateStoreCommitterServiceRole4DCF0ECC"
              }
            ]
          }
        }
      }
    },
    "TransactionLogSnapshot": {
      "Parameters": {
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatesnapshotcreation859603B7Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatesnapshotdeletionD39358EFRef": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatesnapshotdeletiontrigger212475A9Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatesnapshotcreationtriggerC988CCD4Ref": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Arn": {
          "Value": {
            "Fn::GetAtt": [
              "TransactionLogSnapshotQueueF4DBCF65",
              "Arn"
            ]
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotCreationTriggerCurrentVersion72902924Ref": {
          "Value": {
            "Ref": "TransactionLogSnapshotCreationTriggerCurrentVersion80320EAE727d9a69cdc611ca63af2d7743c18730"
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Ref": {
          "Value": {
            "Ref": "TransactionLogSnapshotDeletionQueueC5F5102E"
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922Arn": {
          "Value": {
            "Fn::GetAtt": [
              "TransactionLogSnapshotDeletionDeadLetterQueue593E1FD8",
              "Arn"
            ]
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "TransactionLogSnapshotDeletionDeadLetterQueue593E1FD8",
              "QueueName"
            ]
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "TransactionLogSnapshotDeadLetterQueueC177B5DC",
              "QueueName"
            ]
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922Ref": {
          "Value": {
            "Ref": "TransactionLogSnapshotDeletionDeadLetterQueue593E1FD8"
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Ref": {
          "Value": {
            "Ref": "TransactionLogSnapshotQueueF4DBCF65"
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionSchedule579388F9Ref": {
          "Value": {
            "Ref": "TransactionLogSnapshotDeletionSchedule8CC47909"
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528Arn": {
          "Value": {
            "Fn::GetAtt": [
              "TransactionLogSnapshotDeadLetterQueueC177B5DC",
              "Arn"
            ]
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionTriggerCurrentVersionEB512F8DRef": {
          "Value": {
            "Ref": "TransactionLogSnapshotDeletionTriggerCurrentVersionA11D2C0F31aacbac7505150614701eb12b5bd7a5"
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528Ref": {
          "Value": {
            "Ref": "TransactionLogSnapshotDeadLetterQueueC177B5DC"
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotCreationScheduleD7BB96C6Ref": {
          "Value": {
            "Ref": "TransactionLogSnapshotCreationSchedule5CC9B7AF"
          }
        },
        "TestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Arn": {
          "Value": {
            "Fn::GetAtt": [
              "TransactionLogSnapshotDeletionQueueC5F5102E",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "TransactionLogSnapshotCreationED5D3214": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "TransactionLogSnapshotCreationServiceRoleDefaultPolicy8B349ED1",
            "TransactionLogSnapshotCreationServiceRole5800AF1A"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "TransactionLogSnapshotCreationServiceRole5800AF1A",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-state-snapshot-creation",
            "MemorySize": 4096,
            "Runtime": "java17",
            "Description": "Creates transaction log snapshots for tables",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatesnapshotcreation859603B7Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.statestore.lambda.snapshot.TransactionLogSnapshotCreationLambda::handleRequest",
            "Code": {
              "S3ObjectVersion": "statestore-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "statestore-lambda-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotDeletionServiceRole2F5935AB": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotDeletionDeadLetterQueue593E1FD8": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "FifoQueue": true,
            "QueueName": "sleeper-test-instance-TransactionLogSnapshotDeletionDLQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotCreationTriggerServiceRoleDefaultPolicyA619E30A": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "TransactionLogSnapshotCreationTriggerServiceRoleDefaultPolicyA619E30A",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "TransactionLogSnapshotQueueF4DBCF65",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "TransactionLogSnapshotCreationTriggerServiceRoleEE2045DA"
              }
            ]
          }
        },
        "TransactionLogSnapshotCreationCurrentVersion3FA3F63C64904bd2979718a79425ae225fa664c2": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "TransactionLogSnapshotCreationED5D3214"
            }
          }
        },
        "TransactionLogSnapshotDeletionTriggerServiceRole2E871423": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotCreationCurrentVersionSqsEventSourceTestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue702CD31FE9885F6B": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "TransactionLogSnapshotCreationED5D3214"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "TransactionLogSnapshotCreationCurrentVersion3FA3F63C64904bd2979718a79425ae225fa664c2",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "ScalingConfig": {
              "MaximumConcurrency": 10
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "TransactionLogSnapshotQueueF4DBCF65",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotQueueF4DBCF65": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotDeadLetterQueueC177B5DC",
                  "Arn"
                ]
              }
            },
            "FifoQueue": true,
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-TransactionLogSnapshotQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotDeletionServiceRoleDefaultPolicy3AE84B6C": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "TransactionLogSnapshotDeletionServiceRoleDefaultPolicy3AE84B6C",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "TransactionLogSnapshotDeletionQueueC5F5102E",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": "s3:DeleteObject*",
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        {
                          "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                        },
                        "/*"
                      ]
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "TransactionLogSnapshotDeletionServiceRole2F5935AB"
              }
            ]
          }
        },
        "TransactionLogSnapshotCreationTriggerAA3536B9": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "TransactionLogSnapshotCreationTriggerServiceRoleDefaultPolicyA619E30A",
            "TransactionLogSnapshotCreationTriggerServiceRoleEE2045DA"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "TransactionLogSnapshotCreationTriggerServiceRoleEE2045DA",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-state-snapshot-creation-trigger",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "Creates batches of Sleeper tables to create transaction log snapshots for and puts them on a queue to be processed",
            "Timeout": 60,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatesnapshotcreationtriggerC988CCD4Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.statestore.lambda.snapshot.TransactionLogSnapshotCreationTriggerLambda::handleRequest",
            "ReservedConcurrentExecutions": 1,
            "Code": {
              "S3ObjectVersion": "statestore-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "statestore-lambda-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotDeletionA61F5C0B": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "TransactionLogSnapshotDeletionServiceRoleDefaultPolicy3AE84B6C",
            "TransactionLogSnapshotDeletionServiceRole2F5935AB"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "TransactionLogSnapshotDeletionServiceRole2F5935AB",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-state-snapshot-deletion",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "Deletes old transaction log snapshots for tables",
            "Timeout": 60,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatesnapshotdeletionD39358EFRef"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.statestore.lambda.snapshot.TransactionLogSnapshotDeletionLambda::handleRequest",
            "Code": {
              "S3ObjectVersion": "statestore-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "statestore-lambda-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotDeletionTriggerCurrentVersionA11D2C0F31aacbac7505150614701eb12b5bd7a5": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "TransactionLogSnapshotDeletionTrigger130EAC65"
            }
          }
        },
        "TransactionLogSnapshotDeletionScheduleAllowEventRuleTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionTriggerCurrentVersionC5357B4EC6344878": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Ref": "TransactionLogSnapshotDeletionTriggerCurrentVersionA11D2C0F31aacbac7505150614701eb12b5bd7a5"
            },
            "Action": "lambda:InvokeFunction",
            "SourceArn": {
              "Fn::GetAtt": [
                "TransactionLogSnapshotDeletionSchedule8CC47909",
                "Arn"
              ]
            },
            "Principal": "events.amazonaws.com"
          }
        },
        "TransactionLogSnapshotCreationScheduleAllowEventRuleTestInstanceTransactionLogSnapshotTransactionLogSnapshotCreationTriggerCurrentVersion20594271D4B5F1E7": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Ref": "TransactionLogSnapshotCreationTriggerCurrentVersion80320EAE727d9a69cdc611ca63af2d7743c18730"
            },
            "Action": "lambda:InvokeFunction",
            "SourceArn": {
              "Fn::GetAtt": [
                "TransactionLogSnapshotCreationSchedule5CC9B7AF",
                "Arn"
              ]
            },
            "Principal": "events.amazonaws.com"
          }
        },
        "TransactionLogSnapshotDeletionAlarmEAC03758": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "TransactionLogSnapshotDeletionDeadLetterQueue593E1FD8",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for transaction log snapshot deletion",
            "AlarmName": {
              "Fn::GetAtt": [
                "TransactionLogSnapshotDeletionDeadLetterQueue593E1FD8",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "TransactionLogSnapshotCreationServiceRole5800AF1A": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotDeletionTrigger130EAC65": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "TransactionLogSnapshotDeletionTriggerServiceRoleDefaultPolicy700A4371",
            "TransactionLogSnapshotDeletionTriggerServiceRole2E871423"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "TransactionLogSnapshotDeletionTriggerServiceRole2E871423",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-state-snapshot-deletion-trigger",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "Creates batches of Sleeper tables to delete old transaction log snapshots for and puts them on a queue to be processed",
            "Timeout": 60,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatesnapshotdeletiontrigger212475A9Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.statestore.lambda.snapshot.TransactionLogSnapshotDeletionTriggerLambda::handleRequest",
            "ReservedConcurrentExecutions": 1,
            "Code": {
              "S3ObjectVersion": "statestore-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "statestore-lambda-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotCreationServiceRoleDefaultPolicy8B349ED1": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "TransactionLogSnapshotCreationServiceRoleDefaultPolicy8B349ED1",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "TransactionLogSnapshotQueueF4DBCF65",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "Roles": [
              {
                "Ref": "TransactionLogSnapshotCreationServiceRole5800AF1A"
              }
            ]
          }
        },
        "TransactionLogSnapshotDeletionTriggerServiceRoleDefaultPolicy700A4371": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "TransactionLogSnapshotDeletionTriggerServiceRoleDefaultPolicy700A4371",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "TransactionLogSnapshotDeletionQueueC5F5102E",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "TransactionLogSnapshotDeletionTriggerServiceRole2E871423"
              }
            ]
          }
        },
        "TransactionLogSnapshotCreationAlarm00476488": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "TransactionLogSnapshotDeadLetterQueueC177B5DC",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for transaction log snapshot creation",
            "AlarmName": {
              "Fn::GetAtt": [
                "TransactionLogSnapshotDeadLetterQueueC177B5DC",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "TransactionLogSnapshotDeletionCurrentVersionSqsEventSourceTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueueA9856AE8E447285B": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "TransactionLogSnapshotDeletionA61F5C0B"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "TransactionLogSnapshotDeletionCurrentVersionBCFDBFFE3ce9709b5e626ce457ff2585870c8d67",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "ScalingConfig": {
              "MaximumConcurrency": 10
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "TransactionLogSnapshotDeletionQueueC5F5102E",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotDeletionCurrentVersionBCFDBFFE3ce9709b5e626ce457ff2585870c8d67": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "TransactionLogSnapshotDeletionA61F5C0B"
            }
          }
        },
        "TransactionLogSnapshotDeletionSchedule8CC47909": {
          "Type": "AWS::Events::Rule",
          "Properties": {
            "ScheduleExpression": "rate(1 hour)",
            "Description": "Triggers deletion of old snapshots of online Sleeper tables based on a transaction log",
            "State": "ENABLED",
            "Targets": [
              {
                "Arn": {
                  "Ref": "TransactionLogSnapshotDeletionTriggerCurrentVersionA11D2C0F31aacbac7505150614701eb12b5bd7a5"
                },
                "Id": "Target0"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Name": "test-instance-TransactionLogSnapshotDeletionRule"
          }
        },
        "TransactionLogSnapshotCreationSchedule5CC9B7AF": {
          "Type": "AWS::Events::Rule",
          "Properties": {
            "ScheduleExpression": "rate(1 minute)",
            "Description": "Triggers creation of snapshots of the current state of online Sleeper tables based on a transaction log",
            "State": "ENABLED",
            "Targets": [
              {
                "Arn": {
                  "Ref": "TransactionLogSnapshotCreationTriggerCurrentVersion80320EAE727d9a69cdc611ca63af2d7743c18730"
                },
                "Id": "Target0"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Name": "test-instance-TransactionLogSnapshotCreationRule"
          }
        },
        "TransactionLogSnapshotCreationTriggerCurrentVersion80320EAE727d9a69cdc611ca63af2d7743c18730": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "TransactionLogSnapshotCreationTriggerAA3536B9"
            }
          }
        },
        "TransactionLogSnapshotDeadLetterQueueC177B5DC": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "FifoQueue": true,
            "QueueName": "sleeper-test-instance-TransactionLogSnapshotDLQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotDeletionQueueC5F5102E": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "TransactionLogSnapshotDeletionDeadLetterQueue593E1FD8",
                  "Arn"
                ]
              }
            },
            "FifoQueue": true,
            "VisibilityTimeout": 70,
            "QueueName": "sleeper-test-instance-TransactionLogSnapshotDeletionQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogSnapshotCreationTriggerServiceRoleEE2045DA": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogSnapshot"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "TransactionLogTransaction": {
      "Parameters": {
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatetransactionfollower654BC5E7Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatetransactiondeletiontriggerF4654DC9Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatetransactiondeletion6C3C26FERef": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701StreamArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionTriggerCurrentVersion5F5C5690Ref": {
          "Value": {
            "Ref": "TransactionLogTransactionDeletionTriggerCurrentVersion887C1A952bd36dba02a94df30500f9e33e198c9a"
          }
        },
        "TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Arn": {
          "Value": {
            "Fn::GetAtt": [
              "TransactionLogTransactionDeletionQueue68D8639F",
              "Arn"
            ]
          }
        },
        "TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionScheduleBC70F1ECRef": {
          "Value": {
            "Ref": "TransactionLogTransactionDeletionScheduleCC464B08"
          }
        },
        "TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3Arn": {
          "Value": {
            "Fn::GetAtt": [
              "TransactionLogTransactionDeletionDeadLetterQueueD6131A6F",
              "Arn"
            ]
          }
        },
        "TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Ref": {
          "Value": {
            "Ref": "TransactionLogTransactionDeletionQueue68D8639F"
          }
        },
        "TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "TransactionLogTransactionDeletionDeadLetterQueueD6131A6F",
              "QueueName"
            ]
          }
        },
        "TestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3Ref": {
          "Value": {
            "Ref": "TransactionLogTransactionDeletionDeadLetterQueueD6131A6F"
          }
        }
      },
      "Resources": {
        "TransactionLogTransactionDeletionCurrentVersionAC0E472B2e927047c7ddbb983a0398e5fb6cb548": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "TransactionLogTransactionDeletionB3923846"
            }
          }
        },
        "TransactionLogTransactionDeletionTrigger63BE36EC": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "TransactionLogTransactionDeletionTriggerServiceRoleDefaultPolicy4E1ABD2B",
            "TransactionLogTransactionDeletionTriggerServiceRole7A04623C"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "TransactionLogTransactionDeletionTriggerServiceRole7A04623C",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-state-transaction-deletion-trigger",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "Creates batches of Sleeper tables to delete old transaction log transactions for and puts them on a queue to be processed",
            "Timeout": 60,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatetransactiondeletiontriggerF4654DC9Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.statestore.lambda.transaction.TransactionLogTransactionDeletionTriggerLambda::handleRequest",
            "ReservedConcurrentExecutions": 1,
            "Code": {
              "S3ObjectVersion": "statestore-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "statestore-lambda-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogTransactionDeletionTriggerServiceRoleDefaultPolicy4E1ABD2B": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "TransactionLogTransactionDeletionTriggerServiceRoleDefaultPolicy4E1ABD2B",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "TransactionLogTransactionDeletionQueue68D8639F",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "TransactionLogTransactionDeletionTriggerServiceRole7A04623C"
              }
            ]
          }
        },
        "TransactionLogTransactionDeletionServiceRole27C0949F": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogTransactionDeletionAlarm988D1547": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "TransactionLogTransactionDeletionDeadLetterQueueD6131A6F",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for transaction log transaction deletion",
            "AlarmName": {
              "Fn::GetAtt": [
                "TransactionLogTransactionDeletionDeadLetterQueueD6131A6F",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "TransactionLogFollowerCurrentVersionD48C73BDaea211dbb2dfd2dad93a67d60e7275aa": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "TransactionLogFollower8971259F"
            }
          }
        },
        "TransactionLogFollower8971259F": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "TransactionLogFollowerServiceRoleDefaultPolicy446BB99C",
            "TransactionLogFollowerServiceRole743744FB"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "TransactionLogFollowerServiceRole743744FB",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-state-transaction-follower",
            "MemorySize": 4096,
            "Runtime": "java17",
            "Description": "Follows the state store transaction log to trigger updates, e.g. to job trackers",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatetransactionfollower654BC5E7Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.statestore.lambda.transaction.TransactionLogFollowerLambda::handleRequest",
            "Code": {
              "S3ObjectVersion": "statestore-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "statestore-lambda-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogTransactionDeletionTriggerCurrentVersion887C1A952bd36dba02a94df30500f9e33e198c9a": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "TransactionLogTransactionDeletionTrigger63BE36EC"
            }
          }
        },
        "TransactionLogTransactionDeletionCurrentVersionSqsEventSourceTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueueB4A95C487317BE72": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "TransactionLogTransactionDeletionB3923846"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "TransactionLogTransactionDeletionCurrentVersionAC0E472B2e927047c7ddbb983a0398e5fb6cb548",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "ScalingConfig": {
              "MaximumConcurrency": 10
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "TransactionLogTransactionDeletionQueue68D8639F",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogTransactionDeletionQueue68D8639F": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "TransactionLogTransactionDeletionDeadLetterQueueD6131A6F",
                  "Arn"
                ]
              }
            },
            "FifoQueue": true,
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-TransactionLogTransactionDeletionQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogTransactionDeletionScheduleAllowEventRuleTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionTriggerCurrentVersion3648898816AED052": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Ref": "TransactionLogTransactionDeletionTriggerCurrentVersion887C1A952bd36dba02a94df30500f9e33e198c9a"
            },
            "Action": "lambda:InvokeFunction",
            "SourceArn": {
              "Fn::GetAtt": [
                "TransactionLogTransactionDeletionScheduleCC464B08",
                "Arn"
              ]
            },
            "Principal": "events.amazonaws.com"
          }
        },
        "TransactionLogTransactionDeletionB3923846": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "TransactionLogTransactionDeletionServiceRoleDefaultPolicyCA2C5E39",
            "TransactionLogTransactionDeletionServiceRole27C0949F"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "TransactionLogTransactionDeletionServiceRole27C0949F",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-state-transaction-deletion",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "Deletes old transaction log transactions for tables",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatetransactiondeletion6C3C26FERef"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.statestore.lambda.transaction.TransactionLogTransactionDeletionLambda::handleRequest",
            "Code": {
              "S3ObjectVersion": "statestore-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "statestore-lambda-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogTransactionDeletionScheduleCC464B08": {
          "Type": "AWS::Events::Rule",
          "Properties": {
            "ScheduleExpression": "rate(1 hour)",
            "Description": "Triggers deletion of old transactions from the active transaction logs of online Sleeper tables",
            "State": "ENABLED",
            "Targets": [
              {
                "Arn": {
                  "Ref": "TransactionLogTransactionDeletionTriggerCurrentVersion887C1A952bd36dba02a94df30500f9e33e198c9a"
                },
                "Id": "Target0"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Name": "test-instance-TransactionLogTransactionDeletionRule"
          }
        },
        "TransactionLogTransactionDeletionTriggerServiceRole7A04623C": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogTransactionDeletionDeadLetterQueueD6131A6F": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "FifoQueue": true,
            "QueueName": "sleeper-test-instance-TransactionLogTransactionDeletionDLQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogFollowerServiceRoleDefaultPolicy446BB99C": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "TransactionLogFollowerServiceRoleDefaultPolicy446BB99C",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "dynamodb:ListStreams",
                  "Effect": "Allow",
                  "Resource": "*"
                },
                {
                  "Action": [
                    "dynamodb:DescribeStream",
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701StreamArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                          },
                          "/index/*"
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "Roles": [
              {
                "Ref": "TransactionLogFollowerServiceRole743744FB"
              }
            ]
          }
        },
        "TransactionLogFollowerCurrentVersionDynamoDBEventSourceTestInstanceTransactionLogStateStoreFileTransactionLogTable54572271B2468989": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "StartingPosition": "LATEST",
            "BatchSize": 100,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "TransactionLogFollower8971259F"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "TransactionLogFollowerCurrentVersionD48C73BDaea211dbb2dfd2dad93a67d60e7275aa",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "EventSourceArn": {
              "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701StreamArn"
            },
            "MetricsConfig": {
              "Metrics": [
                "EventCount"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TransactionLogTransactionDeletionServiceRoleDefaultPolicyCA2C5E39": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "TransactionLogTransactionDeletionServiceRoleDefaultPolicyCA2C5E39",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "TransactionLogTransactionDeletionQueue68D8639F",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": "s3:DeleteObject*",
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        {
                          "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                        },
                        "/*"
                      ]
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "TransactionLogTransactionDeletionServiceRole27C0949F"
              }
            ]
          }
        },
        "TransactionLogFollowerServiceRole743744FB": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TransactionLogTransaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "TableMetrics": {
      "Parameters": {
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingmetricspublisher9BCF87A3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingmetricstrigger73B1BF98Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceTableMetricsMetricsTrigger1B6EB004Ref": {
          "Value": {
            "Ref": "MetricsTrigger5C2B87C8"
          }
        },
        "TestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1Arn": {
          "Value": {
            "Fn::GetAtt": [
              "MetricsJobDeadLetterQueueEBAEB603",
              "Arn"
            ]
          }
        },
        "TestInstanceTableMetricsMetricsTriggerCurrentVersion65A885FBRef": {
          "Value": {
            "Ref": "MetricsTriggerCurrentVersionF32AFF9F77d02c9c10f192bf7e0e6f90bc156e00"
          }
        },
        "TestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1Ref": {
          "Value": {
            "Ref": "MetricsJobDeadLetterQueueEBAEB603"
          }
        },
        "TestInstanceTableMetricsMetricsJobQueue5B390950Ref": {
          "Value": {
            "Ref": "MetricsJobQueue416A029D"
          }
        },
        "TestInstanceTableMetricsMetricsJobQueue5B390950Arn": {
          "Value": {
            "Fn::GetAtt": [
              "MetricsJobQueue416A029D",
              "Arn"
            ]
          }
        },
        "TestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "MetricsJobDeadLetterQueueEBAEB603",
              "QueueName"
            ]
          }
        },
        "TestInstanceTableMetricsMetricsPublishSchedule30F78292Ref": {
          "Value": {
            "Ref": "MetricsPublishSchedule887CC16B"
          }
        },
        "TestInstanceTableMetricsMetricsTriggerCurrentVersion65A885FBVersion": {
          "Value": {
            "Fn::GetAtt": [
              "MetricsTriggerCurrentVersionF32AFF9F77d02c9c10f192bf7e0e6f90bc156e00",
              "Version"
            ]
          }
        }
      },
      "Resources": {
        "MetricsPublisherServiceRoleDefaultPolicy84E4AABF": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "MetricsPublisherServiceRoleDefaultPolicy84E4AABF",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "MetricsJobQueue416A029D",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "MetricsPublisherServiceRole0D59C09D"
              }
            ]
          }
        },
        "MetricsJobDeadLetterQueueEBAEB603": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "FifoQueue": true,
            "QueueName": "sleeper-test-instance-MetricsJobDLQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableMetrics"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "MetricsPublishSchedule887CC16B": {
          "Type": "AWS::Events::Rule",
          "Properties": {
            "ScheduleExpression": "rate(1 minute)",
            "Description": "Triggers publishing metrics based on the current state of Sleeper tables",
            "State": "ENABLED",
            "Targets": [
              {
                "Arn": {
                  "Ref": "MetricsTriggerCurrentVersionF32AFF9F77d02c9c10f192bf7e0e6f90bc156e00"
                },
                "Id": "Target0"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableMetrics"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Name": "test-instance-MetricsPublishRule"
          }
        },
        "MetricsJobQueue416A029D": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "MetricsJobDeadLetterQueueEBAEB603",
                  "Arn"
                ]
              }
            },
            "FifoQueue": true,
            "VisibilityTimeout": 70,
            "QueueName": "sleeper-test-instance-MetricsJobQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableMetrics"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "MetricsPublisherCurrentVersion75F92AE0ebe5d8c4ed0cb069d3fc887770175cde": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "MetricsPublisher6BE7482F"
            }
          }
        },
        "MetricsPublishScheduleAllowEventRuleTestInstanceTableMetricsMetricsTriggerCurrentVersion3B52A7DDF3FEAFD9": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Ref": "MetricsTriggerCurrentVersionF32AFF9F77d02c9c10f192bf7e0e6f90bc156e00"
            },
            "Action": "lambda:InvokeFunction",
            "SourceArn": {
              "Fn::GetAtt": [
                "MetricsPublishSchedule887CC16B",
                "Arn"
              ]
            },
            "Principal": "events.amazonaws.com"
          }
        },
        "MetricsPublisherCurrentVersionSqsEventSourceTestInstanceTableMetricsMetricsJobQueueE40D8C8DBC205EF0": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "MetricsPublisher6BE7482F"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "MetricsPublisherCurrentVersion75F92AE0ebe5d8c4ed0cb069d3fc887770175cde",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "ScalingConfig": {
              "MaximumConcurrency": 10
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "MetricsJobQueue416A029D",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableMetrics"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "MetricsTriggerServiceRoleB891A53A": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableMetrics"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "MetricsTriggerCurrentVersionF32AFF9F77d02c9c10f192bf7e0e6f90bc156e00": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "MetricsTrigger5C2B87C8"
            }
          }
        },
        "MetricsTriggerServiceRoleDefaultPolicy5FC8B28A": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "MetricsTriggerServiceRoleDefaultPolicy5FC8B28A",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "MetricsJobQueue416A029D",
                      "Arn"
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "MetricsTriggerServiceRoleB891A53A"
              }
            ]
          }
        },
        "MetricsTrigger5C2B87C8": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "MetricsTriggerServiceRoleDefaultPolicy5FC8B28A",
            "MetricsTriggerServiceRoleB891A53A"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "MetricsTriggerServiceRoleB891A53A",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-metrics-trigger",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "Creates batches of Sleeper tables to calculate metrics for and puts them on a queue to be published",
            "Timeout": 60,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingmetricstrigger73B1BF98Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.metrics.TableMetricsTriggerLambda::handleRequest",
            "ReservedConcurrentExecutions": 1,
            "Code": {
              "S3ObjectVersion": "metrics-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "metrics-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableMetrics"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "MetricsPublisher6BE7482F": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "MetricsPublisherServiceRoleDefaultPolicy84E4AABF",
            "MetricsPublisherServiceRole0D59C09D"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "MetricsPublisherServiceRole0D59C09D",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-metrics-publisher",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "Generates metrics for a Sleeper table based on info in its state store, and publishes them to CloudWatch",
            "Timeout": 60,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingmetricspublisher9BCF87A3Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.metrics.TableMetricsLambda::handleRequest",
            "Code": {
              "S3ObjectVersion": "metrics-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "metrics-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableMetrics"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "MetricsPublisherServiceRole0D59C09D": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableMetrics"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "MetricsJobAlarmF31D1B48": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "MetricsJobDeadLetterQueueEBAEB603",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for table metrics generation triggers",
            "AlarmName": {
              "Fn::GetAtt": [
                "MetricsJobDeadLetterQueueEBAEB603",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "TableMetrics"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        }
      }
    },
    "BulkImportBucket": {
      "Parameters": {
        "referencetoTestInstanceAutoDeleteS3ObjectsNestedStackAutoDeleteS3ObjectsNestedStackResourceA27C7E41OutputsTestInstanceAutoDeleteS3ObjectsProviderframeworkonEventA39C1CF4Arn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceBulkImportBucket58F540BARef": {
          "Value": {
            "Ref": "BulkImportBucket9737FEC2"
          }
        },
        "TestInstanceBulkImportBucket58F540BAArn": {
          "Value": {
            "Fn::GetAtt": [
              "BulkImportBucket9737FEC2",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "BulkImportBucket9737FEC2": {
          "Type": "AWS::S3::Bucket",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "PublicAccessBlockConfiguration": {
              "RestrictPublicBuckets": true,
              "BlockPublicPolicy": true,
              "BlockPublicAcls": true,
              "IgnorePublicAcls": true
            },
            "BucketName": "sleeper-test-instance-bulk-import",
            "BucketEncryption": {
              "ServerSideEncryptionConfiguration": [
                {
                  "ServerSideEncryptionByDefault": {
                    "SSEAlgorithm": "AES256"
                  }
                }
              ]
            }
          }
        },
        "BulkImportBucketAutoDelete": {
          "Type": "Custom::AutoDeleteS3Objects",
          "DependsOn": [
            "BulkImportBucket9737FEC2"
          ],
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "ServiceToken": {
              "Ref": "referencetoTestInstanceAutoDeleteS3ObjectsNestedStackAutoDeleteS3ObjectsNestedStackResourceA27C7E41OutputsTestInstanceAutoDeleteS3ObjectsProviderframeworkonEventA39C1CF4Arn"
            },
            "bucket": {
              "Ref": "BulkImportBucket9737FEC2"
            }
          }
        }
      }
    },
    "BulkImportEMRCommon": {
      "Parameters": {
        "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceBulkImportEMRCommonEmrRoleCE2BA540Ref": {
          "Value": {
            "Ref": "EmrRoleBCD0A6A9"
          }
        },
        "TestInstanceBulkImportEMRCommonEc2Role5E4FFAE3Ref": {
          "Value": {
            "Ref": "Ec2Role2FD9A272"
          }
        }
      },
      "Resources": {
        "Ec2RoleDefaultPolicy99BC91F7": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "Ec2RoleDefaultPolicy99BC91F7",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                          },
                          "/index/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn"
                  }
                },
                {
                  "Action": [
                    "kms:Encrypt",
                    "kms:Decrypt",
                    "kms:ReEncrypt*",
                    "kms:GenerateDataKey*",
                    "kms:DescribeKey",
                    "kms:CreateGrant",
                    "kms:ListGrants",
                    "kms:RevokeGrant"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "EbsKeyD3FEE551",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars"
                        ]
                      ]
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "sqs:GetQueueUrl",
                    "sqs:SendMessage"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        "arn:",
                        {
                          "Ref": "AWS::Partition"
                        },
                        ":sqs:test-region:test-account:AWS-ElasticMapReduce-*"
                      ]
                    ]
                  }
                },
                {
                  "Action": [
                    "ec2:Describe*",
                    "elasticmapreduce:Describe*",
                    "elasticmapreduce:ListBootstrapActions",
                    "elasticmapreduce:ListClusters",
                    "elasticmapreduce:ListInstanceGroups",
                    "elasticmapreduce:ListInstances",
                    "elasticmapreduce:ListSteps",
                    "cloudwatch:*",
                    "s3:GetObject*"
                  ],
                  "Effect": "Allow",
                  "Resource": "*"
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "Roles": [
              {
                "Ref": "Ec2Role2FD9A272"
              }
            ]
          }
        },
        "CustomEMRManagedPolicy4CB9430E": {
          "Type": "AWS::IAM::ManagedPolicy",
          "Properties": {
            "ManagedPolicyName": "sleeper-test-instance-bulk-import-emr-in-vpc",
            "Path": "/",
            "Description": "Custom policy for EMR bulk import to operate in VPC",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "ec2:CreateSecurityGroup",
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        "arn:",
                        {
                          "Ref": "AWS::Partition"
                        },
                        ":ec2:test-region:test-account:vpc/vpc-12345"
                      ]
                    ]
                  },
                  "Sid": "CreateSecurityGroupInVPC"
                },
                {
                  "Action": [
                    "ec2:CreateNetworkInterface",
                    "ec2:RunInstances",
                    "ec2:CreateFleet",
                    "ec2:CreateLaunchTemplate",
                    "ec2:CreateLaunchTemplateVersion"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        "arn:",
                        {
                          "Ref": "AWS::Partition"
                        },
                        ":ec2:test-region:test-account:subnet/test-subnet"
                      ]
                    ]
                  },
                  "Sid": "ManageResourcesInSubnet"
                },
                {
                  "Action": "iam:PassRole",
                  "Condition": {
                    "StringLike": {
                      "iam:PassedToService": "ec2.amazonaws.com*"
                    }
                  },
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "Ec2Role2FD9A272",
                      "Arn"
                    ]
                  },
                  "Sid": "PassEc2Role"
                }
              ]
            }
          }
        },
        "DefaultEMRServicePolicyF26A3321": {
          "Type": "AWS::IAM::ManagedPolicy",
          "Properties": {
            "ManagedPolicyName": "sleeper-test-instance-bulk-import-emr",
            "Path": "/",
            "Description": "Policy required for Sleeper Bulk import EMR cluster, based on the AmazonEMRServicePolicy_v2 policy",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "iam:CreateServiceLinkedRole",
                  "Condition": {
                    "StringLike": {
                      "iam:AWSServiceName": "spot.amazonaws.com"
                    }
                  },
                  "Effect": "Allow",
                  "Resource": "arn:aws:iam::*:role/aws-service-role/spot.amazonaws.com/AWSServiceRoleForEC2Spot*",
                  "Sid": "CreateSpotServiceLinkedRole"
                },
                {
                  "Action": [
                    "ec2:CreateNetworkInterface",
                    "ec2:RunInstances",
                    "ec2:CreateFleet",
                    "ec2:CreateLaunchTemplate",
                    "ec2:CreateLaunchTemplateVersion"
                  ],
                  "Effect": "Allow",
                  "Resource": "arn:aws:ec2:*:*:security-group/*",
                  "Sid": "CreateInTaggedNetwork"
                },
                {
                  "Action": [
                    "ec2:CreateFleet",
                    "ec2:RunInstances",
                    "ec2:CreateLaunchTemplateVersion"
                  ],
                  "Condition": {
                    "StringEquals": {
                      "aws:RequestTag/for-use-with-amazon-emr-managed-policies": "true"
                    }
                  },
                  "Effect": "Allow",
                  "Resource": "arn:aws:ec2:*:*:launch-template/*",
                  "Sid": "CreateWithEMRTaggedLaunchTemplate"
                },
                {
                  "Action": "ec2:CreateLaunchTemplate",
                  "Condition": {
                    "StringEquals": {
                      "aws:RequestTag/for-use-with-amazon-emr-managed-policies": "true"
                    }
                  },
                  "Effect": "Allow",
                  "Resource": "arn:aws:ec2:*:*:launch-template/*",
                  "Sid": "CreateEMRTaggedLaunchTemplate"
                },
                {
                  "Action": [
                    "ec2:RunInstances",
                    "ec2:CreateFleet"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    "arn:aws:ec2:*:*:instance/*",
                    "arn:aws:ec2:*:*:volume/*"
                  ],
                  "Sid": "CreateEMRTaggedInstancesAndVolumes"
                },
                {
                  "Action": [
                    "ec2:RunInstances",
                    "ec2:CreateFleet",
                    "ec2:CreateLaunchTemplate",
                    "ec2:CreateLaunchTemplateVersion"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    "arn:aws:ec2:*:*:network-interface/*",
                    "arn:aws:ec2:*::image/ami-*",
                    "arn:aws:ec2:*:*:key-pair/*",
                    "arn:aws:ec2:*:*:capacity-reservation/*",
                    "arn:aws:ec2:*:*:placement-group/EMR_*",
                    "arn:aws:ec2:*:*:fleet/*",
                    "arn:aws:ec2:*:*:dedicated-host/*",
                    "arn:aws:resource-groups:*:*:group/*"
                  ],
                  "Sid": "ResourcesToLaunchEC2"
                },
                {
                  "Action": [
                    "ec2:CreateLaunchTemplateVersion",
                    "ec2:DeleteLaunchTemplate",
                    "ec2:DeleteNetworkInterface",
                    "ec2:ModifyInstanceAttribute",
                    "ec2:TerminateInstances"
                  ],
                  "Effect": "Allow",
                  "Resource": "*",
                  "Sid": "ManageEMRTaggedResources"
                },
                {
                  "Action": [
                    "ec2:CreateTags",
                    "ec2:DeleteTags"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    "arn:aws:ec2:*:*:instance/*",
                    "arn:aws:ec2:*:*:volume/*",
                    "arn:aws:ec2:*:*:network-interface/*",
                    "arn:aws:ec2:*:*:launch-template/*"
                  ],
                  "Sid": "ManageTagsOnEMRTaggedResources"
                },
                {
                  "Action": "ec2:CreateNetworkInterface",
                  "Effect": "Allow",
                  "Resource": "arn:aws:ec2:*:*:network-interface/*",
                  "Sid": "CreateNetworkInterfaceNeededForPrivateSubnet"
                },
                {
                  "Action": "ec2:CreateTags",
                  "Condition": {
                    "StringEquals": {
                      "ec2:CreateAction": [
                        "RunInstances",
                        "CreateFleet",
                        "CreateLaunchTemplate",
                        "CreateNetworkInterface"
                      ]
                    }
                  },
                  "Effect": "Allow",
                  "Resource": [
                    "arn:aws:ec2:*:*:network-interface/*",
                    "arn:aws:ec2:*:*:instance/*",
                    "arn:aws:ec2:*:*:volume/*",
                    "arn:aws:ec2:*:*:launch-template/*"
                  ],
                  "Sid": "TagOnCreateTaggedEMRResources"
                },
                {
                  "Action": [
                    "ec2:CreateTags",
                    "ec2:DeleteTags"
                  ],
                  "Effect": "Allow",
                  "Resource": "arn:aws:ec2:*:*:placement-group/EMR_*",
                  "Sid": "TagPlacementGroups"
                },
                {
                  "Action": [
                    "ec2:DescribeAccountAttributes",
                    "ec2:DescribeCapacityReservations",
                    "ec2:DescribeDhcpOptions",
                    "ec2:DescribeInstances",
                    "ec2:DescribeLaunchTemplates",
                    "ec2:DescribeNetworkAcls",
                    "ec2:DescribeNetworkInterfaces",
                    "ec2:DescribePlacementGroups",
                    "ec2:DescribeRouteTables",
                    "ec2:DescribeSecurityGroups",
                    "ec2:DescribeSubnets",
                    "ec2:DescribeVolumes",
                    "ec2:DescribeVolumeStatus",
                    "ec2:DescribeVpcAttribute",
                    "ec2:DescribeVpcEndpoints",
                    "ec2:DescribeVpcs"
                  ],
                  "Effect": "Allow",
                  "Resource": "*",
                  "Sid": "ListActionsForEC2Resources"
                },
                {
                  "Action": "ec2:CreateSecurityGroup",
                  "Condition": {
                    "StringEquals": {
                      "aws:RequestTag/for-use-with-amazon-emr-managed-policies": "true"
                    }
                  },
                  "Effect": "Allow",
                  "Resource": "arn:aws:ec2:*:*:security-group/*",
                  "Sid": "CreateDefaultSecurityGroupWithEMRTags"
                },
                {
                  "Action": "ec2:CreateTags",
                  "Condition": {
                    "StringEquals": {
                      "aws:RequestTag/for-use-with-amazon-emr-managed-policies": "true",
                      "ec2:CreateAction": "CreateSecurityGroup"
                    }
                  },
                  "Effect": "Allow",
                  "Resource": "arn:aws:ec2:*:*:security-group/*",
                  "Sid": "TagOnCreateDefaultSecurityGroupWithEMRTags"
                },
                {
                  "Action": [
                    "ec2:AuthorizeSecurityGroupEgress",
                    "ec2:AuthorizeSecurityGroupIngress",
                    "ec2:RevokeSecurityGroupEgress",
                    "ec2:RevokeSecurityGroupIngress"
                  ],
                  "Condition": {
                    "StringEquals": {
                      "aws:ResourceTag/for-use-with-amazon-emr-managed-policies": "true"
                    }
                  },
                  "Effect": "Allow",
                  "Resource": "*",
                  "Sid": "ManageSecurityGroups"
                },
                {
                  "Action": "ec2:CreatePlacementGroup",
                  "Effect": "Allow",
                  "Resource": "arn:aws:ec2:*:*:placement-group/EMR_*",
                  "Sid": "CreateEMRPlacementGroups"
                },
                {
                  "Action": "ec2:DeletePlacementGroup",
                  "Effect": "Allow",
                  "Resource": "*",
                  "Sid": "DeletePlacementGroups"
                },
                {
                  "Action": [
                    "application-autoscaling:DeleteScalingPolicy",
                    "application-autoscaling:DeregisterScalableTarget",
                    "application-autoscaling:DescribeScalableTargets",
                    "application-autoscaling:DescribeScalingPolicies",
                    "application-autoscaling:PutScalingPolicy",
                    "application-autoscaling:RegisterScalableTarget"
                  ],
                  "Effect": "Allow",
                  "Resource": "*",
                  "Sid": "AutoScaling"
                },
                {
                  "Action": "resource-groups:ListGroupResources",
                  "Effect": "Allow",
                  "Resource": "*",
                  "Sid": "ResourceGroupsForCapacityReservations"
                },
                {
                  "Action": [
                    "cloudwatch:PutMetricAlarm",
                    "cloudwatch:DeleteAlarms",
                    "cloudwatch:DescribeAlarms"
                  ],
                  "Effect": "Allow",
                  "Resource": "arn:aws:cloudwatch:*:*:alarm:*_EMR_Auto_Scaling",
                  "Sid": "AutoScalingCloudWatch"
                },
                {
                  "Action": "iam:PassRole",
                  "Condition": {
                    "StringLike": {
                      "iam:PassedToService": "application-autoscaling.amazonaws.com*"
                    }
                  },
                  "Effect": "Allow",
                  "Resource": "arn:aws:iam::*:role/EMR_AutoScaling_DefaultRole",
                  "Sid": "PassRoleForAutoScaling"
                }
              ]
            }
          }
        },
        "EMRSecurityConfigurationJSONObject4F16D2A3": {
          "Type": "Custom::AWSCDKCfnJson",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "ServiceToken": {
              "Fn::GetAtt": [
                "AWSCDKCfnUtilsProviderCustomResourceProviderHandlerCF82AA57",
                "Arn"
              ]
            },
            "Value": {
              "Fn::Join": [
                "",
                [
                  "\"{\\n  \\\"InstanceMetadataServiceConfiguration\\\": {\\n    \\\"MinimumInstanceMetadataServiceVersion\\\": 2,\\n    \\\"HttpPutResponseHopLimit\\\": 1\\n  },\\n  \\\"EncryptionConfiguration\\\": {\\n    \\\"EnableInTransitEncryption\\\": false,\\n    \\\"EnableAtRestEncryption\\\": true,\\n    \\\"AtRestEncryptionConfiguration\\\": {\\n      \\\"LocalDiskEncryptionConfiguration\\\": {\\n        \\\"EnableEbsEncryption\\\": true,\\n        \\\"EncryptionKeyProviderType\\\": \\\"AwsKms\\\",\\n        \\\"AwsKmsKey\\\": \\\"",
                  {
                    "Fn::GetAtt": [
                      "EbsKeyD3FEE551",
                      "Arn"
                    ]
                  },
                  "\\\"\\n      }\\n    }\\n  }\\n}\""
                ]
              ]
            }
          }
        },
        "AWSCDKCfnUtilsProviderCustomResourceProviderHandlerCF82AA57": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "AWSCDKCfnUtilsProviderCustomResourceProviderRoleFE0EE867"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "AWSCDKCfnUtilsProviderCustomResourceProviderRoleFE0EE867",
                "Arn"
              ]
            },
            "MemorySize": 128,
            "Runtime": "nodejs18.x",
            "Timeout": 900,
            "Handler": "__entrypoint__.handler",
            "Code": {
              "S3Bucket": "cdk-hnb659fds-assets-test-account-test-region",
              "S3Key": "c398d076c966a47ee4ef862fbaf5ea530bf035b867a0195292c99f77b323ed80.zip"
            }
          }
        },
        "EMRSecurityConfiguration": {
          "Type": "AWS::EMR::SecurityConfiguration",
          "Properties": {
            "SecurityConfiguration": {
              "Fn::GetAtt": [
                "EMRSecurityConfigurationJSONObject4F16D2A3",
                "Value"
              ]
            },
            "Name": "sleeper-test-instance-EMRSecurityConfigurationProps"
          }
        },
        "EmrRoleDefaultPolicyCB5C0412": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "EmrRoleDefaultPolicyCB5C0412",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "kms:Encrypt",
                    "kms:Decrypt",
                    "kms:ReEncrypt*",
                    "kms:GenerateDataKey*",
                    "kms:DescribeKey",
                    "kms:CreateGrant",
                    "kms:ListGrants",
                    "kms:RevokeGrant"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "EbsKeyD3FEE551",
                      "Arn"
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "EmrRoleBCD0A6A9"
              }
            ]
          }
        },
        "EC2InstanceProfile": {
          "Type": "AWS::IAM::InstanceProfile",
          "Properties": {
            "InstanceProfileName": {
              "Ref": "Ec2Role2FD9A272"
            },
            "Roles": [
              {
                "Ref": "Ec2Role2FD9A272"
              }
            ]
          }
        },
        "EmrRoleBCD0A6A9": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Ref": "DefaultEMRServicePolicyF26A3321"
              },
              {
                "Ref": "CustomEMRManagedPolicy4CB9430E"
              }
            ],
            "RoleName": "sleeper-test-instance-EMR-Role",
            "Description": "The role assumed by the Bulk import clusters",
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "elasticmapreduce.amazonaws.com"
                  }
                }
              ]
            }
          }
        },
        "AWSCDKCfnUtilsProviderCustomResourceProviderRoleFE0EE867": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Sub": "arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            }
          }
        },
        "Ec2Role2FD9A272": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/AmazonSSMManagedInstanceCore"
                  ]
                ]
              }
            ],
            "RoleName": "sleeper-test-instance-bulk-import-emr-ec2",
            "Description": "The role assumed by the EC2 instances in EMR bulk import clusters",
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "ec2.amazonaws.com"
                  }
                }
              ]
            }
          }
        },
        "EbsKeyD3FEE551": {
          "Type": "AWS::KMS::Key",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "Description": "Key used to encrypt data at rest in the local filesystem in AWS EMR for Sleeper.",
            "PendingWindowInDays": 7,
            "KeyPolicy": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "kms:*",
                  "Effect": "Allow",
                  "Principal": {
                    "AWS": {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":iam::test-account:root"
                        ]
                      ]
                    }
                  },
                  "Resource": "*"
                }
              ]
            },
            "EnableKeyRotation": true
          }
        }
      }
    },
    "AutoStopEmrServerlessApplication": {
      "Parameters": {
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautostopemrserverlessproviderE1BCC092Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautostopemrserverless077CD512Ref": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceAutoStopEmrServerlessApplicationProviderframeworkonEvent3BEA6713Arn": {
          "Value": {
            "Fn::GetAtt": [
              "ProviderframeworkonEvent83C1D0A7",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "LambdaServiceRoleDefaultPolicyDAE46E21": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "LambdaServiceRoleDefaultPolicyDAE46E21",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "emr-serverless:ListJobRuns",
                    "emr-serverless:CancelJobRun",
                    "emr-serverless:StopApplication",
                    "emr-serverless:GetApplication"
                  ],
                  "Effect": "Allow",
                  "Resource": "*"
                }
              ]
            },
            "Roles": [
              {
                "Ref": "LambdaServiceRoleA8ED4D3B"
              }
            ]
          }
        },
        "LambdaServiceRoleA8ED4D3B": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoStopEmrServerlessApplication"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "ProviderframeworkonEventServiceRoleDefaultPolicy48CD2133": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "ProviderframeworkonEventServiceRoleDefaultPolicy48CD2133",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "LambdaCurrentVersionDF706F6A74eaad4867a8ddc398052cf0543134d9"
                  }
                },
                {
                  "Action": "lambda:GetFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "LambdaCurrentVersionDF706F6A74eaad4867a8ddc398052cf0543134d9"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "ProviderframeworkonEventServiceRole9FF04296"
              }
            ]
          }
        },
        "ProviderframeworkonEventServiceRole9FF04296": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoStopEmrServerlessApplication"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "LambdaD247545B": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "LambdaServiceRoleDefaultPolicyDAE46E21",
            "LambdaServiceRoleA8ED4D3B"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "LambdaServiceRoleA8ED4D3B",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-auto-stop-emr-serverless",
            "MemorySize": 2048,
            "Runtime": "java17",
            "Description": "Lambda for auto-stopping EMR Serverless application",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautostopemrserverless077CD512Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED"
              }
            },
            "Handler": "sleeper.cdk.custom.AutoStopEmrServerlessApplicationLambda::handleEvent",
            "Code": {
              "S3ObjectVersion": "cdk-custom-resources-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "cdk-custom-resources-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoStopEmrServerlessApplication"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "LambdaCurrentVersionDF706F6A74eaad4867a8ddc398052cf0543134d9": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "LambdaD247545B"
            }
          }
        },
        "ProviderframeworkonEvent83C1D0A7": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "ProviderframeworkonEventServiceRoleDefaultPolicy48CD2133",
            "ProviderframeworkonEventServiceRole9FF04296"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "ProviderframeworkonEventServiceRole9FF04296",
                "Arn"
              ]
            },
            "Runtime": "nodejs22.x",
            "Description": "AWS CDK resource provider framework - onEvent (TestInstance/AutoStopEmrServerlessApplication/Provider)",
            "Timeout": 900,
            "LoggingConfig": {
              "LogFormat": "JSON",
              "ApplicationLogLevel": "FATAL",
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingautostopemrserverlessproviderE1BCC092Ref"
              }
            },
            "Environment": {
              "Variables": {
                "USER_ON_EVENT_FUNCTION_ARN": {
                  "Ref": "LambdaCurrentVersionDF706F6A74eaad4867a8ddc398052cf0543134d9"
                }
              }
            },
            "Handler": "framework.onEvent",
            "Code": {
              "S3Bucket": "cdk-hnb659fds-assets-test-account-test-region",
              "S3Key": "07a90cc3efdfc34da22208dcd9d211f06f5b0e01b21e778edc7c3966b1f61d57.zip"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "AutoStopEmrServerlessApplication"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "BulkImportEMRServerless": {
      "Parameters": {
        "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceAutoStopEmrServerlessApplicationNestedStackAutoStopEmrServerlessApplicationNestedStackResourceEC7ABF75OutputsTestInstanceAutoStopEmrServerlessApplicationProviderframeworkonEvent3BEA6713Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingbulkimportEMRServerlessstart5F08C53BRef": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceBulkImportEMRServerless6FCED42BApplicationId": {
          "Value": {
            "Fn::GetAtt": [
              "BulkImportEMRServerless",
              "ApplicationId"
            ]
          }
        },
        "TestInstanceBulkImportEMRServerlessEmrServerlessRole192390D8Arn": {
          "Value": {
            "Fn::GetAtt": [
              "EmrServerlessRole8826DE76",
              "Arn"
            ]
          }
        },
        "TestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FRef": {
          "Value": {
            "Ref": "BulkImportEMRServerlessJobQueueFFB71EFA"
          }
        },
        "TestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobDeadLetterQueueA9E923E6QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "BulkImportEMRServerlessJobDeadLetterQueueBC1E4F91",
              "QueueName"
            ]
          }
        },
        "TestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn": {
          "Value": {
            "Fn::GetAtt": [
              "BulkImportEMRServerlessJobQueueFFB71EFA",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "EMRServerlessCA653BCB": {
          "Type": "AWS::EC2::SecurityGroup",
          "Properties": {
            "GroupDescription": "Security Group used by EMR Serverless",
            "VpcId": "vpc-12345",
            "SecurityGroupEgress": [
              {
                "CidrIp": "0.0.0.0/0",
                "Description": "Allow all outbound traffic by default",
                "IpProtocol": "-1"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "BulkImportEMRServerless"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "BulkImportEMRServerlessUndeliveredJobsAlarm86408AC3": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "BulkImportEMRServerlessJobDeadLetterQueueBC1E4F91",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for starting a EMRServerless Spark job",
            "AlarmName": {
              "Fn::GetAtt": [
                "BulkImportEMRServerlessJobDeadLetterQueueBC1E4F91",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "BulkImportEMRServerless"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "EmrServerlessRoleDefaultPolicy0AD017A7": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "EmrServerlessRoleDefaultPolicy0AD017A7",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                          },
                          "/index/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars"
                        ]
                      ]
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars/*"
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "Roles": [
              {
                "Ref": "EmrServerlessRole8826DE76"
              }
            ]
          }
        },
        "BulkImportEMRServerlessJobStarterCurrentVersionEF1FE36D1c8dbce3ad781887901860f855c9d94a": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "BulkImportEMRServerlessJobStarter5DE5995C"
            }
          }
        },
        "BulkImportEMRServerlessJobStarter5DE5995C": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "BulkImportEMRServerlessJobStarterServiceRoleDefaultPolicy62E0A580",
            "BulkImportEMRServerlessJobStarterServiceRole9C297B99"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "BulkImportEMRServerlessJobStarterServiceRole9C297B99",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-bulk-import-EMRServerless-start",
            "MemorySize": 4096,
            "Runtime": "java17",
            "Description": "Function to start EMRServerless bulk import jobs",
            "Timeout": 120,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingbulkimportEMRServerlessstart5F08C53BRef"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "BULK_IMPORT_PLATFORM": "EMRServerless",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.bulkimport.starter.BulkImportStarterLambda",
            "Code": {
              "S3ObjectVersion": "bulk-import-starter-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "bulk-import-starter-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "BulkImportEMRServerless"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "BulkImportEMRServerlessJobStarterServiceRoleDefaultPolicy62E0A580": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "BulkImportEMRServerlessJobStarterServiceRoleDefaultPolicy62E0A580",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "BulkImportEMRServerlessJobQueueFFB71EFA",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                          },
                          "/index/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BAArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": "iam:PassRole",
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "EmrServerlessRole8826DE76",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": "elasticmapreduce:RunJobFlow",
                  "Condition": {
                    "StringEquals": {
                      "elasticmapreduce:RequestTag/InstanceID": "test-instance"
                    }
                  },
                  "Effect": "Allow",
                  "Resource": "*"
                },
                {
                  "Action": "emr-serverless:StartJobRun",
                  "Effect": "Allow",
                  "Resource": "*",
                  "Sid": "EmrServerlessStartJobRun"
                }
              ]
            },
            "Roles": [
              {
                "Ref": "BulkImportEMRServerlessJobStarterServiceRole9C297B99"
              }
            ]
          }
        },
        "BulkImportEMRServerlessJobDeadLetterQueueBC1E4F91": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "QueueName": "sleeper-test-instance-BulkImportEMRServerlessDLQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "BulkImportEMRServerless"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "BulkImportEMRServerlessJobStarterSqsEventSourceTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueue170106A686F73244": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1,
            "FunctionName": {
              "Ref": "BulkImportEMRServerlessJobStarter5DE5995C"
            },
            "ScalingConfig": {
              "MaximumConcurrency": 2
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "BulkImportEMRServerlessJobQueueFFB71EFA",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "BulkImportEMRServerless"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "BulkImportEMRServerlessJobQueueFFB71EFA": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "BulkImportEMRServerlessJobDeadLetterQueueBC1E4F91",
                  "Arn"
                ]
              }
            },
            "VisibilityTimeout": 180,
            "QueueName": "sleeper-test-instance-BulkImportEMRServerlessQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "BulkImportEMRServerless"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "BulkImportEMRServerlessAutostop": {
          "Type": "Custom::AutoStopEmrServerlessApplication",
          "DependsOn": [
            "BulkImportEMRServerless"
          ],
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "ServiceToken": {
              "Ref": "referencetoTestInstanceAutoStopEmrServerlessApplicationNestedStackAutoStopEmrServerlessApplicationNestedStackResourceEC7ABF75OutputsTestInstanceAutoStopEmrServerlessApplicationProviderframeworkonEvent3BEA6713Arn"
            },
            "applicationId": {
              "Fn::GetAtt": [
                "BulkImportEMRServerless",
                "ApplicationId"
              ]
            }
          }
        },
        "BulkImportEMRServerlessJobStarterServiceRole9C297B99": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "BulkImportEMRServerless"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "EmrServerlessRole8826DE76": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Ref": "CustomEMRServerlessServicePolicyA3B90C3C"
              }
            ],
            "RoleName": "sleeper-test-instance-bulk-import-emr-serverless",
            "Description": "The role assumed by the Bulk import EMR Serverless Application",
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "emr-serverless.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "BulkImportEMRServerless"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "BulkImportEMRServerless": {
          "Type": "AWS::EMRServerless::Application",
          "Properties": {
            "AutoStartConfiguration": {
              "Enabled": true
            },
            "Type": "Spark",
            "Architecture": "X86_64",
            "InitialCapacity": [],
            "AutoStopConfiguration": {
              "Enabled": true,
              "IdleTimeoutMinutes": 15
            },
            "NetworkConfiguration": {
              "SecurityGroupIds": [
                {
                  "Fn::GetAtt": [
                    "EMRServerlessCA653BCB",
                    "GroupId"
                  ]
                }
              ],
              "SubnetIds": [
                "test-subnet"
              ]
            },
            "ReleaseLabel": "emr-1.2.3",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "BulkImportEMRServerless"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Name": "sleeper-test-instance"
          }
        },
        "CustomEMRServerlessServicePolicyA3B90C3C": {
          "Type": "AWS::IAM::ManagedPolicy",
          "Properties": {
            "ManagedPolicyName": "sleeper-test-instance-bulk-import-emr-serverless",
            "Path": "/",
            "Description": "Policy required for Sleeper Bulk import EMR Serverless cluster, based on the AmazonEMRServicePolicy_v2 policy",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject",
                    "s3:ListBucket"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    "arn:aws:s3:::*.elasticmapreduce",
                    "arn:aws:s3:::*.elasticmapreduce/*"
                  ],
                  "Sid": "PolicyStatementProps"
                },
                {
                  "Action": [
                    "glue:GetDatabase",
                    "glue:CreateDatabase",
                    "glue:GetDataBases",
                    "glue:CreateTable",
                    "glue:GetTable",
                    "glue:UpdateTable",
                    "glue:DeleteTable",
                    "glue:GetTables",
                    "glue:GetPartition",
                    "glue:GetPartitions",
                    "glue:CreatePartition",
                    "glue:BatchCreatePartition",
                    "glue:GetUserDefinedFunctions"
                  ],
                  "Effect": "Allow",
                  "Resource": "*",
                  "Sid": "GlueCreateAndReadDataCatalog"
                }
              ]
            }
          }
        }
      }
    },
    "EmrStudio": {
      "Parameters": {
        "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BARef": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceEmrStudioTestInstanceEmrStudio7355CF8DC8B80669Url": {
          "Value": {
            "Fn::GetAtt": [
              "TestInstanceEmrStudio7355CF8D",
              "Url"
            ]
          }
        }
      },
      "Resources": {
        "EmrServerlessStudioServiceRole5838474E": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/AmazonS3FullAccess"
                  ]
                ]
              },
              {
                "Ref": "CustomEMRServerlessServicePolicyA3B90C3C"
              }
            ],
            "RoleName": "sleeper-test-instance-EMR-Serverless-Studio-Role",
            "Description": "The role assumed by the Bulk import EMR Serverless Application",
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "elasticmapreduce.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "EmrStudio"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "TestInstanceEmrStudio7355CF8D": {
          "Type": "AWS::EMR::Studio",
          "Properties": {
            "WorkspaceSecurityGroupId": {
              "Fn::GetAtt": [
                "EmrServerlessStudioWorkspaceSecurityGroupAF5E4DC6",
                "GroupId"
              ]
            },
            "Description": "EMR Studio to be used to access EMR Serverless",
            "ServiceRole": {
              "Fn::GetAtt": [
                "EmrServerlessStudioServiceRole5838474E",
                "Arn"
              ]
            },
            "VpcId": "vpc-12345",
            "EngineSecurityGroupId": {
              "Fn::GetAtt": [
                "EmrServerlessStudioDefaultEngineSecurityGroup9D25FD41",
                "GroupId"
              ]
            },
            "DefaultS3Location": {
              "Fn::Join": [
                "",
                [
                  "s3://",
                  {
                    "Ref": "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BARef"
                  }
                ]
              ]
            },
            "SubnetIds": [
              "test-subnet"
            ],
            "AuthMode": "IAM",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "EmrStudio"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Name": "sleeper-test-instance-emr-studio"
          }
        },
        "EmrServerlessStudioWorkspaceSecurityGrouptoTestInstanceEmrStudioEmrServerlessStudioDefaultEngineSecurityGroupCE4F903718888121D735D": {
          "Type": "AWS::EC2::SecurityGroupEgress",
          "Properties": {
            "Description": "to TestInstanceEmrStudioEmrServerlessStudioDefaultEngineSecurityGroupCE4F9037:18888",
            "FromPort": 18888,
            "ToPort": 18888,
            "IpProtocol": "tcp",
            "DestinationSecurityGroupId": {
              "Fn::GetAtt": [
                "EmrServerlessStudioDefaultEngineSecurityGroup9D25FD41",
                "GroupId"
              ]
            },
            "GroupId": {
              "Fn::GetAtt": [
                "EmrServerlessStudioWorkspaceSecurityGroupAF5E4DC6",
                "GroupId"
              ]
            }
          }
        },
        "EmrServerlessStudioWorkspaceSecurityGroupAF5E4DC6": {
          "Type": "AWS::EC2::SecurityGroup",
          "Properties": {
            "GroupDescription": "Workspace Security Group used by EMR Studio",
            "GroupName": "sleeper-test-instance-emr-serverless-studio-workspace-security-group",
            "VpcId": "vpc-12345",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "EmrStudio"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "EmrServerlessStudioDefaultEngineSecurityGroup9D25FD41": {
          "Type": "AWS::EC2::SecurityGroup",
          "Properties": {
            "GroupDescription": "Default Engine Security Group used by EMR Studio",
            "GroupName": "sleeper-test-instance-emr-serverless-studio-default-engine-security-group",
            "VpcId": "vpc-12345",
            "SecurityGroupEgress": [
              {
                "CidrIp": "255.255.255.255/32",
                "Description": "Disallow all traffic",
                "FromPort": 252,
                "IpProtocol": "icmp",
                "ToPort": 86
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "EmrStudio"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CustomEMRServerlessServicePolicyA3B90C3C": {
          "Type": "AWS::IAM::ManagedPolicy",
          "Properties": {
            "ManagedPolicyName": "sleeper-test-instance-Emr-Serverless-Studio-Service-Actions",
            "Path": "/",
            "Description": "A policy to be used by EMR Studio to access EMR Serverless",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "elasticmapreduce:ListInstances",
                    "elasticmapreduce:DescribeCluster",
                    "elasticmapreduce:ListSteps"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    "arn:aws:s3:::*.elasticmapreduce",
                    "arn:aws:s3:::*.elasticmapreduce/*"
                  ],
                  "Sid": "EmrServerlessStudioServiceActions"
                }
              ]
            }
          }
        }
      }
    },
    "GarbageCollector": {
      "Parameters": {
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLogginggarbagecollector6DFCBB5ERef": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLogginggarbagecollectortrigger27E59B36Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceGarbageCollectorGarbageCollectorPeriodicTrigger26CF0C4ERef": {
          "Value": {
            "Ref": "GarbageCollectorPeriodicTrigger07D45AFB"
          }
        },
        "TestInstanceGarbageCollectorGarbageCollectorTriggerCurrentVersionAA3B84DDVersion": {
          "Value": {
            "Fn::GetAtt": [
              "GarbageCollectorTriggerCurrentVersionF013FA48cf84d7833039edf975b167b7f25d568c",
              "Version"
            ]
          }
        },
        "TestInstanceGarbageCollectorGCJobQueueD56E334DRef": {
          "Value": {
            "Ref": "GCJobQueue9495E51F"
          }
        },
        "TestInstanceGarbageCollectorGarbageCollectorTriggerCurrentVersionAA3B84DDRef": {
          "Value": {
            "Ref": "GarbageCollectorTriggerCurrentVersionF013FA48cf84d7833039edf975b167b7f25d568c"
          }
        },
        "TestInstanceGarbageCollectorGCJobQueueD56E334DArn": {
          "Value": {
            "Fn::GetAtt": [
              "GCJobQueue9495E51F",
              "Arn"
            ]
          }
        },
        "TestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313Arn": {
          "Value": {
            "Fn::GetAtt": [
              "GCJobDeadLetterQueueD1A1D063",
              "Arn"
            ]
          }
        },
        "TestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "GCJobDeadLetterQueueD1A1D063",
              "QueueName"
            ]
          }
        },
        "TestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313Ref": {
          "Value": {
            "Ref": "GCJobDeadLetterQueueD1A1D063"
          }
        },
        "TestInstanceGarbageCollectorGarbageCollectorTrigger48F33D6BRef": {
          "Value": {
            "Ref": "GarbageCollectorTrigger8742143A"
          }
        }
      },
      "Resources": {
        "GarbageCollectorLambdaServiceRoleE60E53E0": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "GarbageCollector"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "GarbageCollectorPeriodicTrigger07D45AFB": {
          "Type": "AWS::Events::Rule",
          "Properties": {
            "ScheduleExpression": "rate(15 minutes)",
            "Description": "Triggers garbage collection to delete unused files",
            "State": "ENABLED",
            "Targets": [
              {
                "Arn": {
                  "Ref": "GarbageCollectorTriggerCurrentVersionF013FA48cf84d7833039edf975b167b7f25d568c"
                },
                "Id": "Target0"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "GarbageCollector"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Name": "test-instance-GarbageCollectorPeriodicTrigger"
          }
        },
        "GarbageCollectorLambdaServiceRoleDefaultPolicyB78DB9A0": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "GarbageCollectorLambdaServiceRoleDefaultPolicyB78DB9A0",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": "s3:DeleteObject*",
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        {
                          "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                        },
                        "/*"
                      ]
                    ]
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  }
                },
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "GCJobQueue9495E51F",
                      "Arn"
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "GarbageCollectorLambdaServiceRoleE60E53E0"
              }
            ]
          }
        },
        "GCJobQueue9495E51F": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "GCJobDeadLetterQueueD1A1D063",
                  "Arn"
                ]
              }
            },
            "FifoQueue": true,
            "VisibilityTimeout": 840,
            "QueueName": "sleeper-test-instance-GCJobQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "GarbageCollector"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "GCJobDeadLetterQueueD1A1D063": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "FifoQueue": true,
            "QueueName": "sleeper-test-instance-GCJobDLQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "GarbageCollector"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "GarbageCollectorLambdaE120BD31": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "GarbageCollectorLambdaServiceRoleDefaultPolicyB78DB9A0",
            "GarbageCollectorLambdaServiceRoleE60E53E0"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "GarbageCollectorLambdaServiceRoleE60E53E0",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-garbage-collector",
            "MemorySize": 4096,
            "Runtime": "java17",
            "Description": "Scan the state store looking for files that need deleting and delete them",
            "Timeout": 840,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLogginggarbagecollector6DFCBB5ERef"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.garbagecollector.GarbageCollectorLambda::handleRequest",
            "Code": {
              "S3ObjectVersion": "garbage-collector-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "lambda-garbagecollector-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "GarbageCollector"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "GarbageCollectorAlarm8532C8FE": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "GCJobDeadLetterQueueD1A1D063",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for garbage collection",
            "AlarmName": {
              "Fn::GetAtt": [
                "GCJobDeadLetterQueueD1A1D063",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "GarbageCollector"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "GarbageCollectorTriggerCurrentVersionF013FA48cf84d7833039edf975b167b7f25d568c": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "GarbageCollectorTrigger8742143A"
            }
          }
        },
        "GarbageCollectorTrigger8742143A": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "GarbageCollectorTriggerServiceRoleDefaultPolicyD69CF9B9",
            "GarbageCollectorTriggerServiceRoleCF52B43F"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "GarbageCollectorTriggerServiceRoleCF52B43F",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-garbage-collector-trigger",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "Creates batches of Sleeper tables to perform garbage collection for and puts them on a queue to be processed",
            "Timeout": 60,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLogginggarbagecollectortrigger27E59B36Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.garbagecollector.GarbageCollectorTriggerLambda::handleRequest",
            "ReservedConcurrentExecutions": 1,
            "Code": {
              "S3ObjectVersion": "garbage-collector-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "lambda-garbagecollector-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "GarbageCollector"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "GarbageCollectorPeriodicTriggerAllowEventRuleTestInstanceGarbageCollectorGarbageCollectorTriggerCurrentVersion008387AF2234C2CD": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Ref": "GarbageCollectorTriggerCurrentVersionF013FA48cf84d7833039edf975b167b7f25d568c"
            },
            "Action": "lambda:InvokeFunction",
            "SourceArn": {
              "Fn::GetAtt": [
                "GarbageCollectorPeriodicTrigger07D45AFB",
                "Arn"
              ]
            },
            "Principal": "events.amazonaws.com"
          }
        },
        "GarbageCollectorTriggerServiceRoleCF52B43F": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "GarbageCollector"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "GarbageCollectorLambdaCurrentVersion5949EF308e3abd48d7b156010ebf2197f6c0939a": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "GarbageCollectorLambdaE120BD31"
            }
          }
        },
        "GarbageCollectorLambdaCurrentVersionSqsEventSourceTestInstanceGarbageCollectorGCJobQueue9FB9C72249D73519": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "GarbageCollectorLambdaE120BD31"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "GarbageCollectorLambdaCurrentVersion5949EF308e3abd48d7b156010ebf2197f6c0939a",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "ScalingConfig": {
              "MaximumConcurrency": 10
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "GCJobQueue9495E51F",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "GarbageCollector"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "GarbageCollectorTriggerServiceRoleDefaultPolicyD69CF9B9": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "GarbageCollectorTriggerServiceRoleDefaultPolicyD69CF9B9",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "GCJobQueue9495E51F",
                      "Arn"
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "GarbageCollectorTriggerServiceRoleCF52B43F"
              }
            ]
          }
        }
      }
    },
    "Compaction": {
      "Parameters": {
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactiontaskscreatorB668B31ARef": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingFargateCompactionTasksCCB274EAArn": {
          "Type": "String"
        },
        "referencetoTestInstanceAutoStopEcsClusterTasksNestedStackAutoStopEcsClusterTasksNestedStackResource139EB607OutputsTestInstanceAutoStopEcsClusterTasksProviderframeworkonEvent8CDD6C7CArn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactioncommitbatcherC6D633F8Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactionjobdispatcher0ECCFF5ERef": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactionjobcreationhandlerDB342042Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactionjobcreationtrigger5B1465ADRef": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionTaskStatusTable9E1002EFArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingFargateCompactionTasksCCB274EARef": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceCompactionCompactionJobsCreationTriggerCurrentVersion5E26F8A5Version": {
          "Value": {
            "Fn::GetAtt": [
              "CompactionJobsCreationTriggerCurrentVersionD5B88BF67df5e338af7c15316c791575b666cf25",
              "Version"
            ]
          }
        },
        "TestInstanceCompactionCompactionCommitQueue4935D065Arn": {
          "Value": {
            "Fn::GetAtt": [
              "CompactionCommitQueueE037D242",
              "Arn"
            ]
          }
        },
        "TestInstanceCompactionCompactionCommitDLQ5632FB33Arn": {
          "Value": {
            "Fn::GetAtt": [
              "CompactionCommitDLQ3ECB6A83",
              "Arn"
            ]
          }
        },
        "TestInstanceCompactionCompactionJobCreationDLQB8A078BDRef": {
          "Value": {
            "Ref": "CompactionJobCreationDLQ4B25195B"
          }
        },
        "TestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Ref": {
          "Value": {
            "Ref": "CompactionJobDefinitionsQueueA2464A8F"
          }
        },
        "TestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DQueueName": {
          "Value": {
            "Fn::GetAtt": [
              "CompactionJobDefinitionsDeadLetterQueue52791FB3",
              "QueueName"
            ]
          }
        },
        "TestInstanceCompactionCompactionTasksCreatorFE525A06Ref": {
          "Value": {
            "Ref": "CompactionTasksCreator85FF715C"
          }
        },
        "TestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECQueueName": {
          "Value": {
            "Fn::GetAtt": [
              "PendingCompactionJobBatchDLQ375DAE33",
              "QueueName"
            ]
          }
        },
        "TestInstanceCompactionCompactionJobsCreationTriggerC181F572Ref": {
          "Value": {
            "Ref": "CompactionJobsCreationTrigger1EC35DE1"
          }
        },
        "TestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "CompactionJobDefinitionsQueueA2464A8F",
              "QueueName"
            ]
          }
        },
        "TestInstanceCompactionCompactionJobCreationPeriodicTrigger8BCEF486Ref": {
          "Value": {
            "Ref": "CompactionJobCreationPeriodicTrigger634BED93"
          }
        },
        "TestInstanceCompactionPendingCompactionJobBatchQCAC69541Arn": {
          "Value": {
            "Fn::GetAtt": [
              "PendingCompactionJobBatchQ39102D53",
              "Arn"
            ]
          }
        },
        "TestInstanceCompactionCompactionJobCreationDLQB8A078BDQueueName": {
          "Value": {
            "Fn::GetAtt": [
              "CompactionJobCreationDLQ4B25195B",
              "QueueName"
            ]
          }
        },
        "TestInstanceCompactionPendingCompactionJobBatchQCAC69541Ref": {
          "Value": {
            "Ref": "PendingCompactionJobBatchQ39102D53"
          }
        },
        "TestInstanceCompactionCompactionTasksCreationPeriodicTrigger39ADC4A9Ref": {
          "Value": {
            "Ref": "CompactionTasksCreationPeriodicTrigger83AF9165"
          }
        },
        "TestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Arn": {
          "Value": {
            "Fn::GetAtt": [
              "CompactionJobDefinitionsQueueA2464A8F",
              "Arn"
            ]
          }
        },
        "TestInstanceCompactionCompactionTasksCreatorCurrentVersion57E78EC7Ref": {
          "Value": {
            "Ref": "CompactionTasksCreatorCurrentVersion2E3420E49c34bcbf50dacb9cb1fd58f3dd9031d7"
          }
        },
        "TestInstanceCompactionCompactionJobCreationDLQB8A078BDArn": {
          "Value": {
            "Fn::GetAtt": [
              "CompactionJobCreationDLQ4B25195B",
              "Arn"
            ]
          }
        },
        "TestInstanceCompactionCompactionJobCreationQueue04DB707FArn": {
          "Value": {
            "Fn::GetAtt": [
              "CompactionJobCreationQueueE4E540E0",
              "Arn"
            ]
          }
        },
        "TestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DRef": {
          "Value": {
            "Ref": "CompactionJobDefinitionsDeadLetterQueue52791FB3"
          }
        },
        "CompactionStackQueueUrlKey": {
          "Value": {
            "Ref": "CompactionJobDefinitionsQueueA2464A8F"
          }
        },
        "TestInstanceCompactionCompactionJobCreationQueue04DB707FRef": {
          "Value": {
            "Ref": "CompactionJobCreationQueueE4E540E0"
          }
        },
        "TestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECRef": {
          "Value": {
            "Ref": "PendingCompactionJobBatchDLQ375DAE33"
          }
        },
        "CompactionStackDLQUrlKey": {
          "Value": {
            "Ref": "CompactionJobDefinitionsDeadLetterQueue52791FB3"
          }
        },
        "TestInstanceCompactionCompactionCommitDLQ5632FB33Ref": {
          "Value": {
            "Ref": "CompactionCommitDLQ3ECB6A83"
          }
        },
        "TestInstanceCompactionCompactionCluster66A74FE8Ref": {
          "Value": {
            "Ref": "CompactionCluster1D47602A"
          }
        },
        "TestInstanceCompactionCompactionCommitQueue4935D065Ref": {
          "Value": {
            "Ref": "CompactionCommitQueueE037D242"
          }
        },
        "TestInstanceCompactionCompactionJobsCreationTriggerCurrentVersion5E26F8A5Ref": {
          "Value": {
            "Ref": "CompactionJobsCreationTriggerCurrentVersionD5B88BF67df5e338af7c15316c791575b666cf25"
          }
        },
        "TestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECArn": {
          "Value": {
            "Fn::GetAtt": [
              "PendingCompactionJobBatchDLQ375DAE33",
              "Arn"
            ]
          }
        },
        "CompactionClusterName": {
          "Value": {
            "Ref": "CompactionCluster1D47602A"
          }
        },
        "TestInstanceCompactionCompactionCommitDLQ5632FB33QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "CompactionCommitDLQ3ECB6A83",
              "QueueName"
            ]
          }
        },
        "TestInstanceCompactionCompactionTasksCreatorCurrentVersion57E78EC7Version": {
          "Value": {
            "Fn::GetAtt": [
              "CompactionTasksCreatorCurrentVersion2E3420E49c34bcbf50dacb9cb1fd58f3dd9031d7",
              "Version"
            ]
          }
        },
        "TestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DArn": {
          "Value": {
            "Fn::GetAtt": [
              "CompactionJobDefinitionsDeadLetterQueue52791FB3",
              "Arn"
            ]
          }
        }
      },
      "Resources": {
        "CompactionCommitBatcher593C3BC4": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "CompactionCommitBatcherServiceRoleDefaultPolicy41E7E587",
            "CompactionCommitBatcherServiceRoleDC85A650"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "CompactionCommitBatcherServiceRoleDC85A650",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-compaction-commit-batcher",
            "MemorySize": 4096,
            "Runtime": "java17",
            "Description": "Gathers up compaction commits and combines them into a larger update to the state store. Used when committing compaction jobs asynchronously.",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactioncommitbatcherC6D633F8Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.statestore.lambda.committer.CompactionCommitBatcherLambda::handleRequest",
            "ReservedConcurrentExecutions": 2,
            "Code": {
              "S3ObjectVersion": "statestore-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "statestore-lambda-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionTasksCreationPeriodicTriggerAllowEventRuleTestInstanceCompactionCompactionTasksCreatorCurrentVersionC91A99B9837A48DE": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Ref": "CompactionTasksCreatorCurrentVersion2E3420E49c34bcbf50dacb9cb1fd58f3dd9031d7"
            },
            "Action": "lambda:InvokeFunction",
            "SourceArn": {
              "Fn::GetAtt": [
                "CompactionTasksCreationPeriodicTrigger83AF9165",
                "Arn"
              ]
            },
            "Principal": "events.amazonaws.com"
          }
        },
        "CompactionCommitBatcherCurrentVersionSqsEventSourceTestInstanceCompactionCompactionCommitQueue783848C849A719E4": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1000,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "CompactionCommitBatcher593C3BC4"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "CompactionCommitBatcherCurrentVersionE40B60541d5dda02b3a7042c579ce81626ffac6e",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "ScalingConfig": {
              "MaximumConcurrency": 2
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "CompactionCommitQueueE037D242",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "MaximumBatchingWindowInSeconds": 30
          }
        },
        "CompactionJobDefinitionsQueueA2464A8F": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 3,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "CompactionJobDefinitionsDeadLetterQueue52791FB3",
                  "Arn"
                ]
              }
            },
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-CompactionJobQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobCreationQueueE4E540E0": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "CompactionJobCreationDLQ4B25195B",
                  "Arn"
                ]
              }
            },
            "FifoQueue": true,
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-CompactionJobCreationQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobsCreationHandlerCurrentVersion872850F230043e8c5ebad93429da8995722a8cac": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "CompactionJobsCreationHandlerAC80181B"
            }
          }
        },
        "CompactionJobDispatcherServiceRoleDefaultPolicy62D1573C": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "CompactionJobDispatcherServiceRoleDefaultPolicy62D1573C",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "PendingCompactionJobBatchQ39102D53",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "PendingCompactionJobBatchDLQ375DAE33",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars"
                        ]
                      ]
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "CompactionJobDefinitionsQueueA2464A8F",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "PendingCompactionJobBatchQ39102D53",
                      "Arn"
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "CompactionJobDispatcherServiceRoleD130489F"
              }
            ]
          }
        },
        "CompactionCommitDLQ3ECB6A83": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "QueueName": "sleeper-test-instance-CompactionCommitDLQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionCommitAlarm3B60BAFC": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "CompactionCommitDLQ3ECB6A83",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for compaction commits",
            "AlarmName": {
              "Fn::GetAtt": [
                "CompactionCommitDLQ3ECB6A83",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "CompactionTasksCreator85FF715C": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "CompactionTasksCreatorServiceRoleDefaultPolicyC273EBFA",
            "CompactionTasksCreatorServiceRole9AD225A3"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "CompactionTasksCreatorServiceRole9AD225A3",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-compaction-tasks-creator",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "If there are compaction jobs on queue create tasks to run them",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactiontaskscreatorB668B31ARef"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.compaction.task.creation.RunCompactionTasksLambda::eventHandler",
            "ReservedConcurrentExecutions": 1,
            "Code": {
              "S3ObjectVersion": "compaction-task-creation-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "runningjobs-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionFargateTaskDefinitionB0838671": {
          "Type": "AWS::ECS::TaskDefinition",
          "Properties": {
            "ExecutionRoleArn": {
              "Fn::GetAtt": [
                "CompactionFargateTaskDefinitionExecutionRole4A456844",
                "Arn"
              ]
            },
            "RuntimePlatform": {
              "OperatingSystemFamily": "LINUX",
              "CpuArchitecture": "ARM64"
            },
            "TaskRoleArn": {
              "Fn::GetAtt": [
                "CompactionFargateTaskDefinitionTaskRoleA667B4D1",
                "Arn"
              ]
            },
            "Memory": "8192",
            "ContainerDefinitions": [
              {
                "Cpu": 4096,
                "Environment": [
                  {
                    "Name": "AWS_REGION",
                    "Value": "test-region"
                  },
                  {
                    "Name": "JAVA_TOOL_OPTIONS",
                    "Value": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED"
                  },
                  {
                    "Name": "SLEEPER_CONFIG_BUCKET",
                    "Value": {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                    }
                  }
                ],
                "Essential": true,
                "Image": {
                  "Fn::Join": [
                    "",
                    [
                      "test-account.dkr.ecr.test-region.",
                      {
                        "Ref": "AWS::URLSuffix"
                      },
                      "/test-instance/compaction-job-execution:1.2.3"
                    ]
                  ]
                },
                "LogConfiguration": {
                  "LogDriver": "awslogs",
                  "Options": {
                    "awslogs-group": {
                      "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingFargateCompactionTasksCCB274EARef"
                    },
                    "awslogs-stream-prefix": {
                      "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingFargateCompactionTasksCCB274EARef"
                    },
                    "awslogs-region": "test-region"
                  }
                },
                "Memory": 8192,
                "Name": "CompactionContainer"
              }
            ],
            "Cpu": "4096",
            "Family": "sleeper-test-instance-CompactionTaskOnFargate",
            "RequiresCompatibilities": [
              "FARGATE"
            ],
            "NetworkMode": "awsvpc",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobsCreationTrigger1EC35DE1": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "CompactionJobsCreationTriggerServiceRoleDefaultPolicy1C756A2F",
            "CompactionJobsCreationTriggerServiceRole21A316D2"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "CompactionJobsCreationTriggerServiceRole21A316D2",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-compaction-job-creation-trigger",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "Create batches of online tables and send requests to create compaction jobs for those batches",
            "Timeout": 60,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactionjobcreationtrigger5B1465ADRef"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.compaction.job.creation.lambda.CreateCompactionJobsTriggerLambda::handleRequest",
            "ReservedConcurrentExecutions": 1,
            "Code": {
              "S3ObjectVersion": "compaction-job-creation-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "lambda-jobSpecCreationLambda-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobCreationPeriodicTriggerAllowEventRuleTestInstanceCompactionCompactionJobsCreationTriggerCurrentVersion6A04D1101144F9AF": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Ref": "CompactionJobsCreationTriggerCurrentVersionD5B88BF67df5e338af7c15316c791575b666cf25"
            },
            "Action": "lambda:InvokeFunction",
            "SourceArn": {
              "Fn::GetAtt": [
                "CompactionJobCreationPeriodicTrigger634BED93",
                "Arn"
              ]
            },
            "Principal": "events.amazonaws.com"
          }
        },
        "CompactionCommitBatcherCurrentVersionE40B60541d5dda02b3a7042c579ce81626ffac6e": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "CompactionCommitBatcher593C3BC4"
            }
          }
        },
        "PendingCompactionJobBatchQ39102D53": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 3,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "PendingCompactionJobBatchDLQ375DAE33",
                  "Arn"
                ]
              }
            },
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-PendingCompactionJobBatchQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobCreationBatchAlarmBF1BB177": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "CompactionJobCreationDLQ4B25195B",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for compaction job creation triggers",
            "AlarmName": {
              "Fn::GetAtt": [
                "CompactionJobCreationDLQ4B25195B",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "CompactionJobDispatcherCurrentVersionSqsEventSourceTestInstanceCompactionPendingCompactionJobBatchQ13FE9E74DFF3B13F": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "CompactionJobDispatcherABA5378D"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "CompactionJobDispatcherCurrentVersion1FEE557903c9e1f74b0a476074c2fb013354f7aa",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "ScalingConfig": {
              "MaximumConcurrency": 10
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "PendingCompactionJobBatchQ39102D53",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionCommitBatcherServiceRoleDefaultPolicy41E7E587": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "CompactionCommitBatcherServiceRoleDefaultPolicy41E7E587",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "CompactionCommitQueueE037D242",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "Roles": [
              {
                "Ref": "CompactionCommitBatcherServiceRoleDC85A650"
              }
            ]
          }
        },
        "CompactionFargateTaskDefinitionTaskRoleA667B4D1": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "ecs-tasks.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobDispatcherCurrentVersion1FEE557903c9e1f74b0a476074c2fb013354f7aa": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "CompactionJobDispatcherABA5378D"
            }
          }
        },
        "CompactionTasksCreationPeriodicTrigger83AF9165": {
          "Type": "AWS::Events::Rule",
          "Properties": {
            "ScheduleExpression": "rate(1 minute)",
            "Description": "Triggers scaling compaction tasks to run created jobs",
            "State": "ENABLED",
            "Targets": [
              {
                "Arn": {
                  "Ref": "CompactionTasksCreatorCurrentVersion2E3420E49c34bcbf50dacb9cb1fd58f3dd9031d7"
                },
                "Id": "Target0"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Name": "test-instance-CompactionTasksCreationRule"
          }
        },
        "CompactionFargateTaskDefinitionExecutionRoleDefaultPolicy1E7BDC56": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "CompactionFargateTaskDefinitionExecutionRoleDefaultPolicy1E7BDC56",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "ecr:BatchCheckLayerAvailability",
                    "ecr:GetDownloadUrlForLayer",
                    "ecr:BatchGetImage"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        "arn:",
                        {
                          "Ref": "AWS::Partition"
                        },
                        ":ecr:test-region:test-account:repository/test-instance/compaction-job-execution"
                      ]
                    ]
                  }
                },
                {
                  "Action": "ecr:GetAuthorizationToken",
                  "Effect": "Allow",
                  "Resource": "*"
                },
                {
                  "Action": [
                    "logs:CreateLogStream",
                    "logs:PutLogEvents"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingFargateCompactionTasksCCB274EAArn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "CompactionFargateTaskDefinitionExecutionRole4A456844"
              }
            ]
          }
        },
        "CompactionTasksCreatorCurrentVersion2E3420E49c34bcbf50dacb9cb1fd58f3dd9031d7": {
          "Type": "AWS::Lambda::Version",
          "DependsOn": [
            "CompactionClusterAutoStop"
          ],
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "CompactionTasksCreator85FF715C"
            }
          }
        },
        "CompactionFargateTaskDefinitionExecutionRole4A456844": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "ecs-tasks.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionTasksCreatorServiceRoleDefaultPolicyC273EBFA": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "CompactionTasksCreatorServiceRoleDefaultPolicyC273EBFA",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": "sqs:GetQueueAttributes",
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "CompactionJobDefinitionsQueueA2464A8F",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "CompactionJobDefinitionsQueueA2464A8F",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "ecs:DescribeClusters",
                    "ecs:RunTask",
                    "iam:PassRole",
                    "ecs:DescribeContainerInstances",
                    "ecs:DescribeTasks",
                    "ecs:ListContainerInstances",
                    "autoscaling:SetDesiredCapacity",
                    "autoscaling:DescribeAutoScalingGroups",
                    "ec2:DescribeInstanceTypes"
                  ],
                  "Effect": "Allow",
                  "Resource": "*"
                }
              ]
            },
            "Roles": [
              {
                "Ref": "CompactionTasksCreatorServiceRole9AD225A3"
              }
            ]
          }
        },
        "CompactionCommitBatcherServiceRoleDC85A650": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionTasksCreatorServiceRole9AD225A3": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              },
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobsCreationTriggerServiceRole21A316D2": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "PendingCompactionJobBatchDLQ375DAE33": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "QueueName": "sleeper-test-instance-PendingCompactionJobBatchDLQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobDispatcherServiceRoleD130489F": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobsCreationTriggerCurrentVersionD5B88BF67df5e338af7c15316c791575b666cf25": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "CompactionJobsCreationTrigger1EC35DE1"
            }
          }
        },
        "CompactionAlarm581E7707": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "CompactionJobDefinitionsDeadLetterQueue52791FB3",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for compaction jobs",
            "AlarmName": {
              "Fn::GetAtt": [
                "CompactionJobDefinitionsDeadLetterQueue52791FB3",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "CompactionJobsCreationTriggerServiceRoleDefaultPolicy1C756A2F": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "CompactionJobsCreationTriggerServiceRoleDefaultPolicy1C756A2F",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "CompactionJobCreationQueueE4E540E0",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "CompactionJobsCreationTriggerServiceRole21A316D2"
              }
            ]
          }
        },
        "CompactionCommitQueueE037D242": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 3,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "CompactionCommitDLQ3ECB6A83",
                  "Arn"
                ]
              }
            },
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-CompactionCommitQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "PendingCompactionAlarm056BF1F0": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "PendingCompactionJobBatchDLQ375DAE33",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for pending compaction job batches",
            "AlarmName": {
              "Fn::GetAtt": [
                "PendingCompactionJobBatchDLQ375DAE33",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "CompactionJobDefinitionsDeadLetterQueue52791FB3": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "QueueName": "sleeper-test-instance-CompactionJobDLQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobCreationPeriodicTrigger634BED93": {
          "Type": "AWS::Events::Rule",
          "Properties": {
            "ScheduleExpression": "rate(1 minute)",
            "Description": "Triggers creation of compaction jobs for online Sleeper tables",
            "State": "ENABLED",
            "Targets": [
              {
                "Arn": {
                  "Ref": "CompactionJobsCreationTriggerCurrentVersionD5B88BF67df5e338af7c15316c791575b666cf25"
                },
                "Id": "Target0"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Name": "test-instance-CompactionJobCreationRule"
          }
        },
        "CompactionCluster1D47602A": {
          "Type": "AWS::ECS::Cluster",
          "Properties": {
            "ClusterSettings": [
              {
                "Name": "containerInsights",
                "Value": "enhanced"
              }
            ],
            "ClusterName": "sleeper-test-instance-compaction-cluster",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionFargateTaskDefinitionTaskRoleDefaultPolicyDAA7F918": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "CompactionFargateTaskDefinitionTaskRoleDefaultPolicyDAA7F918",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionTaskStatusTable9E1002EFArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars"
                        ]
                      ]
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": "ecs:DescribeContainerInstances",
                  "Effect": "Allow",
                  "Resource": "*"
                },
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "CompactionJobDefinitionsQueueA2464A8F",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "CompactionCommitQueueE037D242",
                      "Arn"
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "CompactionFargateTaskDefinitionTaskRoleA667B4D1"
              }
            ]
          }
        },
        "CompactionJobsCreationHandlerAC80181B": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "CompactionJobsCreationHandlerServiceRoleDefaultPolicy67EE4B83",
            "CompactionJobsCreationHandlerServiceRole764E7DCE"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "CompactionJobsCreationHandlerServiceRole764E7DCE",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-compaction-job-creation-handler",
            "MemorySize": 4096,
            "Runtime": "java17",
            "Description": "Scan the state stores of the provided tables looking for compaction jobs to create",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactionjobcreationhandlerDB342042Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.compaction.job.creation.lambda.CreateCompactionJobsLambda::handleRequest",
            "Code": {
              "S3ObjectVersion": "compaction-job-creation-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "lambda-jobSpecCreationLambda-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionClusterAutoStop": {
          "Type": "Custom::AutoStopEcsClusterTasks",
          "DependsOn": [
            "CompactionCluster1D47602A"
          ],
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "ServiceToken": {
              "Ref": "referencetoTestInstanceAutoStopEcsClusterTasksNestedStackAutoStopEcsClusterTasksNestedStackResource139EB607OutputsTestInstanceAutoStopEcsClusterTasksProviderframeworkonEvent8CDD6C7CArn"
            },
            "cluster": {
              "Ref": "CompactionCluster1D47602A"
            }
          }
        },
        "CompactionJobsCreationHandlerServiceRoleDefaultPolicy67EE4B83": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "CompactionJobsCreationHandlerServiceRoleDefaultPolicy67EE4B83",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "CompactionJobCreationQueueE4E540E0",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobUpdatesTable0B49652AArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceCompactionTrackerNestedStackCompactionTrackerNestedStackResource6AA07358OutputsTestInstanceCompactionTrackerDynamoDBCompactionJobLookupTable4CC99F10Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars"
                        ]
                      ]
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "CompactionJobDefinitionsQueueA2464A8F",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "PendingCompactionJobBatchQ39102D53",
                      "Arn"
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "CompactionJobsCreationHandlerServiceRole764E7DCE"
              }
            ]
          }
        },
        "CompactionJobCreationDLQ4B25195B": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "FifoQueue": true,
            "QueueName": "sleeper-test-instance-CompactionJobCreationDLQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobsCreationHandlerServiceRole764E7DCE": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobsCreationHandlerCurrentVersionSqsEventSourceTestInstanceCompactionCompactionJobCreationQueue2D580C6F589B7BB9": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "CompactionJobsCreationHandlerAC80181B"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "CompactionJobsCreationHandlerCurrentVersion872850F230043e8c5ebad93429da8995722a8cac",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "ScalingConfig": {
              "MaximumConcurrency": 10
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "CompactionJobCreationQueueE4E540E0",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "CompactionJobDispatcherABA5378D": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "CompactionJobDispatcherServiceRoleDefaultPolicy62D1573C",
            "CompactionJobDispatcherServiceRoleD130489F"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "CompactionJobDispatcherServiceRoleD130489F",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-compaction-job-dispatcher",
            "MemorySize": 4096,
            "Runtime": "java17",
            "Description": "Sends batches of compaction jobs created by the job creation lambda",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingcompactionjobdispatcher0ECCFF5ERef"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.compaction.job.creation.lambda.CompactionJobDispatchLambda::handleRequest",
            "Code": {
              "S3ObjectVersion": "compaction-job-creation-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "lambda-jobSpecCreationLambda-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Compaction"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "PartitionSplitting": {
      "Parameters": {
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpartitionsplittingtrigger4A1B8250Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpartitionsplittinghandlerD89FB7CDRef": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpartitionsplittingfindtosplit469D578DRef": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "PartitionSplittingQueueUrl": {
          "Value": {
            "Ref": "PartitionSplittingJobQueue7BABC85D"
          }
        },
        "TestInstancePartitionSplittingFindPartitionsToSplitTriggerLambdaCurrentVersionD6930CA9Version": {
          "Value": {
            "Fn::GetAtt": [
              "FindPartitionsToSplitTriggerLambdaCurrentVersionC3771F91f603d9dbbbf61984cb518ec541e4f997",
              "Version"
            ]
          }
        },
        "TestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Ref": {
          "Value": {
            "Ref": "PartitionSplittingJobQueue7BABC85D"
          }
        },
        "TestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956Ref": {
          "Value": {
            "Ref": "PartitionSplittingDeadLetterQueue92FF1D7A"
          }
        },
        "TestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157Ref": {
          "Value": {
            "Ref": "FindPartitionsToSplitDeadLetterQueue50D6773C"
          }
        },
        "TestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Ref": {
          "Value": {
            "Ref": "FindPartitionsToSplitBatchQueueF5DCC7E5"
          }
        },
        "TestInstancePartitionSplittingFindPartitionsToSplitTriggerLambda41F9A274Ref": {
          "Value": {
            "Ref": "FindPartitionsToSplitTriggerLambda9389D7D7"
          }
        },
        "TestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "PartitionSplittingDeadLetterQueue92FF1D7A",
              "QueueName"
            ]
          }
        },
        "PartitionSplittingDLQUrl": {
          "Value": {
            "Ref": "PartitionSplittingDeadLetterQueue92FF1D7A"
          }
        },
        "TestInstancePartitionSplittingFindPartitionsToSplitPeriodicTrigger6354C494Ref": {
          "Value": {
            "Ref": "FindPartitionsToSplitPeriodicTriggerCB026606"
          }
        },
        "TestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956Arn": {
          "Value": {
            "Fn::GetAtt": [
              "PartitionSplittingDeadLetterQueue92FF1D7A",
              "Arn"
            ]
          }
        },
        "TestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157Arn": {
          "Value": {
            "Fn::GetAtt": [
              "FindPartitionsToSplitDeadLetterQueue50D6773C",
              "Arn"
            ]
          }
        },
        "TestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Arn": {
          "Value": {
            "Fn::GetAtt": [
              "PartitionSplittingJobQueue7BABC85D",
              "Arn"
            ]
          }
        },
        "TestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "PartitionSplittingJobQueue7BABC85D",
              "QueueName"
            ]
          }
        },
        "TestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Arn": {
          "Value": {
            "Fn::GetAtt": [
              "FindPartitionsToSplitBatchQueueF5DCC7E5",
              "Arn"
            ]
          }
        },
        "TestInstancePartitionSplittingFindPartitionsToSplitTriggerLambdaCurrentVersionD6930CA9Ref": {
          "Value": {
            "Ref": "FindPartitionsToSplitTriggerLambdaCurrentVersionC3771F91f603d9dbbbf61984cb518ec541e4f997"
          }
        },
        "TestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "FindPartitionsToSplitDeadLetterQueue50D6773C",
              "QueueName"
            ]
          }
        }
      },
      "Resources": {
        "FindPartitionsToSplitLambda7FCC5BEC": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "FindPartitionsToSplitLambdaServiceRoleDefaultPolicyF6EF3926",
            "FindPartitionsToSplitLambdaServiceRole57302BDA"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "FindPartitionsToSplitLambdaServiceRole57302BDA",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-partition-splitting-find-to-split",
            "MemorySize": 4096,
            "Runtime": "java17",
            "Description": "Scan the state stores of the provided tables looking for partitions that need splitting",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpartitionsplittingfindtosplit469D578DRef"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.splitter.lambda.FindPartitionsToSplitLambda::handleRequest",
            "Code": {
              "S3ObjectVersion": "splitter-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "lambda-splitter-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "FindPartitionsToSplitLambdaCurrentVersion3550596F4f6b5610c79db42bed0ffe0ee7055a7a": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "FindPartitionsToSplitLambda7FCC5BEC"
            }
          }
        },
        "FindPartitionsToSplitTriggerLambdaCurrentVersionC3771F91f603d9dbbbf61984cb518ec541e4f997": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "FindPartitionsToSplitTriggerLambda9389D7D7"
            }
          }
        },
        "FindPartitionsToSplitBatchQueueF5DCC7E5": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "FindPartitionsToSplitDeadLetterQueue50D6773C",
                  "Arn"
                ]
              }
            },
            "FifoQueue": true,
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-FindPartitionsToSplitQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "FindPartitionsToSplitPeriodicTriggerAllowEventRuleTestInstancePartitionSplittingFindPartitionsToSplitTriggerLambdaCurrentVersion27294CC1669F8673": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Ref": "FindPartitionsToSplitTriggerLambdaCurrentVersionC3771F91f603d9dbbbf61984cb518ec541e4f997"
            },
            "Action": "lambda:InvokeFunction",
            "SourceArn": {
              "Fn::GetAtt": [
                "FindPartitionsToSplitPeriodicTriggerCB026606",
                "Arn"
              ]
            },
            "Principal": "events.amazonaws.com"
          }
        },
        "PartitionSplittingJobQueue7BABC85D": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "PartitionSplittingDeadLetterQueue92FF1D7A",
                  "Arn"
                ]
              }
            },
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-PartitionSplittingJobQueue",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "FindPartitionsToSplitLambdaServiceRole57302BDA": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "PartitionSplittingAlarm9D9AB22C": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "PartitionSplittingDeadLetterQueue92FF1D7A",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for partition splitting",
            "AlarmName": {
              "Fn::GetAtt": [
                "PartitionSplittingDeadLetterQueue92FF1D7A",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "FindPartitionsToSplitTriggerLambdaServiceRoleC0189B7B": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "FindPartitionsToSplitPeriodicTriggerCB026606": {
          "Type": "AWS::Events::Rule",
          "Properties": {
            "ScheduleExpression": "rate(30 minutes)",
            "Description": "Triggers looking for partitions to split in online Sleeper tables",
            "State": "ENABLED",
            "Targets": [
              {
                "Arn": {
                  "Ref": "FindPartitionsToSplitTriggerLambdaCurrentVersionC3771F91f603d9dbbbf61984cb518ec541e4f997"
                },
                "Id": "Target0"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Name": "test-instance-FindPartitionsToSplitPeriodicTrigger"
          }
        },
        "SplitPartitionLambdaServiceRoleDefaultPolicyF6E45B6B": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "SplitPartitionLambdaServiceRoleDefaultPolicyF6E45B6B",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  }
                },
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "PartitionSplittingJobQueue7BABC85D",
                      "Arn"
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "SplitPartitionLambdaServiceRole74013A64"
              }
            ]
          }
        },
        "FindPartitionsToSplitAlarm46EE362E": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "FindPartitionsToSplitDeadLetterQueue50D6773C",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for finding partitions to split",
            "AlarmName": {
              "Fn::GetAtt": [
                "FindPartitionsToSplitDeadLetterQueue50D6773C",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "SplitPartitionLambdaCurrentVersionBC35E2383ba0a661d97af707fb37e85515db41f3": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "SplitPartitionLambda567FD4CB"
            }
          }
        },
        "FindPartitionsToSplitDeadLetterQueue50D6773C": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "FifoQueue": true,
            "QueueName": "sleeper-test-instance-FindPartitionsToSplitDLQ.fifo",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "SplitPartitionLambdaCurrentVersionSqsEventSourceTestInstancePartitionSplittingPartitionSplittingJobQueue74405CFBEA9E5BA1": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "SplitPartitionLambda567FD4CB"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "SplitPartitionLambdaCurrentVersionBC35E2383ba0a661d97af707fb37e85515db41f3",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "ScalingConfig": {
              "MaximumConcurrency": 10
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "PartitionSplittingJobQueue7BABC85D",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "FindPartitionsToSplitLambdaCurrentVersionSqsEventSourceTestInstancePartitionSplittingFindPartitionsToSplitBatchQueue0E880331799E86FA": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "FindPartitionsToSplitLambda7FCC5BEC"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "FindPartitionsToSplitLambdaCurrentVersion3550596F4f6b5610c79db42bed0ffe0ee7055a7a",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "ScalingConfig": {
              "MaximumConcurrency": 10
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "FindPartitionsToSplitBatchQueueF5DCC7E5",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "FindPartitionsToSplitTriggerLambda9389D7D7": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "FindPartitionsToSplitTriggerLambdaServiceRoleDefaultPolicyE0E73B6F",
            "FindPartitionsToSplitTriggerLambdaServiceRoleC0189B7B"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "FindPartitionsToSplitTriggerLambdaServiceRoleC0189B7B",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-partition-splitting-trigger",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "Creates batches of Sleeper tables to perform partition splitting for and puts them on a queue to be processed",
            "Timeout": 60,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpartitionsplittingtrigger4A1B8250Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.splitter.lambda.FindPartitionsToSplitTriggerLambda::handleRequest",
            "ReservedConcurrentExecutions": 1,
            "Code": {
              "S3ObjectVersion": "splitter-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "lambda-splitter-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "SplitPartitionLambdaServiceRole74013A64": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "FindPartitionsToSplitTriggerLambdaServiceRoleDefaultPolicyE0E73B6F": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "FindPartitionsToSplitTriggerLambdaServiceRoleDefaultPolicyE0E73B6F",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "FindPartitionsToSplitBatchQueueF5DCC7E5",
                      "Arn"
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "FindPartitionsToSplitTriggerLambdaServiceRoleC0189B7B"
              }
            ]
          }
        },
        "FindPartitionsToSplitLambdaServiceRoleDefaultPolicyF6EF3926": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "FindPartitionsToSplitLambdaServiceRoleDefaultPolicyF6EF3926",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "PartitionSplittingJobQueue7BABC85D",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "FindPartitionsToSplitBatchQueueF5DCC7E5",
                      "Arn"
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "FindPartitionsToSplitLambdaServiceRole57302BDA"
              }
            ]
          }
        },
        "SplitPartitionLambda567FD4CB": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "SplitPartitionLambdaServiceRoleDefaultPolicyF6E45B6B",
            "SplitPartitionLambdaServiceRole74013A64"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "SplitPartitionLambdaServiceRole74013A64",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-partition-splitting-handler",
            "MemorySize": 4096,
            "Runtime": "java17",
            "Description": "Triggered by an SQS event that contains a partition to split",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpartitionsplittinghandlerD89FB7CDRef"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.splitter.lambda.SplitPartitionLambda::handleRequest",
            "ReservedConcurrentExecutions": 10,
            "Code": {
              "S3ObjectVersion": "splitter-lambda-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "lambda-splitter-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "PartitionSplittingDeadLetterQueue92FF1D7A": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "QueueName": "sleeper-test-instance-PartitionSplittingJobDLQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "PartitionSplitting"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "QueryQueue": {
      "Parameters": {
        "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Type": "String"
        }
      },
      "Outputs": {
        "QueryQueueName": {
          "Value": {
            "Fn::GetAtt": [
              "QueryQueueC8B965BE",
              "QueueName"
            ]
          },
          "Export": {
            "Name": "test-instance-QueryQueueName"
          }
        },
        "TestInstanceQueryQueueQueryDeadLetterQueue496F8592QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "QueryDeadLetterQueue6FA8C6AC",
              "QueueName"
            ]
          }
        },
        "TestInstanceQueryQueueQueryDeadLetterQueue496F8592Arn": {
          "Value": {
            "Fn::GetAtt": [
              "QueryDeadLetterQueue6FA8C6AC",
              "Arn"
            ]
          }
        },
        "TestInstanceQueryQueue61C01E76Arn": {
          "Value": {
            "Fn::GetAtt": [
              "QueryQueueC8B965BE",
              "Arn"
            ]
          }
        },
        "QueryQueueUrl": {
          "Value": {
            "Ref": "QueryQueueC8B965BE"
          },
          "Export": {
            "Name": "test-instance-QueryQueueUrl"
          }
        },
        "TestInstanceQueryQueueQueryDeadLetterQueue496F8592Ref": {
          "Value": {
            "Ref": "QueryDeadLetterQueue6FA8C6AC"
          }
        },
        "QueryDLQUrl": {
          "Value": {
            "Ref": "QueryDeadLetterQueue6FA8C6AC"
          },
          "Export": {
            "Name": "test-instance-QueryDLQUrl"
          }
        },
        "TestInstanceQueryQueue61C01E76Ref": {
          "Value": {
            "Ref": "QueryQueueC8B965BE"
          }
        }
      },
      "Resources": {
        "QueryAlarm55748F17": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "QueryDeadLetterQueue6FA8C6AC",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for queries",
            "AlarmName": {
              "Fn::GetAtt": [
                "QueryDeadLetterQueue6FA8C6AC",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Threshold": 0
          }
        },
        "QueryDeadLetterQueue6FA8C6AC": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "QueueName": "sleeper-test-instance-QueryDLQ"
          }
        },
        "QueryQueueC8B965BE": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "QueryDeadLetterQueue6FA8C6AC",
                  "Arn"
                ]
              }
            },
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-QueryQueue"
          }
        }
      }
    },
    "Query": {
      "Parameters": {
        "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingqueryexecutorE6E0DC1DRef": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingqueryleafpartition81D7EEE1Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceQueryQueryResultsBucket6975CD73Arn": {
          "Value": {
            "Fn::GetAtt": [
              "QueryResultsBucketA33A3E24",
              "Arn"
            ]
          }
        },
        "TestInstanceQueryQueryExecutorLambdaServiceRoleF73B7ACCRef": {
          "Value": {
            "Ref": "QueryExecutorLambdaServiceRoleA47BCEB3"
          }
        },
        "TestInstanceQueryQueryTrackingTableD59EF8F3Ref": {
          "Value": {
            "Ref": "QueryTrackingTableEE351F53"
          }
        },
        "TestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFArn": {
          "Value": {
            "Fn::GetAtt": [
              "LeafPartitionQueryDeadLetterQueue1090F3DB",
              "Arn"
            ]
          }
        },
        "TestInstanceQueryQueryResultsQueue40C89520Arn": {
          "Value": {
            "Fn::GetAtt": [
              "QueryResultsQueueD60170BB",
              "Arn"
            ]
          }
        },
        "QueryLambdaRoleArn": {
          "Value": {
            "Fn::GetAtt": [
              "QueryExecutorLambdaServiceRoleA47BCEB3",
              "Arn"
            ]
          },
          "Export": {
            "Name": "test-instance-QueryLambdaRoleArn"
          }
        },
        "QueryResultsQueueUrl": {
          "Value": {
            "Ref": "QueryResultsQueueD60170BB"
          },
          "Export": {
            "Name": "test-instance-QueryResultsQueueUrl"
          }
        },
        "TestInstanceQueryLeafPartitionQueryQueue64615BA9Ref": {
          "Value": {
            "Ref": "LeafPartitionQueryQueue45E884AA"
          }
        },
        "TestInstanceQueryQueryTrackingTableD59EF8F3Arn": {
          "Value": {
            "Fn::GetAtt": [
              "QueryTrackingTableEE351F53",
              "Arn"
            ]
          }
        },
        "LeafPartitionQueryDLQUrl": {
          "Value": {
            "Ref": "LeafPartitionQueryDeadLetterQueue1090F3DB"
          },
          "Export": {
            "Name": "test-instance-LeafPartitionQueryDLQUrl"
          }
        },
        "LeafPartitionQueryQueueUrl": {
          "Value": {
            "Ref": "LeafPartitionQueryQueue45E884AA"
          },
          "Export": {
            "Name": "test-instance-LeafPartitionQueryQueueUrl"
          }
        },
        "TestInstanceQueryLeafPartitionQueryQueue64615BA9Arn": {
          "Value": {
            "Fn::GetAtt": [
              "LeafPartitionQueryQueue45E884AA",
              "Arn"
            ]
          }
        },
        "QueryResultsQueueName": {
          "Value": {
            "Fn::GetAtt": [
              "QueryResultsQueueD60170BB",
              "QueueName"
            ]
          },
          "Export": {
            "Name": "test-instance-QueryResultsQueueName"
          }
        },
        "TestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFRef": {
          "Value": {
            "Ref": "LeafPartitionQueryDeadLetterQueue1090F3DB"
          }
        },
        "TestInstanceQueryQueryResultsBucket6975CD73Ref": {
          "Value": {
            "Ref": "QueryResultsBucketA33A3E24"
          }
        },
        "LeafPartitionQueryQueueName": {
          "Value": {
            "Fn::GetAtt": [
              "LeafPartitionQueryQueue45E884AA",
              "QueueName"
            ]
          },
          "Export": {
            "Name": "test-instance-LeafPartitionQueryQueueName"
          }
        },
        "TestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFQueueName": {
          "Value": {
            "Fn::GetAtt": [
              "LeafPartitionQueryDeadLetterQueue1090F3DB",
              "QueueName"
            ]
          }
        },
        "TestInstanceQueryQueryResultsQueue40C89520Ref": {
          "Value": {
            "Ref": "QueryResultsQueueD60170BB"
          }
        }
      },
      "Resources": {
        "QueryLeafPartitionExecutorLambda23A190EE": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "QueryLeafPartitionExecutorLambdaServiceRoleDefaultPolicy3100A285",
            "QueryLeafPartitionExecutorLambdaServiceRoleB1BA7602"
          ],
          "Properties": {
            "ImageConfig": {
              "Command": [
                "sleeper.query.lambda.SqsLeafPartitionQueryLambda::handleRequest"
              ]
            },
            "Role": {
              "Fn::GetAtt": [
                "QueryLeafPartitionExecutorLambdaServiceRoleB1BA7602",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-query-leaf-partition",
            "MemorySize": 4096,
            "Description": "When a query arrives on the query SQS queue, this lambda is invoked to execute the query",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingqueryleafpartition81D7EEE1Ref"
              }
            },
            "PackageType": "Image",
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Code": {
              "ImageUri": {
                "Fn::Join": [
                  "",
                  [
                    "test-account.dkr.ecr.test-region.",
                    {
                      "Ref": "AWS::URLSuffix"
                    },
                    "/test-instance/query-lambda:1.2.3"
                  ]
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "LeafPartitionQueryQueue45E884AA": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "LeafPartitionQueryDeadLetterQueue1090F3DB",
                  "Arn"
                ]
              }
            },
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-LeafPartitionQueryQueue",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "QueryLeafPartitionExecutorLambdaCurrentVersion57D7E0178f095f48117f9cc681640558677bd216": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "QueryLeafPartitionExecutorLambda23A190EE"
            }
          }
        },
        "LeafPartitionQueryDeadLetterQueue1090F3DB": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "QueueName": "sleeper-test-instance-LeafPartitionQueryDLQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "QueryLeafPartitionExecutorLambdaServiceRoleDefaultPolicy3100A285": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "QueryLeafPartitionExecutorLambdaServiceRoleDefaultPolicy3100A285",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars"
                        ]
                      ]
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "LeafPartitionQueryQueue45E884AA",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "QueryTrackingTableEE351F53",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "QueryTrackingTableEE351F53",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::GetAtt": [
                        "QueryResultsBucketA33A3E24",
                        "Arn"
                      ]
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Fn::GetAtt": [
                              "QueryResultsBucketA33A3E24",
                              "Arn"
                            ]
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "QueryResultsQueueD60170BB",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "LeafPartitionQueryQueue45E884AA",
                      "Arn"
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "QueryLeafPartitionExecutorLambdaServiceRoleB1BA7602"
              }
            ]
          }
        },
        "PutToAnyS3BucketAndSendToAnySQSPolicyQueryBC06992C": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "PutToAnyS3BucketAndSendToAnySQSPolicyQueryBC06992C",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:PutObject",
                    "sqs:SendMessage"
                  ],
                  "Effect": "Allow",
                  "Resource": "*"
                }
              ]
            },
            "Roles": [
              {
                "Ref": "QueryExecutorLambdaServiceRoleA47BCEB3"
              }
            ]
          }
        },
        "LeafPartitionQueryAlarmC105AC53": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "LeafPartitionQueryDeadLetterQueue1090F3DB",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for leaf partition queries",
            "AlarmName": {
              "Fn::GetAtt": [
                "LeafPartitionQueryDeadLetterQueue1090F3DB",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        },
        "QueryResultsQueueD60170BB": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-QueryResultsQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "QueryExecutorLambdaServiceRoleDefaultPolicy7D468E2D": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "QueryExecutorLambdaServiceRoleDefaultPolicy7D468E2D",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars"
                        ]
                      ]
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "QueryTrackingTableEE351F53",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "QueryTrackingTableEE351F53",
                      "Arn"
                    ]
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "QueryExecutorLambdaServiceRoleA47BCEB3"
              }
            ]
          }
        },
        "QueryExecutorLambdaCurrentVersionSqsEventSourceTestInstanceQueryQueueE04CA2CD20157E2A": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "QueryExecutorLambdaC152EAEE"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "QueryExecutorLambdaCurrentVersion57ADA607dbd82e8ce8584bb9752cafa0e1e8361f",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "EventSourceArn": {
              "Ref": "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Arn"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "QueryTrackingTableEE351F53": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "TableName": "sleeper-test-instance-query-tracking-table",
            "AttributeDefinitions": [
              {
                "AttributeName": "queryId",
                "AttributeType": "S"
              },
              {
                "AttributeName": "subQueryId",
                "AttributeType": "S"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "KeySchema": [
              {
                "AttributeName": "queryId",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "subQueryId",
                "KeyType": "RANGE"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "TimeToLiveSpecification": {
              "Enabled": true,
              "AttributeName": "expiryDate"
            }
          }
        },
        "QueryExecutorLambdaC152EAEE": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "QueryExecutorLambdaServiceRoleDefaultPolicy7D468E2D",
            "QueryExecutorLambdaServiceRoleA47BCEB3"
          ],
          "Properties": {
            "ImageConfig": {
              "Command": [
                "sleeper.query.lambda.SqsQueryProcessorLambda::handleRequest"
              ]
            },
            "Role": {
              "Fn::GetAtt": [
                "QueryExecutorLambdaServiceRoleA47BCEB3",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-query-executor",
            "MemorySize": 4096,
            "Description": "When a query arrives on the query SQS queue, this lambda is invoked to look for leaf partition queries",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingqueryexecutorE6E0DC1DRef"
              }
            },
            "PackageType": "Image",
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Code": {
              "ImageUri": {
                "Fn::Join": [
                  "",
                  [
                    "test-account.dkr.ecr.test-region.",
                    {
                      "Ref": "AWS::URLSuffix"
                    },
                    "/test-instance/query-lambda:1.2.3"
                  ]
                ]
              }
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "QueryExecutorLambdaCurrentVersion57ADA607dbd82e8ce8584bb9752cafa0e1e8361f": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "QueryExecutorLambdaC152EAEE"
            }
          }
        },
        "PutToAnyS3BucketAndSendToAnySQSPolicyLeafPartition06A6190C": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "PutToAnyS3BucketAndSendToAnySQSPolicyLeafPartition06A6190C",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:PutObject",
                    "sqs:SendMessage"
                  ],
                  "Effect": "Allow",
                  "Resource": "*"
                }
              ]
            },
            "Roles": [
              {
                "Ref": "QueryLeafPartitionExecutorLambdaServiceRoleB1BA7602"
              }
            ]
          }
        },
        "QueryLeafPartitionExecutorLambdaServiceRoleB1BA7602": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "QueryLeafPartitionExecutorLambdaCurrentVersionSqsEventSourceTestInstanceQueryLeafPartitionQueryQueue4E07AFEA379AAA38": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "BatchSize": 1,
            "FunctionName": {
              "Fn::Join": [
                "",
                [
                  {
                    "Ref": "QueryLeafPartitionExecutorLambda23A190EE"
                  },
                  ":",
                  {
                    "Fn::GetAtt": [
                      "QueryLeafPartitionExecutorLambdaCurrentVersion57D7E0178f095f48117f9cc681640558677bd216",
                      "Version"
                    ]
                  }
                ]
              ]
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "LeafPartitionQueryQueue45E884AA",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "QueryExecutorLambdaServiceRoleA47BCEB3": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "QueryResultsBucketA33A3E24": {
          "Type": "AWS::S3::Bucket",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "PublicAccessBlockConfiguration": {
              "RestrictPublicBuckets": true,
              "BlockPublicPolicy": true,
              "BlockPublicAcls": true,
              "IgnorePublicAcls": true
            },
            "BucketName": "sleeper-test-instance-query-results",
            "BucketEncryption": {
              "ServerSideEncryptionConfiguration": [
                {
                  "ServerSideEncryptionByDefault": {
                    "SSEAlgorithm": "AES256"
                  }
                }
              ]
            },
            "LifecycleConfiguration": {
              "Rules": [
                {
                  "ExpirationInDays": 7,
                  "Status": "Enabled"
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Query"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    },
    "Ingest": {
      "Parameters": {
        "referencetoTestInstanceAutoStopEcsClusterTasksNestedStackAutoStopEcsClusterTasksNestedStackResource139EB607OutputsTestInstanceAutoStopEcsClusterTasksProviderframeworkonEvent8CDD6C7CArn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingIngestTasks98782505Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingIngestTasks98782505Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingingestcreatetasksC7172C2BRef": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceIngestIngestTasksCreatorCurrentVersion7CB52F7CVersion": {
          "Value": {
            "Fn::GetAtt": [
              "IngestTasksCreatorCurrentVersion4DD1B1140fc74c8dbd66e651c64726664bd7edaa",
              "Version"
            ]
          }
        },
        "IngestContainerRoleARN": {
          "Value": {
            "Fn::GetAtt": [
              "IngestTaskDefinitionTaskRole94258059",
              "Arn"
            ]
          },
          "Export": {
            "Name": "test-instance-IngestContainerRoleARN"
          }
        },
        "TestInstanceIngestIngestClusterA4B79DA6Ref": {
          "Value": {
            "Ref": "IngestClusterE0D09E7F"
          }
        },
        "TestInstanceIngestIngestTasksCreator3E24B967Ref": {
          "Value": {
            "Ref": "IngestTasksCreator8578ECAC"
          }
        },
        "IngestStackQueueNameKey": {
          "Value": {
            "Fn::GetAtt": [
              "IngestJobQueue58C13D64",
              "QueueName"
            ]
          },
          "Export": {
            "Name": "test-instance-IngestStackQueueNameKey"
          }
        },
        "TestInstanceIngestIngestJobDeadLetterQueueE7DE67BFArn": {
          "Value": {
            "Fn::GetAtt": [
              "IngestJobDeadLetterQueueCF2B8221",
              "Arn"
            ]
          }
        },
        "IngestStackQueueUrlKey": {
          "Value": {
            "Ref": "IngestJobQueue58C13D64"
          },
          "Export": {
            "Name": "test-instance-IngestStackQueueUrlKey"
          }
        },
        "TestInstanceIngestIngestJobDeadLetterQueueE7DE67BFQueueName": {
          "Value": {
            "Fn::GetAtt": [
              "IngestJobDeadLetterQueueCF2B8221",
              "QueueName"
            ]
          }
        },
        "TestInstanceIngestIngestJobQueue349E97BCRef": {
          "Value": {
            "Ref": "IngestJobQueue58C13D64"
          }
        },
        "IngestStackDLQueueUrlKey": {
          "Value": {
            "Ref": "IngestJobDeadLetterQueueCF2B8221"
          }
        },
        "TestInstanceIngestIngestJobQueue349E97BCArn": {
          "Value": {
            "Fn::GetAtt": [
              "IngestJobQueue58C13D64",
              "Arn"
            ]
          }
        },
        "TestInstanceIngestIngestTasksCreatorCurrentVersion7CB52F7CRef": {
          "Value": {
            "Ref": "IngestTasksCreatorCurrentVersion4DD1B1140fc74c8dbd66e651c64726664bd7edaa"
          }
        },
        "TestInstanceIngestIngestTasksCreationPeriodicTriggerCA9BE66FRef": {
          "Value": {
            "Ref": "IngestTasksCreationPeriodicTriggerEA95A78E"
          }
        },
        "IngestClusterName": {
          "Value": {
            "Ref": "IngestClusterE0D09E7F"
          }
        },
        "TestInstanceIngestIngestJobQueue349E97BCQueueName": {
          "Value": {
            "Fn::GetAtt": [
              "IngestJobQueue58C13D64",
              "QueueName"
            ]
          }
        },
        "TestInstanceIngestIngestJobDeadLetterQueueE7DE67BFRef": {
          "Value": {
            "Ref": "IngestJobDeadLetterQueueCF2B8221"
          }
        }
      },
      "Resources": {
        "IngestClusterAutoStop": {
          "Type": "Custom::AutoStopEcsClusterTasks",
          "DependsOn": [
            "IngestClusterE0D09E7F"
          ],
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "ServiceToken": {
              "Ref": "referencetoTestInstanceAutoStopEcsClusterTasksNestedStackAutoStopEcsClusterTasksNestedStackResource139EB607OutputsTestInstanceAutoStopEcsClusterTasksProviderframeworkonEvent8CDD6C7CArn"
            },
            "cluster": {
              "Ref": "IngestClusterE0D09E7F"
            }
          }
        },
        "IngestTasksCreatorServiceRoleDefaultPolicyED01F4F7": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "IngestTasksCreatorServiceRoleDefaultPolicyED01F4F7",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "IngestJobQueue58C13D64",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": "sqs:GetQueueAttributes",
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "IngestJobQueue58C13D64",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "ecs:DescribeClusters",
                    "ecs:RunTask",
                    "iam:PassRole"
                  ],
                  "Effect": "Allow",
                  "Resource": "*"
                }
              ]
            },
            "Roles": [
              {
                "Ref": "IngestTasksCreatorServiceRole66170DF7"
              }
            ]
          }
        },
        "IngestTaskDefinitionTaskRoleDefaultPolicy14C4E504": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "IngestTaskDefinitionTaskRoleDefaultPolicy14C4E504",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*",
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Arn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobUpdatesTable6B542F3DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestJobLookupTable52BF3656Arn"
                          },
                          "/index/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestTrackerNestedStackIngestTrackerNestedStackResourceD1FCAFA0OutputsTestInstanceIngestTrackerDynamoDBIngestTaskStatusTable7BA7D53BArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars"
                        ]
                      ]
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          "arn:",
                          {
                            "Ref": "AWS::Partition"
                          },
                          ":s3:::sleeper-test-instance-jars/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "IngestJobQueue58C13D64",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": "cloudwatch:PutMetricData",
                  "Condition": {
                    "StringEquals": {
                      "cloudwatch:namespace": "Sleeper"
                    }
                  },
                  "Effect": "Allow",
                  "Resource": "*"
                }
              ]
            },
            "Roles": [
              {
                "Ref": "IngestTaskDefinitionTaskRole94258059"
              }
            ]
          }
        },
        "IngestTasksCreator8578ECAC": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "IngestTasksCreatorServiceRoleDefaultPolicyED01F4F7",
            "IngestTasksCreatorServiceRole66170DF7"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "IngestTasksCreatorServiceRole66170DF7",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-ingest-create-tasks",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "If there are ingest jobs on queue create tasks to run them",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingingestcreatetasksC7172C2BRef"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.ingest.taskrunner.RunIngestTasksLambda::eventHandler",
            "ReservedConcurrentExecutions": 1,
            "Code": {
              "S3ObjectVersion": "ingest-taskrunner-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "ingest-taskrunner-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Ingest"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestTaskDefinitionExecutionRole831F06BF": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "ecs-tasks.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Ingest"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestTasksCreationPeriodicTriggerAllowEventRuleTestInstanceIngestIngestTasksCreatorCurrentVersionD9ED31931A769A0D": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Ref": "IngestTasksCreatorCurrentVersion4DD1B1140fc74c8dbd66e651c64726664bd7edaa"
            },
            "Action": "lambda:InvokeFunction",
            "SourceArn": {
              "Fn::GetAtt": [
                "IngestTasksCreationPeriodicTriggerEA95A78E",
                "Arn"
              ]
            },
            "Principal": "events.amazonaws.com"
          }
        },
        "IngestJobQueue58C13D64": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "IngestJobDeadLetterQueueCF2B8221",
                  "Arn"
                ]
              }
            },
            "VisibilityTimeout": 900,
            "QueueName": "sleeper-test-instance-IngestJobQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Ingest"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestJobDeadLetterQueueCF2B8221": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "QueueName": "sleeper-test-instance-IngestJobDLQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Ingest"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestTasksCreatorServiceRole66170DF7": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              },
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Ingest"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestTaskDefinitionTaskRole94258059": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "ecs-tasks.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Ingest"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestTaskDefinitionExecutionRoleDefaultPolicy1743F04D": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "IngestTaskDefinitionExecutionRoleDefaultPolicy1743F04D",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "ecr:BatchCheckLayerAvailability",
                    "ecr:GetDownloadUrlForLayer",
                    "ecr:BatchGetImage"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::Join": [
                      "",
                      [
                        "arn:",
                        {
                          "Ref": "AWS::Partition"
                        },
                        ":ecr:test-region:test-account:repository/test-instance/ingest"
                      ]
                    ]
                  }
                },
                {
                  "Action": "ecr:GetAuthorizationToken",
                  "Effect": "Allow",
                  "Resource": "*"
                },
                {
                  "Action": [
                    "logs:CreateLogStream",
                    "logs:PutLogEvents"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingIngestTasks98782505Arn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "IngestTaskDefinitionExecutionRole831F06BF"
              }
            ]
          }
        },
        "IngestTasksCreationPeriodicTriggerEA95A78E": {
          "Type": "AWS::Events::Rule",
          "Properties": {
            "ScheduleExpression": "rate(1 minute)",
            "Description": "Triggers scaling ingest tasks to run queued jobs",
            "State": "ENABLED",
            "Targets": [
              {
                "Arn": {
                  "Ref": "IngestTasksCreatorCurrentVersion4DD1B1140fc74c8dbd66e651c64726664bd7edaa"
                },
                "Id": "Target0"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Ingest"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Name": "test-instance-IngestTasksCreationRule"
          }
        },
        "IngestTasksCreatorCurrentVersion4DD1B1140fc74c8dbd66e651c64726664bd7edaa": {
          "Type": "AWS::Lambda::Version",
          "DependsOn": [
            "IngestClusterAutoStop"
          ],
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "IngestTasksCreator8578ECAC"
            }
          }
        },
        "IngestClusterE0D09E7F": {
          "Type": "AWS::ECS::Cluster",
          "Properties": {
            "ClusterSettings": [
              {
                "Name": "containerInsights",
                "Value": "enhanced"
              }
            ],
            "ClusterName": "sleeper-test-instance-ingest-cluster",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Ingest"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestTaskDefinitionC7FFEC7B": {
          "Type": "AWS::ECS::TaskDefinition",
          "Properties": {
            "ExecutionRoleArn": {
              "Fn::GetAtt": [
                "IngestTaskDefinitionExecutionRole831F06BF",
                "Arn"
              ]
            },
            "TaskRoleArn": {
              "Fn::GetAtt": [
                "IngestTaskDefinitionTaskRole94258059",
                "Arn"
              ]
            },
            "Memory": "4096",
            "ContainerDefinitions": [
              {
                "Environment": [
                  {
                    "Name": "JAVA_TOOL_OPTIONS",
                    "Value": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED"
                  },
                  {
                    "Name": "SLEEPER_CONFIG_BUCKET",
                    "Value": {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                    }
                  }
                ],
                "Essential": true,
                "Image": {
                  "Fn::Join": [
                    "",
                    [
                      "test-account.dkr.ecr.test-region.",
                      {
                        "Ref": "AWS::URLSuffix"
                      },
                      "/test-instance/ingest:1.2.3"
                    ]
                  ]
                },
                "LogConfiguration": {
                  "LogDriver": "awslogs",
                  "Options": {
                    "awslogs-group": {
                      "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingIngestTasks98782505Ref"
                    },
                    "awslogs-stream-prefix": {
                      "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingIngestTasks98782505Ref"
                    },
                    "awslogs-region": "test-region"
                  }
                },
                "Name": "IngestContainer"
              }
            ],
            "Cpu": "2048",
            "Family": "sleeper-test-instance-IngestTask",
            "RequiresCompatibilities": [
              "FARGATE"
            ],
            "NetworkMode": "awsvpc",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Ingest"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestAlarm3DAEDC2F": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "IngestJobDeadLetterQueueCF2B8221",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for ingest jobs",
            "AlarmName": {
              "Fn::GetAtt": [
                "IngestJobDeadLetterQueueCF2B8221",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Ingest"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        }
      }
    },
    "IngestBatcher": {
      "Parameters": {
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingingestbatchercreatejobs490152C0Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingingestbatchersubmitfiles70C40CB8Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn": {
          "Type": "String"
        }
      },
      "Outputs": {
        "TestInstanceIngestBatcherIngestBatcherJobCreationPeriodicTrigger9FD74049Ref": {
          "Value": {
            "Ref": "IngestBatcherJobCreationPeriodicTriggerFAF08A82"
          }
        },
        "TestInstanceIngestBatcherIngestBatcherJobCreationLambda218123AERef": {
          "Value": {
            "Ref": "IngestBatcherJobCreationLambdaE1FDD6DE"
          }
        },
        "TestInstanceIngestBatcherIngestBatcherJobCreationLambdaCurrentVersion9A27FA14Version": {
          "Value": {
            "Fn::GetAtt": [
              "IngestBatcherJobCreationLambdaCurrentVersionED62A44F54e5763d6b6c4ff13371dd9e31809ae7",
              "Version"
            ]
          }
        },
        "TestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FArn": {
          "Value": {
            "Fn::GetAtt": [
              "IngestBatcherSubmitQueue455D6E24",
              "Arn"
            ]
          }
        },
        "TestInstanceIngestBatcherDynamoDBIngestBatcherRequestsTableABCDB5F3Arn": {
          "Value": {
            "Fn::GetAtt": [
              "DynamoDBIngestBatcherRequestsTableF9077058",
              "Arn"
            ]
          }
        },
        "TestInstanceIngestBatcherSubmitToIngestBatcherLambdaFBA369BBRef": {
          "Value": {
            "Ref": "SubmitToIngestBatcherLambda5509FC1C"
          }
        },
        "TestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449Arn": {
          "Value": {
            "Fn::GetAtt": [
              "IngestBatcherSubmitDLQ0910782A",
              "Arn"
            ]
          }
        },
        "TestInstanceIngestBatcherIngestBatcherJobCreationLambdaCurrentVersion9A27FA14Ref": {
          "Value": {
            "Ref": "IngestBatcherJobCreationLambdaCurrentVersionED62A44F54e5763d6b6c4ff13371dd9e31809ae7"
          }
        },
        "TestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449QueueName": {
          "Value": {
            "Fn::GetAtt": [
              "IngestBatcherSubmitDLQ0910782A",
              "QueueName"
            ]
          }
        },
        "TestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FRef": {
          "Value": {
            "Ref": "IngestBatcherSubmitQueue455D6E24"
          }
        },
        "TestInstanceIngestBatcherSubmitToIngestBatcherLambdaCurrentVersion9D7068BDVersion": {
          "Value": {
            "Fn::GetAtt": [
              "SubmitToIngestBatcherLambdaCurrentVersion5F74E217a3551e4601ff714ed84adaa41b630f5f",
              "Version"
            ]
          }
        },
        "TestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449Ref": {
          "Value": {
            "Ref": "IngestBatcherSubmitDLQ0910782A"
          }
        }
      },
      "Resources": {
        "SubmitToIngestBatcherLambdaSqsEventSourceTestInstanceIngestBatcherIngestBatcherSubmitQueue40EEDBD28CAB87B1": {
          "Type": "AWS::Lambda::EventSourceMapping",
          "Properties": {
            "FunctionName": {
              "Ref": "SubmitToIngestBatcherLambda5509FC1C"
            },
            "EventSourceArn": {
              "Fn::GetAtt": [
                "IngestBatcherSubmitQueue455D6E24",
                "Arn"
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestBatcher"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "SubmitToIngestBatcherLambda5509FC1C": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "SubmitToIngestBatcherLambdaServiceRoleDefaultPolicy425D387F",
            "SubmitToIngestBatcherLambdaServiceRole42B3C322"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "SubmitToIngestBatcherLambdaServiceRole42B3C322",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-ingest-batcher-submit-files",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "Triggered by an SQS event that contains a request to ingest a file",
            "Timeout": 20,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingingestbatchersubmitfiles70C40CB8Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.ingest.batcher.submitter.IngestBatcherSubmitterLambda::handleRequest",
            "Code": {
              "S3ObjectVersion": "ingest-batcher-submitter-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "ingest-batcher-submitter-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestBatcher"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestBatcherJobCreationLambdaServiceRole487921CC": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestBatcher"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "DynamoDBIngestBatcherRequestsTableF9077058": {
          "Type": "AWS::DynamoDB::Table",
          "DeletionPolicy": "Retain",
          "UpdateReplacePolicy": "Retain",
          "Properties": {
            "TableName": "sleeper-test-instance-ingest-batcher-store",
            "AttributeDefinitions": [
              {
                "AttributeName": "JobId",
                "AttributeType": "S"
              },
              {
                "AttributeName": "FilePath",
                "AttributeType": "S"
              }
            ],
            "BillingMode": "PAY_PER_REQUEST",
            "PointInTimeRecoverySpecification": {
              "PointInTimeRecoveryEnabled": false
            },
            "KeySchema": [
              {
                "AttributeName": "JobId",
                "KeyType": "HASH"
              },
              {
                "AttributeName": "FilePath",
                "KeyType": "RANGE"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestBatcher"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "TimeToLiveSpecification": {
              "Enabled": true,
              "AttributeName": "ExpiryTime"
            }
          }
        },
        "IngestBatcherJobCreationPeriodicTriggerAllowEventRuleTestInstanceIngestBatcherIngestBatcherJobCreationLambdaCurrentVersion37B5B75AA5B69EE4": {
          "Type": "AWS::Lambda::Permission",
          "Properties": {
            "FunctionName": {
              "Ref": "IngestBatcherJobCreationLambdaCurrentVersionED62A44F54e5763d6b6c4ff13371dd9e31809ae7"
            },
            "Action": "lambda:InvokeFunction",
            "SourceArn": {
              "Fn::GetAtt": [
                "IngestBatcherJobCreationPeriodicTriggerFAF08A82",
                "Arn"
              ]
            },
            "Principal": "events.amazonaws.com"
          }
        },
        "SubmitToIngestBatcherLambdaCurrentVersion5F74E217a3551e4601ff714ed84adaa41b630f5f": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "SubmitToIngestBatcherLambda5509FC1C"
            }
          }
        },
        "IngestBatcherJobCreationLambdaServiceRoleDefaultPolicyFA7D8B61": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "IngestBatcherJobCreationLambdaServiceRoleDefaultPolicyFA7D8B61",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "DynamoDBIngestBatcherRequestsTableF9077058",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "DynamoDBIngestBatcherRequestsTableF9077058",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCArn"
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "IngestBatcherJobCreationLambdaServiceRole487921CC"
              }
            ]
          }
        },
        "IngestBatcherJobCreationPeriodicTriggerFAF08A82": {
          "Type": "AWS::Events::Rule",
          "Properties": {
            "ScheduleExpression": "rate(1 minute)",
            "Description": "Triggers creation of jobs from files submitted to the ingest batcher",
            "State": "ENABLED",
            "Targets": [
              {
                "Arn": {
                  "Ref": "IngestBatcherJobCreationLambdaCurrentVersionED62A44F54e5763d6b6c4ff13371dd9e31809ae7"
                },
                "Id": "Target0"
              }
            ],
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestBatcher"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Name": "test-instance-IngestBatcherJobCreationRule"
          }
        },
        "IngestBatcherJobCreationLambdaE1FDD6DE": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "IngestBatcherJobCreationLambdaServiceRoleDefaultPolicyFA7D8B61",
            "IngestBatcherJobCreationLambdaServiceRole487921CC"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "IngestBatcherJobCreationLambdaServiceRole487921CC",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-ingest-batcher-create-jobs",
            "MemorySize": 1024,
            "Runtime": "java17",
            "Description": "Create jobs by batching up submitted file ingest requests",
            "Timeout": 900,
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingingestbatchercreatejobs490152C0Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.ingest.batcher.job.creator.IngestBatcherJobCreatorLambda::eventHandler",
            "ReservedConcurrentExecutions": 1,
            "Code": {
              "S3ObjectVersion": "ingest-batcher-job-creator-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "ingest-batcher-job-creator-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestBatcher"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestBatcherJobCreationLambdaCurrentVersionED62A44F54e5763d6b6c4ff13371dd9e31809ae7": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "IngestBatcherJobCreationLambdaE1FDD6DE"
            }
          }
        },
        "SubmitToIngestBatcherLambdaServiceRole42B3C322": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestBatcher"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "SubmitToIngestBatcherLambdaServiceRoleDefaultPolicy425D387F": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "SubmitToIngestBatcherLambdaServiceRoleDefaultPolicy425D387F",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "sqs:ReceiveMessage",
                    "sqs:ChangeMessageVisibility",
                    "sqs:GetQueueUrl",
                    "sqs:DeleteMessage",
                    "sqs:GetQueueAttributes"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "IngestBatcherSubmitQueue455D6E24",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:BatchWriteItem",
                    "dynamodb:PutItem",
                    "dynamodb:UpdateItem",
                    "dynamodb:DeleteItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "DynamoDBIngestBatcherRequestsTableF9077058",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "DynamoDBIngestBatcherRequestsTableF9077058",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "sqs:SendMessage",
                    "sqs:GetQueueAttributes",
                    "sqs:GetQueueUrl"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Fn::GetAtt": [
                      "IngestBatcherSubmitDLQ0910782A",
                      "Arn"
                    ]
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Arn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:BatchGetItem",
                    "dynamodb:Query",
                    "dynamodb:GetItem",
                    "dynamodb:Scan",
                    "dynamodb:ConditionCheckItem",
                    "dynamodb:DescribeTable"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "dynamodb:GetRecords",
                    "dynamodb:GetShardIterator"
                  ],
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DArn"
                  }
                },
                {
                  "Action": [
                    "s3:GetObject*",
                    "s3:GetBucket*",
                    "s3:List*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DArn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "Roles": [
              {
                "Ref": "SubmitToIngestBatcherLambdaServiceRole42B3C322"
              }
            ]
          }
        },
        "IngestBatcherSubmitDLQ0910782A": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "QueueName": "sleeper-test-instance-IngestBatcherSubmitDLQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestBatcher"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestBatcherSubmitQueue455D6E24": {
          "Type": "AWS::SQS::Queue",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "RedrivePolicy": {
              "maxReceiveCount": 1,
              "deadLetterTargetArn": {
                "Fn::GetAtt": [
                  "IngestBatcherSubmitDLQ0910782A",
                  "Arn"
                ]
              }
            },
            "VisibilityTimeout": 20,
            "QueueName": "sleeper-test-instance-IngestBatcherSubmitQ",
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestBatcher"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "IngestBatcherAlarm090F922D": {
          "Type": "AWS::CloudWatch::Alarm",
          "Properties": {
            "ComparisonOperator": "GreaterThanThreshold",
            "TreatMissingData": "ignore",
            "Dimensions": [
              {
                "Name": "QueueName",
                "Value": {
                  "Fn::GetAtt": [
                    "IngestBatcherSubmitDLQ0910782A",
                    "QueueName"
                  ]
                }
              }
            ],
            "Period": 60,
            "EvaluationPeriods": 1,
            "Namespace": "AWS/SQS",
            "AlarmActions": [
              {
                "Ref": "referencetoTestInstanceTopicNestedStackTopicNestedStackResource50CFBB62OutputsTestInstanceTopicErrorsTopic4F3F7EF3Ref"
              }
            ],
            "MetricName": "ApproximateNumberOfMessagesVisible",
            "AlarmDescription": "Alarms if there are any messages on the dead letter queue for ingest batcher submission",
            "AlarmName": {
              "Fn::GetAtt": [
                "IngestBatcherSubmitDLQ0910782A",
                "QueueName"
              ]
            },
            "Statistic": "Sum",
            "DatapointsToAlarm": 1,
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "IngestBatcher"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ],
            "Threshold": 0
          }
        }
      }
    },
    "Dashboard": {
      "Parameters": {
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922QueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationDLQB8A078BDQueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1QueueName": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956QueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitDLQ5632FB33QueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449QueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313QueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFQueueName": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157QueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6QueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528QueueName": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93QueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3QueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DQueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueueQueryDeadLetterQueue496F8592QueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCQueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobDeadLetterQueueA9E923E6QueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465QueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobDeadLetterQueueE7DE67BFQueueName": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECQueueName": {
          "Type": "String"
        }
      },
      "Outputs": {
        "DashboardUrl": {
          "Value": "https://test-region.console.aws.amazon.com/cloudwatch/home#dashboards:name\u003dtest-instance;expand\u003dtrue"
        }
      },
      "Resources": {
        "dashboardC616E8C4": {
          "Type": "AWS::CloudWatch::Dashboard",
          "Properties": {
            "DashboardName": "test-instance",
            "DashboardBody": {
              "Fn::Join": [
                "",
                [
                  "{\"widgets\":[{\"type\":\"metric\",\"width\":24,\"height\":3,\"x\":0,\"y\":0,\"properties\":{\"view\":\"singleValue\",\"title\":\"Errors\",\"region\":\"",
                  {
                    "Ref": "AWS::Region"
                  },
                  "\",\"metrics\":[[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465QueueName"
                  },
                  "\",{\"label\":\"Dead letters for the state store committer\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528QueueName"
                  },
                  "\",{\"label\":\"Dead letters for transaction log snapshot creation\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922QueueName"
                  },
                  "\",{\"label\":\"Dead letters for transaction log snapshot deletion\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3QueueName"
                  },
                  "\",{\"label\":\"Dead letters for transaction log transaction deletion\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1QueueName"
                  },
                  "\",{\"label\":\"Dead letters for table metrics generation triggers\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobDeadLetterQueueA9E923E6QueueName"
                  },
                  "\",{\"label\":\"Dead letters for starting a EMRServerless Spark job\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313QueueName"
                  },
                  "\",{\"label\":\"Dead letters for garbage collection\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECQueueName"
                  },
                  "\",{\"label\":\"Dead letters for pending compaction job batches\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitDLQ5632FB33QueueName"
                  },
                  "\",{\"label\":\"Dead letters for compaction commits\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DQueueName"
                  },
                  "\",{\"label\":\"Dead letters for compaction jobs\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationDLQB8A078BDQueueName"
                  },
                  "\",{\"label\":\"Dead letters for compaction job creation triggers\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157QueueName"
                  },
                  "\",{\"label\":\"Dead letters for finding partitions to split\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956QueueName"
                  },
                  "\",{\"label\":\"Dead letters for partition splitting\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueueQueryDeadLetterQueue496F8592QueueName"
                  },
                  "\",{\"label\":\"Dead letters for queries\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFQueueName"
                  },
                  "\",{\"label\":\"Dead letters for leaf partition queries\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobDeadLetterQueueE7DE67BFQueueName"
                  },
                  "\",{\"label\":\"Dead letters for ingest jobs\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449QueueName"
                  },
                  "\",{\"label\":\"Dead letters for ingest batcher submission\",\"stat\":\"Sum\"}]]}},{\"type\":\"text\",\"width\":24,\"height\":1,\"x\":0,\"y\":3,\"properties\":{\"markdown\":\"## Standard Ingest\"}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":0,\"y\":4,\"properties\":{\"view\":\"timeSeries\",\"title\":\"NumberOfJobsSubmitted\",\"region\":\"",
                  {
                    "Ref": "AWS::Region"
                  },
                  "\",\"metrics\":[[\"AWS/SQS\",\"NumberOfMessagesSent\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCQueueName"
                  },
                  "\",{\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":6,\"y\":4,\"properties\":{\"view\":\"timeSeries\",\"title\":\"NumberOfJobsWaiting\",\"region\":\"",
                  {
                    "Ref": "AWS::Region"
                  },
                  "\",\"metrics\":[[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCQueueName"
                  },
                  "\"]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":12,\"y\":4,\"properties\":{\"view\":\"timeSeries\",\"title\":\"AgeOfOldestWaitingJob\",\"region\":\"",
                  {
                    "Ref": "AWS::Region"
                  },
                  "\",\"metrics\":[[\"AWS/SQS\",\"ApproximateAgeOfOldestMessage\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCQueueName"
                  },
                  "\",{\"stat\":\"Maximum\"}]],\"yAxis\":{}}},{\"type\":\"text\",\"width\":24,\"height\":1,\"x\":0,\"y\":10,\"properties\":{\"markdown\":\"## Compactions and Splits\"}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":0,\"y\":11,\"properties\":{\"view\":\"timeSeries\",\"title\":\"NumberOfJobsSubmitted\",\"region\":\"",
                  {
                    "Ref": "AWS::Region"
                  },
                  "\",\"metrics\":[[\"AWS/SQS\",\"NumberOfMessagesSent\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6QueueName"
                  },
                  "\",{\"label\":\"Compaction\",\"stat\":\"Sum\"}],[\"AWS/SQS\",\"NumberOfMessagesSent\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93QueueName"
                  },
                  "\",{\"label\":\"Partition Splits\",\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":6,\"y\":11,\"properties\":{\"view\":\"timeSeries\",\"title\":\"NumberOfJobsWaiting\",\"region\":\"",
                  {
                    "Ref": "AWS::Region"
                  },
                  "\",\"metrics\":[[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6QueueName"
                  },
                  "\",{\"label\":\"Compaction\"}],[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93QueueName"
                  },
                  "\",{\"label\":\"Partition Splits\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":6,\"height\":6,\"x\":12,\"y\":11,\"properties\":{\"view\":\"timeSeries\",\"title\":\"AgeOfOldestWaitingJob\",\"region\":\"",
                  {
                    "Ref": "AWS::Region"
                  },
                  "\",\"metrics\":[[\"AWS/SQS\",\"ApproximateAgeOfOldestMessage\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6QueueName"
                  },
                  "\",{\"label\":\"Compaction\",\"stat\":\"Maximum\"}],[\"AWS/SQS\",\"ApproximateAgeOfOldestMessage\",\"QueueName\",\"",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93QueueName"
                  },
                  "\",{\"label\":\"Partition Splits\",\"stat\":\"Maximum\"}]],\"yAxis\":{}}}]}"
                ]
              ]
            }
          }
        }
      }
    },
    "Properties": {
      "Parameters": {
        "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueueQueryDeadLetterQueue496F8592Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECRef": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DRef": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchQCAC69541Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpropertieswriterprovider89DFF902Ref": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationDLQB8A078BDRef": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherSubmitToIngestBatcherLambdaFBA369BBRef": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreatorCurrentVersion57E78EC7Version": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCluster66A74FE8Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationDLQB8A078BDArn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherJobCreationPeriodicTrigger9FD74049Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitDLQ5632FB33Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotCreationScheduleD7BB96C6Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FRef": {
          "Type": "String"
        },
        "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobQueue5B390950Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationPeriodicTrigger8BCEF486Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobDeadLetterQueueE7DE67BFRef": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryTrackingTableD59EF8F3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryExecutorLambdaServiceRoleF73B7ACCRef": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherSubmitToIngestBatcherLambdaCurrentVersion9D7068BDVersion": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestTasksCreationPeriodicTriggerCA9BE66FRef": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobDeadLetterQueueE7DE67BFArn": {
          "Type": "String"
        },
        "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterCurrentVersionSqsEventSourceTestInstanceStateStoreCommitterStateStoreCommitterQueue33B0078EDD58441ARef": {
          "Type": "String"
        },
        "referencetoTestInstancePoliciesNestedStackPoliciesNestedStackResourceD8B71FB2OutputsTestInstancePoliciesAdminRole0994A69EArn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGarbageCollectorTrigger48F33D6BRef": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Ref": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitTriggerLambdaCurrentVersionD6930CA9Version": {
          "Type": "String"
        },
        "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobQueueD56E334DArn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCArn": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobQueue5B390950Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CERef": {
          "Type": "String"
        },
        "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerless6FCED42BApplicationId": {
          "Type": "String"
        },
        "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FRef": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherJobCreationLambdaCurrentVersion9A27FA14Version": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCRef": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFArn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitQueue4935D065Arn": {
          "Type": "String"
        },
        "referencetoTestInstancePoliciesNestedStackPoliciesNestedStackResourceD8B71FB2OutputsTestInstancePoliciesECSC2F932F2GroupId": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsQueue40C89520Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitDLQ5632FB33Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueueQueryDeadLetterQueue496F8592Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreatorFE525A06Ref": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionScheduleBC70F1ECRef": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationQueue04DB707FArn": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreationPeriodicTrigger39ADC4A9Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryQueue64615BA9Arn": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsBucket6975CD73Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGarbageCollectorPeriodicTrigger26CF0C4ERef": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatestorecommitterCB6F35F0Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestClusterA4B79DA6Ref": {
          "Type": "String"
        },
        "referencetoTestInstancePoliciesNestedStackPoliciesNestedStackResourceD8B71FB2OutputsTestInstancePoliciesIngestByQueueRoleC3D723FBArn": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFRef": {
          "Type": "String"
        },
        "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionSchedule579388F9Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationQueue04DB707FRef": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessEmrServerlessRole192390D8Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DRef": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BARef": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FRef": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitPeriodicTrigger6354C494Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobQueueD56E334DRef": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsTriggerCurrentVersion65A885FBVersion": {
          "Type": "String"
        },
        "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpropertieswriterC0FF2AE3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobsCreationTriggerC181F572Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobsCreationTriggerCurrentVersion5E26F8A5Version": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsQueue40C89520Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestTasksCreatorCurrentVersion7CB52F7CVersion": {
          "Type": "String"
        },
        "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGarbageCollectorTriggerCurrentVersionAA3B84DDVersion": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitQueue4935D065Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchQCAC69541Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryQueue64615BA9Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsPublishSchedule30F78292Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsTrigger1B6EB004Ref": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitTriggerLambda41F9A274Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestTasksCreator3E24B967Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherJobCreationLambda218123AERef": {
          "Type": "String"
        },
        "referencetoTestInstancePoliciesNestedStackPoliciesNestedStackResourceD8B71FB2OutputsTestInstancePoliciesDirectIngestRole53BF6564Arn": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceBulkImportEMRCommonNestedStackBulkImportEMRCommonNestedStackResource26CE6AACOutputsTestInstanceBulkImportEMRCommonEmrRoleCE2BA540Ref": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Ref": {
          "Type": "String"
        },
        "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceBulkImportEMRCommonNestedStackBulkImportEMRCommonNestedStackResource26CE6AACOutputsTestInstanceBulkImportEMRCommonEc2Role5E4FFAE3Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DRef": {
          "Type": "String"
        },
        "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Arn": {
          "Type": "String"
        },
        "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Ref": {
          "Type": "String"
        },
        "referencetoTestInstanceEmrStudioNestedStackEmrStudioNestedStackResource42F85517OutputsTestInstanceEmrStudioTestInstanceEmrStudio7355CF8DC8B80669Url": {
          "Type": "String"
        }
      },
      "Resources": {
        "InstancePropertiesWriterLambdaServiceRole1C112B67": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Properties"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "InstancePropertiesWriterLambdaServiceRoleDefaultPolicy2C240AB0": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "InstancePropertiesWriterLambdaServiceRoleDefaultPolicy2C240AB0",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": [
                    "s3:DeleteObject*",
                    "s3:PutObject",
                    "s3:PutObjectLegalHold",
                    "s3:PutObjectRetention",
                    "s3:PutObjectTagging",
                    "s3:PutObjectVersionTagging",
                    "s3:Abort*"
                  ],
                  "Effect": "Allow",
                  "Resource": [
                    {
                      "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                    },
                    {
                      "Fn::Join": [
                        "",
                        [
                          {
                            "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Arn"
                          },
                          "/*"
                        ]
                      ]
                    }
                  ]
                }
              ]
            },
            "Roles": [
              {
                "Ref": "InstancePropertiesWriterLambdaServiceRole1C112B67"
              }
            ]
          }
        },
        "InstancePropertiesWriterLambda106E1AB8": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "InstancePropertiesWriterLambdaServiceRoleDefaultPolicy2C240AB0",
            "InstancePropertiesWriterLambdaServiceRole1C112B67"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "InstancePropertiesWriterLambdaServiceRole1C112B67",
                "Arn"
              ]
            },
            "FunctionName": "sleeper-test-instance-properties-writer",
            "MemorySize": 2048,
            "Runtime": "java17",
            "Description": "Lambda for writing instance properties to S3 upon initialisation and teardown",
            "LoggingConfig": {
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpropertieswriterC0FF2AE3Ref"
              }
            },
            "Environment": {
              "Variables": {
                "JAVA_TOOL_OPTIONS": "--add-opens\u003djava.base/java.nio\u003dALL-UNNAMED --add-opens\u003djava.base/sun.nio.ch\u003dALL-UNNAMED --add-opens\u003djava.base/java.util\u003dALL-UNNAMED --add-opens\u003djava.base/java.lang.invoke\u003dALL-UNNAMED",
                "SLEEPER_CONFIG_BUCKET": {
                  "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                }
              }
            },
            "Handler": "sleeper.cdk.custom.InstancePropertiesWriterLambda::handleEvent",
            "Code": {
              "S3ObjectVersion": "cdk-custom-resources-test-version",
              "S3Bucket": "sleeper-test-instance-jars",
              "S3Key": "cdk-custom-resources-1.2.3.jar"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Properties"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "PropertiesWriterProviderframeworkonEventServiceRole148772E9": {
          "Type": "AWS::IAM::Role",
          "Properties": {
            "ManagedPolicyArns": [
              {
                "Fn::Join": [
                  "",
                  [
                    "arn:",
                    {
                      "Ref": "AWS::Partition"
                    },
                    ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
                  ]
                ]
              }
            ],
            "AssumeRolePolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "sts:AssumeRole",
                  "Effect": "Allow",
                  "Principal": {
                    "Service": "lambda.amazonaws.com"
                  }
                }
              ]
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Properties"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        },
        "InstanceProperties": {
          "Type": "Custom::InstanceProperties",
          "DeletionPolicy": "Delete",
          "UpdateReplacePolicy": "Delete",
          "Properties": {
            "ServiceToken": {
              "Fn::GetAtt": [
                "PropertiesWriterProviderframeworkonEvent01372F53",
                "Arn"
              ]
            },
            "properties": {
              "Fn::Join": [
                "",
                [
                  "sleeper.ingest.batcher.submit.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449Arn"
                  },
                  "\nsleeper.subnets\u003dtest-subnet\nsleeper.gc.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313Ref"
                  },
                  "\nsleeper.ingest.arrow.max.single.write.to.file.rows\u003d128\nsleeper.statestore.committer.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465Ref"
                  },
                  "\nsleeper.gc.lambda.function\u003d",
                  {
                    "Ref": "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGarbageCollectorTrigger48F33D6BRef"
                  },
                  "\\:",
                  {
                    "Ref": "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGarbageCollectorTriggerCurrentVersionAA3B84DDVersion"
                  },
                  "\nsleeper.statestore.transactionlog.snapshots.creation.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Arn"
                  },
                  "\nsleeper.partition.splitting.job.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956Arn"
                  },
                  "\nsleeper.bulk.import.emr.ec2.role.name\u003d",
                  {
                    "Ref": "referencetoTestInstanceBulkImportEMRCommonNestedStackBulkImportEMRCommonNestedStackResource26CE6AACOutputsTestInstanceBulkImportEMRCommonEc2Role5E4FFAE3Ref"
                  },
                  "\nsleeper.query.leaf.partition.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFRef"
                  },
                  "\nsleeper.compaction.task.creation.lambda.function\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreatorFE525A06Ref"
                  },
                  "\\:",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreatorCurrentVersion57E78EC7Version"
                  },
                  "\nsleeper.ingest.batcher.submit.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitDLQ615E0449Ref"
                  },
                  "\nsleeper.fs.s3a.max-connections\u003d5\nsleeper.statestore.committer.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterDLQ73D14465Arn"
                  },
                  "\nsleeper.region\u003dtest-region\nsleeper.statestore.transactionlog.dynamo.partition.log.table\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStorePartitionTransactionLogTable82098866Ref"
                  },
                  "\nsleeper.statestore.transactionlog.snapshots.creation.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotQueue3EEC9B32Ref"
                  },
                  "\nsleeper.query.role.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryExecutorLambdaServiceRoleF73B7ACCRef"
                  },
                  "\nsleeper.ingest.batcher.submit.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FArn"
                  },
                  "\nsleeper.tables.name.index.dynamo.table\u003d",
                  {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByNameDynamoDBTable8F569277Ref"
                  },
                  "\nsleeper.statestore.transactionlog.transaction.deletion.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3Arn"
                  },
                  "\nsleeper.bulk.import.emr.security.conf.name\u003dsleeper-test-instance-EMRSecurityConfigurationProps\nsleeper.statestore.transactionlog.dynamo.latest.snapshots.table\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogLatestSnapshotsTable96DB8F9FRef"
                  },
                  "\nsleeper.config.bucket\u003d",
                  {
                    "Ref": "referencetoTestInstanceConfigurationNestedStackConfigurationNestedStackResourceB866C9A7OutputsTestInstanceConfigurationConfigBucket257D90F2Ref"
                  },
                  "\nsleeper.statestore.transactionlog.snapshots.deletion.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Ref"
                  },
                  "\nsleeper.partition.splitting.rule\u003d",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitPeriodicTrigger6354C494Ref"
                  },
                  "\nsleeper.partition.splitting.finder.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157Arn"
                  },
                  "\nsleeper.query.tracker.table.name\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryTrackingTableD59EF8F3Ref"
                  },
                  "\nsleeper.query.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Ref"
                  },
                  "\nsleeper.ingest.batcher.job.creation.rule\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherJobCreationPeriodicTrigger9FD74049Ref"
                  },
                  "\nsleeper.sqs.table.metrics.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobQueue5B390950Ref"
                  },
                  "\nsleeper.ingest.max.local.rows\u003d1000\nsleeper.statestore.transactionlog.transaction.deletion.rule\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionScheduleBC70F1ECRef"
                  },
                  "\nsleeper.partition.splitting.finder.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitDeadLetterQueue2C83A157Ref"
                  },
                  "\nsleeper.bulk.import.emr.serverless.release\u003demr-1.2.3\nsleeper.tables.id.index.dynamo.table\u003d",
                  {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByIdDynamoDBTable4933A725Ref"
                  },
                  "\nsleeper.lambda.table.metrics.function\u003d",
                  {
                    "Ref": "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsTrigger1B6EB004Ref"
                  },
                  "\\:",
                  {
                    "Ref": "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsTriggerCurrentVersion65A885FBVersion"
                  },
                  "\nsleeper.partition.splitting.job.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingDeadLetterQueue5B7A4956Ref"
                  },
                  "\nsleeper.statestore.transactionlog.snapshots.deletion.rule\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionSchedule579388F9Ref"
                  },
                  "\nsleeper.bulk.import.emr.serverless.application.id\u003d",
                  {
                    "Ref": "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerless6FCED42BApplicationId"
                  },
                  "\nsleeper.ingest.arrow.working.buffer.bytes\u003d16777216\nsleeper.query.leaf.partition.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryDeadLetterQueueD8816EFFArn"
                  },
                  "\nsleeper.vpc\u003dvpc-12345\nsleeper.sqs.table.metrics.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobQueue5B390950Arn"
                  },
                  "\nsleeper.ecs.security.group\u003d",
                  {
                    "Ref": "referencetoTestInstancePoliciesNestedStackPoliciesNestedStackResourceD8B71FB2OutputsTestInstancePoliciesECSC2F932F2GroupId"
                  },
                  "\nsleeper.statestore.transactionlog.snapshots.creation.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528Ref"
                  },
                  "\nsleeper.statestore.committer.log.group\u003d",
                  {
                    "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingstatestorecommitterCB6F35F0Ref"
                  },
                  "\nsleeper.compaction.job.creation.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationQueue04DB707FArn"
                  },
                  "\nsleeper.partition.splitting.finder.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Ref"
                  },
                  "\nsleeper.compaction.commit.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitDLQ5632FB33Ref"
                  },
                  "\nsleeper.compaction.job.creation.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationDLQB8A078BDArn"
                  },
                  "\nsleeper.ingest.batcher.submit.lambda\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherSubmitToIngestBatcherLambdaFBA369BBRef"
                  },
                  "\\:",
                  {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherSubmitToIngestBatcherLambdaCurrentVersion9D7068BDVersion"
                  },
                  "\nsleeper.compaction.job.creation.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationQueue04DB707FRef"
                  },
                  "\nsleeper.partition.splitting.finder.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitBatchQueueC09A0741Arn"
                  },
                  "\nsleeper.statestore.transactionlog.snapshots.deletion.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionQueue593263E8Arn"
                  },
                  "\nsleeper.compaction.commit.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitDLQ5632FB33Arn"
                  },
                  "\nsleeper.query.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueue61C01E76Arn"
                  },
                  "\nsleeper.bulk.import.emr.serverless.studio.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceEmrStudioNestedStackEmrStudioNestedStackResource42F85517OutputsTestInstanceEmrStudioTestInstanceEmrStudio7355CF8DC8B80669Url"
                  },
                  "\nsleeper.statestore.committer.event.source.id\u003d",
                  {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterCurrentVersionSqsEventSourceTestInstanceStateStoreCommitterStateStoreCommitterQueue33B0078EDD58441ARef"
                  },
                  "\nsleeper.gc.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobQueueD56E334DRef"
                  },
                  "\nsleeper.ingest.batcher.job.creation.lambda\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherJobCreationLambda218123AERef"
                  },
                  "\\:",
                  {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherJobCreationLambdaCurrentVersion9A27FA14Version"
                  },
                  "\nsleeper.ingest.rule\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestTasksCreationPeriodicTriggerCA9BE66FRef"
                  },
                  "\nsleeper.ingest.job.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCArn"
                  },
                  "\nsleeper.statestore.transactionlog.dynamo.file.log.table\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreFileTransactionLogTable79925701Ref"
                  },
                  "\nsleeper.bulk.import.emr.serverless.cluster.name\u003dsleeper-test-instance\nsleeper.compaction.fargate.task.definition\u003dsleeper-test-instance-CompactionTaskOnFargate\nsleeper.query.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueueQueryDeadLetterQueue496F8592Ref"
                  },
                  "\nsleeper.compaction.job.creation.trigger.lambda.function\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobsCreationTriggerC181F572Ref"
                  },
                  "\\:",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobsCreationTriggerCurrentVersion5E26F8A5Version"
                  },
                  "\nsleeper.ingest.direct.role.arn\u003d",
                  {
                    "Ref": "referencetoTestInstancePoliciesNestedStackPoliciesNestedStackResourceD8B71FB2OutputsTestInstancePoliciesDirectIngestRole53BF6564Arn"
                  },
                  "\nsleeper.compaction.commit.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitQueue4935D065Ref"
                  },
                  "\nsleeper.gc.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobQueueD56E334DArn"
                  },
                  "\nsleeper.gc.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGCJobDeadLetterQueueF823F313Arn"
                  },
                  "\nsleeper.statestore.transactionlog.snapshots.creation.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeadLetterQueueDC73D528Arn"
                  },
                  "\nsleeper.query.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryQueueNestedStackQueryQueueNestedStackResource266433F9OutputsTestInstanceQueryQueueQueryDeadLetterQueue496F8592Arn"
                  },
                  "\nsleeper.partition.splitting.job.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Ref"
                  },
                  "\nsleeper.version\u003d1.2.3\nsleeper.bulk.import.emr.serverless.role.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessEmrServerlessRole192390D8Arn"
                  },
                  "\nsleeper.admin.role.arn\u003d",
                  {
                    "Ref": "referencetoTestInstancePoliciesNestedStackPoliciesNestedStackResourceD8B71FB2OutputsTestInstancePoliciesAdminRole0994A69EArn"
                  },
                  "\nsleeper.compaction.commit.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCommitQueue4935D065Arn"
                  },
                  "\nsleeper.jars.bucket\u003dsleeper-test-instance-jars\nsleeper.partition.splitting.job.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingPartitionSplittingJobQueueCBD86C93Arn"
                  },
                  "\nsleeper.query.results.bucket\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsBucket6975CD73Ref"
                  },
                  "\nsleeper.ingest.arrow.batch.buffer.bytes\u003d16777216\nsleeper.statestore.transactionlog.snapshots.creation.rule\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotCreationScheduleD7BB96C6Ref"
                  },
                  "\nsleeper.compaction.job.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DArn"
                  },
                  "\nsleeper.default.table.statestore.transactionlog.snapshot.load.min.transactions.ahead\u003d1\nsleeper.compaction.job.creation.rule\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationPeriodicTrigger8BCEF486Ref"
                  },
                  "\nsleeper.ingest.job.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobQueue349E97BCRef"
                  },
                  "\nsleeper.gc.rule\u003d",
                  {
                    "Ref": "referencetoTestInstanceGarbageCollectorNestedStackGarbageCollectorNestedStackResourceF5AFBC27OutputsTestInstanceGarbageCollectorGarbageCollectorPeriodicTrigger26CF0C4ERef"
                  },
                  "\nsleeper.ingest.cluster\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestClusterA4B79DA6Ref"
                  },
                  "\nsleeper.query.leaf.partition.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryQueue64615BA9Ref"
                  },
                  "\nsleeper.ingest.task.definition.family\u003dsleeper-test-instance-IngestTask\nsleeper.bulk.import.emr.serverless.job.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FArn"
                  },
                  "\nsleeper.compaction.job.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsDeadLetterQueue8829DA3DRef"
                  },
                  "\nsleeper.query.results.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsQueue40C89520Arn"
                  },
                  "\nsleeper.data.bucket\u003d",
                  {
                    "Ref": "referencetoTestInstanceTableDataNestedStackTableDataNestedStackResourceA3ECDA9FOutputsTestInstanceTableDataTableDataBucket68FE959DRef"
                  },
                  "\nsleeper.ingest.partition.refresh.period\u003d2147483647\nsleeper.bulk.import.emr.role.name\u003d",
                  {
                    "Ref": "referencetoTestInstanceBulkImportEMRCommonNestedStackBulkImportEMRCommonNestedStackResource26CE6AACOutputsTestInstanceBulkImportEMRCommonEmrRoleCE2BA540Ref"
                  },
                  "\nsleeper.bulk.import.bucket\u003d",
                  {
                    "Ref": "referencetoTestInstanceBulkImportBucketNestedStackBulkImportBucketNestedStackResource454CC05EOutputsTestInstanceBulkImportBucket58F540BARef"
                  },
                  "\nsleeper.bulk.import.emr.serverless.job.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceBulkImportEMRServerlessNestedStackBulkImportEMRServerlessNestedStackResourceD565E782OutputsTestInstanceBulkImportEMRServerlessBulkImportEMRServerlessJobQueueA66BE23FRef"
                  },
                  "\nsleeper.statestore.transactionlog.transaction.deletion.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Ref"
                  },
                  "\nsleeper.account\u003dtest-account\nsleeper.compaction.job.creation.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobCreationDLQB8A078BDRef"
                  },
                  "\nsleeper.statestore.transactionlog.transaction.deletion.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionQueue6BB38617Arn"
                  },
                  "\nsleeper.ingest.lambda.function\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestTasksCreator3E24B967Ref"
                  },
                  "\\:",
                  {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestTasksCreatorCurrentVersion7CB52F7CVersion"
                  },
                  "\nsleeper.statestore.committer.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CERef"
                  },
                  "\nsleeper.default.table.statestore.commit.async.behaviour\u003ddisabled\nsleeper.ingest.by.queue.role.arn\u003d",
                  {
                    "Ref": "referencetoTestInstancePoliciesNestedStackPoliciesNestedStackResourceD8B71FB2OutputsTestInstancePoliciesIngestByQueueRoleC3D723FBArn"
                  },
                  "\nsleeper.partition.splitting.trigger.lambda.function\u003d",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitTriggerLambda41F9A274Ref"
                  },
                  "\\:",
                  {
                    "Ref": "referencetoTestInstancePartitionSplittingNestedStackPartitionSplittingNestedStackResourceB4D3E8DBOutputsTestInstancePartitionSplittingFindPartitionsToSplitTriggerLambdaCurrentVersionD6930CA9Version"
                  },
                  "\nsleeper.compaction.pending.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECArn"
                  },
                  "\nsleeper.statestore.committer.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceStateStoreCommitterNestedStackStateStoreCommitterNestedStackResourceCC49BA8COutputsTestInstanceStateStoreCommitterStateStoreCommitterQueue595DA4CEArn"
                  },
                  "\nsleeper.compaction.job.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Arn"
                  },
                  "\nsleeper.compaction.pending.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchDLQE42B71ECRef"
                  },
                  "\nsleeper.tags\u003dInstanceID,test-instance\nsleeper.ingest.arrow.max.local.store.bytes\u003d536870912\nsleeper.sqs.table.metrics.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1Ref"
                  },
                  "\nsleeper.query.leaf.partition.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryLeafPartitionQueryQueue64615BA9Arn"
                  },
                  "\nsleeper.compaction.pending.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchQCAC69541Ref"
                  },
                  "\nsleeper.compaction.job.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionJobDefinitionsQueueFBECFCD6Ref"
                  },
                  "\nsleeper.schedule.table.metrics.rule\u003d",
                  {
                    "Ref": "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsPublishSchedule30F78292Ref"
                  },
                  "\nsleeper.ingest.job.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobDeadLetterQueueE7DE67BFRef"
                  },
                  "\nsleeper.statestore.transactionlog.transaction.deletion.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogTransactionNestedStackTransactionLogTransactionNestedStackResource49461D99OutputsTestInstanceTransactionLogTransactionTransactionLogTransactionDeletionDeadLetterQueue9AE45FC3Ref"
                  },
                  "\nsleeper.compaction.cluster\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionCluster66A74FE8Ref"
                  },
                  "\nsleeper.query.results.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceQueryNestedStackQueryNestedStackResource79C6CBEEOutputsTestInstanceQueryQueryResultsQueue40C89520Ref"
                  },
                  "\nsleeper.id\u003dtest-instance\nsleeper.ingest.memory.max.batch.size\u003d100000\nsleeper.statestore.transactionlog.snapshots.deletion.dlq.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922Ref"
                  },
                  "\nsleeper.ingest.batcher.submit.queue.url\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestBatcherNestedStackIngestBatcherNestedStackResource891B7171OutputsTestInstanceIngestBatcherIngestBatcherSubmitQueue12F5A53FRef"
                  },
                  "\nsleeper.compaction.pending.queue.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionPendingCompactionJobBatchQCAC69541Arn"
                  },
                  "\nsleeper.sqs.table.metrics.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceTableMetricsNestedStackTableMetricsNestedStackResource07987969OutputsTestInstanceTableMetricsMetricsJobDeadLetterQueue1EDBE7B1Arn"
                  },
                  "\nsleeper.compaction.task.creation.rule\u003d",
                  {
                    "Ref": "referencetoTestInstanceCompactionNestedStackCompactionNestedStackResource654ED576OutputsTestInstanceCompactionCompactionTasksCreationPeriodicTrigger39ADC4A9Ref"
                  },
                  "\nsleeper.ingest.job.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceIngestNestedStackIngestNestedStackResource002D40ECOutputsTestInstanceIngestIngestJobDeadLetterQueueE7DE67BFArn"
                  },
                  "\nsleeper.statestore.transactionlog.dynamo.all.snapshots.table\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogStateStoreNestedStackTransactionLogStateStoreNestedStackResource40043CEEOutputsTestInstanceTransactionLogStateStoreTransactionLogAllSnapshotsTable2337E270Ref"
                  },
                  "\nsleeper.statestore.transactionlog.snapshots.deletion.dlq.arn\u003d",
                  {
                    "Ref": "referencetoTestInstanceTransactionLogSnapshotNestedStackTransactionLogSnapshotNestedStackResourceE2C25218OutputsTestInstanceTransactionLogSnapshotTransactionLogSnapshotDeletionDeadLetterQueue4B6BA922Arn"
                  },
                  "\nsleeper.tables.online.index.dynamo.table\u003d",
                  {
                    "Ref": "referencetoTestInstanceTableIndexNestedStackTableIndexNestedStackResource69736C72OutputsTestInstanceTableIndexIndexByOnlineDynamoDBTable5A4BFE9DRef"
                  },
                  "\nsleeper.default.table.data.engine\u003djava\n"
                ]
              ]
            }
          }
        },
        "PropertiesWriterProviderframeworkonEventServiceRoleDefaultPolicy9FD0B20D": {
          "Type": "AWS::IAM::Policy",
          "Properties": {
            "PolicyName": "PropertiesWriterProviderframeworkonEventServiceRoleDefaultPolicy9FD0B20D",
            "PolicyDocument": {
              "Version": "2012-10-17",
              "Statement": [
                {
                  "Action": "lambda:InvokeFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "InstancePropertiesWriterLambdaCurrentVersionBD5B9E89017378c8f9b60636730f204c03c0fc35"
                  }
                },
                {
                  "Action": "lambda:GetFunction",
                  "Effect": "Allow",
                  "Resource": {
                    "Ref": "InstancePropertiesWriterLambdaCurrentVersionBD5B9E89017378c8f9b60636730f204c03c0fc35"
                  }
                }
              ]
            },
            "Roles": [
              {
                "Ref": "PropertiesWriterProviderframeworkonEventServiceRole148772E9"
              }
            ]
          }
        },
        "InstancePropertiesWriterLambdaCurrentVersionBD5B9E89017378c8f9b60636730f204c03c0fc35": {
          "Type": "AWS::Lambda::Version",
          "Metadata": {
            "aws:cdk:do-not-refactor": true
          },
          "Properties": {
            "FunctionName": {
              "Ref": "InstancePropertiesWriterLambda106E1AB8"
            }
          }
        },
        "PropertiesWriterProviderframeworkonEvent01372F53": {
          "Type": "AWS::Lambda::Function",
          "DependsOn": [
            "PropertiesWriterProviderframeworkonEventServiceRoleDefaultPolicy9FD0B20D",
            "PropertiesWriterProviderframeworkonEventServiceRole148772E9"
          ],
          "Properties": {
            "Role": {
              "Fn::GetAtt": [
                "PropertiesWriterProviderframeworkonEventServiceRole148772E9",
                "Arn"
              ]
            },
            "Runtime": "nodejs22.x",
            "Description": "AWS CDK resource provider framework - onEvent (TestInstance/Properties/PropertiesWriterProvider)",
            "Timeout": 900,
            "LoggingConfig": {
              "LogFormat": "JSON",
              "ApplicationLogLevel": "FATAL",
              "LogGroup": {
                "Ref": "referencetoTestInstanceLoggingNestedStackLoggingNestedStackResourceF6F78B9BOutputsTestInstanceLoggingpropertieswriterprovider89DFF902Ref"
              }
            },
            "Environment": {
              "Variables": {
                "USER_ON_EVENT_FUNCTION_ARN": {
                  "Ref": "InstancePropertiesWriterLambdaCurrentVersionBD5B9E89017378c8f9b60636730f204c03c0fc35"
                }
              }
            },
            "Handler": "framework.onEvent",
            "Code": {
              "S3Bucket": "cdk-hnb659fds-assets-test-account-test-region",
              "S3Key": "07a90cc3efdfc34da22208dcd9d211f06f5b0e01b21e778edc7c3966b1f61d57.zip"
            },
            "Tags": [
              {
                "Key": "DeploymentStack",
                "Value": "Properties"
              },
              {
                "Key": "InstanceID",
                "Value": "test-instance"
              }
            ]
          }
        }
      }
    }
  }
}